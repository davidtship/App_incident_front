import{j as t,r as l,f as O}from"./index-DjLJklN1.js";import{C as a}from"./CustomTextField-SbTLgMVA.js";import{C as n}from"./CustomFormLabel-YcVEnupk.js";import{s as z,T as p,B as h}from"./Box-Ceze8w59.js";import{c as g}from"./Button-7Ql2xwQA.js";import{D as E}from"./Divider-CXxq8pBL.js";import{S as L}from"./Stack-u9xV4qxd.js";import{I as u}from"./InputAdornment-0ZWWJbaf.js";import{I as f}from"./IconButton-D01K5F2W.js";import{V as x,a as j}from"./VisibilityOff-2pi-XrKP.js";z(s=>t.jsx(g,{variant:"outlined",size:"large",color:"inherit",...s}))(({theme:s})=>({border:`1px solid ${s.palette.divider}`,"&:hover":{color:s.palette.primary.main}}));const K=({title:s,subtitle:w,subtext:v})=>{const[r,C]=l.useState({first_name:"",last_name:"",email:"",password:"",passwordConfirm:""}),[m,y]=l.useState(!1),[c,S]=l.useState(!1),P=O(),b="https://safeschooldata-6d63cd50a8a3.herokuapp.com",o=e=>{C({...r,[e.target.id]:e.target.value})},_=()=>y(e=>!e),F=()=>S(e=>!e),W=e=>/^(?=.*[A-Za-z])(?=.*\d).{8,}$/.test(e),A=async e=>{e.preventDefault();const{first_name:I,last_name:k,email:D,password:d,passwordConfirm:T}=r;if(d!==T)return alert("Les mots de passe ne correspondent pas.");if(!W(d))return alert("Le mot de passe doit contenir au moins 8 caractères, une lettre et un chiffre.");const B={first_name:I,last_name:k,email:D,password:d};try{const i=await fetch(`${b}/auths/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),N=await i.json();if(!i.ok)return alert(JSON.stringify(N));alert("Compte créé avec succès !"),P("/auth/login")}catch(i){console.error(i),alert("Erreur lors de la création du compte.")}};return t.jsxs(t.Fragment,{children:[s&&t.jsx(p,{fontWeight:"700",variant:"h3",mb:1,children:s}),v,t.jsx(h,{mt:3,children:t.jsx(E,{children:t.jsx(p,{component:"span",color:"textSecondary",variant:"h6",fontWeight:"400",position:"relative",px:2,children:"Inscription"})})}),t.jsxs(h,{component:"form",onSubmit:A,children:[t.jsxs(L,{mb:3,spacing:2,children:[t.jsx(n,{htmlFor:"first_name",children:"Nom"}),t.jsx(a,{id:"first_name",variant:"outlined",fullWidth:!0,value:r.first_name,onChange:o}),t.jsx(n,{htmlFor:"last_name",children:"Postnom"}),t.jsx(a,{id:"last_name",variant:"outlined",fullWidth:!0,value:r.last_name,onChange:o}),t.jsx(n,{htmlFor:"email",children:"Adresse email"}),t.jsx(a,{id:"email",variant:"outlined",fullWidth:!0,value:r.email,onChange:o}),t.jsx(n,{htmlFor:"password",children:"Mot de passe"}),t.jsx(a,{id:"password",variant:"outlined",fullWidth:!0,type:m?"text":"password",value:r.password,onChange:o,InputProps:{endAdornment:t.jsx(u,{position:"end",children:t.jsx(f,{onClick:_,edge:"end",children:m?t.jsx(x,{}):t.jsx(j,{})})})}}),t.jsx(n,{htmlFor:"passwordConfirm",children:"Mot de passe de nouveau"}),t.jsx(a,{id:"passwordConfirm",variant:"outlined",fullWidth:!0,type:c?"text":"password",value:r.passwordConfirm,onChange:o,InputProps:{endAdornment:t.jsx(u,{position:"end",children:t.jsx(f,{onClick:F,edge:"end",children:c?t.jsx(x,{}):t.jsx(j,{})})})}})]}),t.jsx(g,{color:"primary",variant:"contained",size:"large",fullWidth:!0,type:"submit",children:"S'inscrire"})]}),w]})};export{K as A};
