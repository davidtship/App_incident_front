import{R as Le,r as b,a as We,u as kp,j as y,n as xr,P as I,o as wp,c as _t,s as Sp,p as Cp,q as Mp,_ as Dp,t as Tp,d as ca,b as Op}from"./index-DjLJklN1.js";import{P as Ep}from"./PageContainer-DXCsbuaA.js";import{a as Pp,B as Un}from"./BlankCard-Bi5qHtB0.js";import{_ as C,a as Ap,g as Ip,s as ce,c as bc,m as Np,b as Rp,d as Pe,e as Fp,h as Se,T as nt,i as jp,B as wt}from"./Box-Ceze8w59.js";import{b as Lp,T as Vp,S as kc,F as $p,I as Bp,d as Go,G as zp,e as _p,R as Hp,g as da,s as Wp}from"./Select-CmYIInra.js";import{C as dt}from"./CustomFormLabel-YcVEnupk.js";import{C as bn}from"./CustomTextField-SbTLgMVA.js";import{c as $e,u as Jr,P as Up,s as ua,G as Fe}from"./Grid2-C7BmHvXf.js";import{a as qp,r as Yp,l as Kp,i as Jp,o as qn,b as Gp,c as Zp}from"./toNumber-BBbEHjcV.js";import{C as Xp}from"./Collapse-BIpyWb45.js";import{r as Qp}from"./toString-DmXhm1W-.js";import{T as wc}from"./Tooltip-u8-GLEky.js";import{M as ft}from"./MenuItem-CfZoc-QB.js";import{D as ef}from"./Divider-CXxq8pBL.js";import{_ as tf,e as me,d as Sc,r as nf,T as Cc,c as pt}from"./Button-7Ql2xwQA.js";import{C as Mc}from"./Chip-DGxUr5go.js";import{S as ro}from"./Stack-NByccG3l.js";import{u as Dc}from"./useMediaQuery-BupjH5Wg.js";import{I as Zo}from"./IconButton-D01K5F2W.js";import{F as rf,T as Cn}from"./TextField-BLFWIern.js";import{b as Xo,L as of}from"./List-BYtwvu4r.js";import{I as Tc}from"./InputAdornment-0ZWWJbaf.js";import{P as sf}from"./Popper-Cr7FSbl5.js";import{D as Ji}from"./DialogActions-BN6EYxeK.js";import{L as af}from"./ListItem-BeU6EMKw.js";import{D as Gi,d as pa,a as Zi}from"./DialogContent-CtWUWdOy.js";import{A as oo}from"./Autocomplete-rOxPlZHL.js";import{c as lf}from"./createReactComponent-B5Bwwah4.js";import{C as cf}from"./Checkbox-Bl4k4Zle.js";import{S as df}from"./Snackbar-DYXJOWsk.js";import{A as uf}from"./Alert-81CHHkjh.js";import{D as fa}from"./DialogTitle-C2EZfcf5.js";import{S as pf}from"./Slide-8maU3OBq.js";import"./index.esm-Ckl_97PH.js";import"./Card-Bn8FUNEZ.js";import"./useSlot-oTH9YaFV.js";import"./dividerClasses-Y2SIUT43.js";import"./listItemTextClasses-DrN86Jiw.js";import"./createStack-BE4hiCiQ.js";import"./createPopper-DM_rq4rS.js";import"./listItemButtonClasses-BpIEGUge.js";import"./Close-NdfeGcxT.js";import"./ListSubheader-CIu0rnsP.js";import"./SwitchBase-B9tuHZ1T.js";var ff=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return qp(e,r)})},yi=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return Yp(e,r)})},Ds=function(n){tf(e,n);function e(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=n.call.apply(n,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(a,l){var c=r.resolveArguments(a,l),d=c[0],u=c[1];r.removeClasses(d,"exit"),r.addClass(d,u?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(a,l)},r.onEntering=function(a,l){var c=r.resolveArguments(a,l),d=c[0],u=c[1],p=u?"appear":"enter";r.addClass(d,p,"active"),r.props.onEntering&&r.props.onEntering(a,l)},r.onEntered=function(a,l){var c=r.resolveArguments(a,l),d=c[0],u=c[1],p=u?"appear":"enter";r.removeClasses(d,p),r.addClass(d,p,"done"),r.props.onEntered&&r.props.onEntered(a,l)},r.onExit=function(a){var l=r.resolveArguments(a),c=l[0];r.removeClasses(c,"appear"),r.removeClasses(c,"enter"),r.addClass(c,"exit","base"),r.props.onExit&&r.props.onExit(a)},r.onExiting=function(a){var l=r.resolveArguments(a),c=l[0];r.addClass(c,"exit","active"),r.props.onExiting&&r.props.onExiting(a)},r.onExited=function(a){var l=r.resolveArguments(a),c=l[0];r.removeClasses(c,"exit"),r.addClass(c,"exit","done"),r.props.onExited&&r.props.onExited(a)},r.resolveArguments=function(a,l){return r.props.nodeRef?[r.props.nodeRef.current,a]:[a,l]},r.getClassNames=function(a){var l=r.props.classNames,c=typeof l=="string",d=c&&l?l+"-":"",u=c?""+d+a:l[a],p=c?u+"-active":l[a+"Active"],h=c?u+"-done":l[a+"Done"];return{baseClassName:u,activeClassName:p,doneClassName:h}},r}var t=e.prototype;return t.addClass=function(o,i,s){var a=this.getClassNames(i)[s+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;i==="appear"&&s==="done"&&c&&(a+=" "+c),s==="active"&&o&&Lp(o),a&&(this.appliedClasses[i][s]=a,ff(o,a))},t.removeClasses=function(o,i){var s=this.appliedClasses[i],a=s.base,l=s.active,c=s.done;this.appliedClasses[i]={},a&&yi(o,a),l&&yi(o,l),c&&yi(o,c)},t.render=function(){var o=this.props;o.classNames;var i=me(o,["classNames"]);return Le.createElement(Vp,C({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Le.Component);Ds.defaultProps={classNames:""};Ds.propTypes={};function hf(n){return Ip("MuiToggleButton",n)}const xo=Ap("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),mf=b.createContext({}),gf=b.createContext(void 0);function yf(n,e){return e===void 0||n===void 0?!1:Array.isArray(e)?e.includes(n):n===e}const xf=n=>{const{classes:e,fullWidth:t,selected:r,disabled:o,size:i,color:s}=n,a={root:["root",r&&"selected",o&&"disabled",t&&"fullWidth",`size${bc(i)}`,s]};return Fp(a,hf,e)},vf=ce(Sc,{name:"MuiToggleButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`size${bc(t.size)}`]]}})(Np(({theme:n})=>({...n.typography.button,borderRadius:(n.vars||n).shape.borderRadius,padding:11,border:`1px solid ${(n.vars||n).palette.divider}`,color:(n.vars||n).palette.action.active,[`&.${xo.disabled}`]:{color:(n.vars||n).palette.action.disabled,border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:We(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${xo.selected}`]:{color:(n.vars||n).palette.text.primary,backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.selectedOpacity})`:We(n.palette.text.primary,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:We(n.palette.text.primary,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.selectedOpacity})`:We(n.palette.text.primary,n.palette.action.selectedOpacity)}}}}},...Object.entries(n.palette).filter(Rp()).map(([e])=>({props:{color:e},style:{[`&.${xo.selected}`]:{color:(n.vars||n).palette[e].main,backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.selectedOpacity})`:We(n.palette[e].main,n.palette.action.selectedOpacity),"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:We(n.palette[e].main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.selectedOpacity})`:We(n.palette[e].main,n.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:n.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:n.typography.pxToRem(15)}}]}))),bf=b.forwardRef(function(e,t){const{value:r,...o}=b.useContext(mf),i=b.useContext(gf),s=nf({...o,selected:yf(e.value,r)},e),a=kp({props:s,name:"MuiToggleButton"}),{children:l,className:c,color:d="standard",disabled:u=!1,disableFocusRipple:p=!1,fullWidth:h=!1,onChange:f,onClick:m,selected:g,size:x="medium",value:v,...k}=a,w={...a,color:d,disabled:u,disableFocusRipple:p,fullWidth:h,size:x},D=xf(w),E=M=>{m&&(m(M,v),M.defaultPrevented)||f&&f(M,v)},P=i||"";return y.jsx(vf,{className:Pe(o.className,D.root,c,P),disabled:u,focusRipple:!p,ref:t,onClick:E,onChange:f,value:v,ownerState:w,"aria-pressed":g,...k,children:l})}),kf=$e(y.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),wf=$e(y.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42M10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5"}),"FormatBold"),Sf=$e(y.jsx("path",{d:"M3.27 5 2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5z"}),"FormatClear"),Cf=$e(y.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}),"FormatItalic"),Mf=$e(y.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted"),Df=$e(y.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2zm1-9h1V4H2v1h1zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2zm5-6v2h14V5zm0 14h14v-2H7zm0-6h14v-2H7z"}),"FormatListNumbered"),Tf=$e(y.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"}),"FormatQuote"),Of=$e(y.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRule"),Ef=$e(y.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo"),Pf=$e(y.jsx("path",{d:"M6.85 7.08C6.85 4.37 9.45 3 12.24 3c1.64 0 3 .49 3.9 1.28.77.65 1.46 1.73 1.46 3.24h-3.01c0-.31-.05-.59-.15-.85-.29-.86-1.2-1.28-2.25-1.28-1.86 0-2.34 1.02-2.34 1.7 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.21-.34-.54-.89-.54-1.92M21 12v-2H3v2h9.62c1.15.45 1.96.75 1.96 1.97 0 1-.81 1.67-2.28 1.67-1.54 0-2.93-.54-2.93-2.51H6.4c0 .55.08 1.13.24 1.58.81 2.29 3.29 3.3 5.67 3.3 2.27 0 5.3-.89 5.3-4.05 0-.3-.01-1.16-.48-1.94H21z"}),"StrikethroughS"),Af=$e(y.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo");var ha=lf("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);function _n(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(d){try{c(r.next(d))}catch(u){s(u)}}function l(d){try{c(r.throw(d))}catch(u){s(u)}}function c(d){d.done?i(d.value):o(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}const If=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function ur(n,e,t){const r=Nf(n),{webkitRelativePath:o}=n,i=typeof e=="string"?e:typeof o=="string"&&o.length>0?o:`./${n.name}`;return typeof r.path!="string"&&ma(r,"path",i),ma(r,"relativePath",i),r}function Nf(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const r=e.split(".").pop().toLowerCase(),o=If.get(r);o&&Object.defineProperty(n,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return n}function ma(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const Rf=[".DS_Store","Thumbs.db"];function Ff(n){return _n(this,void 0,void 0,function*(){return Oo(n)&&jf(n.dataTransfer)?Bf(n.dataTransfer,n.type):Lf(n)?Vf(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?$f(n):[]})}function jf(n){return Oo(n)}function Lf(n){return Oo(n)&&Oo(n.target)}function Oo(n){return typeof n=="object"&&n!==null}function Vf(n){return Xi(n.target.files).map(e=>ur(e))}function $f(n){return _n(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>ur(t))})}function Bf(n,e){return _n(this,void 0,void 0,function*(){if(n.items){const t=Xi(n.items).filter(o=>o.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(zf));return ga(Oc(r))}return ga(Xi(n.files).map(t=>ur(t)))})}function ga(n){return n.filter(e=>Rf.indexOf(e.name)===-1)}function Xi(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const r=n[t];e.push(r)}return e}function zf(n){if(typeof n.webkitGetAsEntry!="function")return ya(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?Ec(e):ya(n,e)}function Oc(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?Oc(t):[t]],[])}function ya(n,e){return _n(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const i=yield n.getAsFileSystemHandle();if(i===null)throw new Error(`${n} is not a File`);if(i!==void 0){const s=yield i.getFile();return s.handle=i,ur(s)}}const r=n.getAsFile();if(!r)throw new Error(`${n} is not a File`);return ur(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function _f(n){return _n(this,void 0,void 0,function*(){return n.isDirectory?Ec(n):Hf(n)})}function Ec(n){const e=n.createReader();return new Promise((t,r)=>{const o=[];function i(){e.readEntries(s=>_n(this,void 0,void 0,function*(){if(s.length){const a=Promise.all(s.map(_f));o.push(a),i()}else try{const a=yield Promise.all(o);t(a)}catch(a){r(a)}}),s=>{r(s)})}i()})}function Hf(n){return _n(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(r=>{const o=ur(r,n.fullPath);e(o)},r=>{t(r)})})})}var io={},xa;function Wf(){return xa||(xa=1,io.__esModule=!0,io.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",o=(n.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return t.some(function(s){var a=s.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?i===a.replace(/\/.*$/,""):o===a})}return!0}),io}var Uf=Wf();const xi=xr(Uf);function va(n){return Kf(n)||Yf(n)||Ac(n)||qf()}function qf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yf(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kf(n){if(Array.isArray(n))return Qi(n)}function ba(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function ka(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ba(Object(t),!0).forEach(function(r){Pc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ba(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pc(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $r(n,e){return Zf(n)||Gf(n,e)||Ac(n,e)||Jf()}function Jf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ac(n,e){if(n){if(typeof n=="string")return Qi(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qi(n,e)}}function Qi(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Gf(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],o=!0,i=!1,s,a;try{for(t=t.call(n);!(o=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));o=!0);}catch(l){i=!0,a=l}finally{try{!o&&t.return!=null&&t.return()}finally{if(i)throw a}}return r}}function Zf(n){if(Array.isArray(n))return n}var Xf=typeof xi=="function"?xi:xi.default,Qf="file-invalid-type",eh="file-too-large",th="file-too-small",nh="too-many-files",rh=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:Qf,message:"File type must be ".concat(r)}},wa=function(e){return{code:eh,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Sa=function(e){return{code:th,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},oh={code:nh,message:"Too many files"};function Ic(n,e){var t=n.type==="application/x-moz-file"||Xf(n,e);return[t,t?null:rh(e)]}function Nc(n,e,t){if(Mn(n.size))if(Mn(e)&&Mn(t)){if(n.size>t)return[!1,wa(t)];if(n.size<e)return[!1,Sa(e)]}else{if(Mn(e)&&n.size<e)return[!1,Sa(e)];if(Mn(t)&&n.size>t)return[!1,wa(t)]}return[!0,null]}function Mn(n){return n!=null}function ih(n){var e=n.files,t=n.accept,r=n.minSize,o=n.maxSize,i=n.multiple,s=n.maxFiles,a=n.validator;return!i&&e.length>1||i&&s>=1&&e.length>s?!1:e.every(function(l){var c=Ic(l,t),d=$r(c,1),u=d[0],p=Nc(l,r,o),h=$r(p,1),f=h[0],m=a?a(l):null;return u&&f&&!m})}function Eo(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function so(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function Ca(n){n.preventDefault()}function sh(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function ah(n){return n.indexOf("Edge/")!==-1}function lh(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return sh(n)||ah(n)}function Ot(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return e.some(function(a){return!Eo(r)&&a&&a.apply(void 0,[r].concat(i)),Eo(r)})}}function ch(){return"showOpenFilePicker"in window}function dh(n){if(Mn(n)){var e=Object.entries(n).filter(function(t){var r=$r(t,2),o=r[0],i=r[1],s=!0;return Rc(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(i)||!i.every(Fc))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(t,r){var o=$r(r,2),i=o[0],s=o[1];return ka(ka({},t),{},Pc({},i,s))},{});return[{description:"Files",accept:e}]}return n}function uh(n){if(Mn(n))return Object.entries(n).reduce(function(e,t){var r=$r(t,2),o=r[0],i=r[1];return[].concat(va(e),[o],va(i))},[]).filter(function(e){return Rc(e)||Fc(e)}).join(",")}function ph(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function fh(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function Rc(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function Fc(n){return/^.*\.[\w]+$/.test(n)}var hh=["children"],mh=["open"],gh=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],yh=["refKey","onChange","onClick"];function xh(n){return kh(n)||bh(n)||jc(n)||vh()}function vh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bh(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kh(n){if(Array.isArray(n))return es(n)}function vi(n,e){return Ch(n)||Sh(n,e)||jc(n,e)||wh()}function wh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jc(n,e){if(n){if(typeof n=="string")return es(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return es(n,e)}}function es(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Sh(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],o=!0,i=!1,s,a;try{for(t=t.call(n);!(o=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));o=!0);}catch(l){i=!0,a=l}finally{try{!o&&t.return!=null&&t.return()}finally{if(i)throw a}}return r}}function Ch(n){if(Array.isArray(n))return n}function Ma(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function De(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ma(Object(t),!0).forEach(function(r){ts(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ma(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ts(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Po(n,e){if(n==null)return{};var t=Mh(n,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Mh(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}var Ts=b.forwardRef(function(n,e){var t=n.children,r=Po(n,hh),o=Vc(r),i=o.open,s=Po(o,mh);return b.useImperativeHandle(e,function(){return{open:i}},[i]),Le.createElement(b.Fragment,null,t(De(De({},s),{},{open:i})))});Ts.displayName="Dropzone";var Lc={disabled:!1,getFilesFromEvent:Ff,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ts.defaultProps=Lc;Ts.propTypes={children:I.func,accept:I.objectOf(I.arrayOf(I.string)),multiple:I.bool,preventDropOnDocument:I.bool,noClick:I.bool,noKeyboard:I.bool,noDrag:I.bool,noDragEventsBubbling:I.bool,minSize:I.number,maxSize:I.number,maxFiles:I.number,disabled:I.bool,getFilesFromEvent:I.func,onFileDialogCancel:I.func,onFileDialogOpen:I.func,useFsAccessApi:I.bool,autoFocus:I.bool,onDragEnter:I.func,onDragLeave:I.func,onDragOver:I.func,onDrop:I.func,onDropAccepted:I.func,onDropRejected:I.func,onError:I.func,validator:I.func};var ns={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Vc(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=De(De({},Lc),n),t=e.accept,r=e.disabled,o=e.getFilesFromEvent,i=e.maxSize,s=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,d=e.onDragLeave,u=e.onDragOver,p=e.onDrop,h=e.onDropAccepted,f=e.onDropRejected,m=e.onFileDialogCancel,g=e.onFileDialogOpen,x=e.useFsAccessApi,v=e.autoFocus,k=e.preventDropOnDocument,w=e.noClick,D=e.noKeyboard,E=e.noDrag,P=e.noDragEventsBubbling,M=e.onError,R=e.validator,F=b.useMemo(function(){return uh(t)},[t]),N=b.useMemo(function(){return dh(t)},[t]),V=b.useMemo(function(){return typeof g=="function"?g:Da},[g]),$=b.useMemo(function(){return typeof m=="function"?m:Da},[m]),T=b.useRef(null),S=b.useRef(null),O=b.useReducer(Dh,ns),B=vi(O,2),L=B[0],_=B[1],U=L.isFocused,J=L.isFileDialogActive,G=b.useRef(typeof window<"u"&&window.isSecureContext&&x&&ch()),de=function(){!G.current&&J&&setTimeout(function(){if(S.current){var pe=S.current.files;pe.length||(_({type:"closeDialog"}),$())}},300)};b.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[S,J,$,G]);var K=b.useRef([]),z=function(pe){T.current&&T.current.contains(pe.target)||(pe.preventDefault(),K.current=[])};b.useEffect(function(){return k&&(document.addEventListener("dragover",Ca,!1),document.addEventListener("drop",z,!1)),function(){k&&(document.removeEventListener("dragover",Ca),document.removeEventListener("drop",z))}},[T,k]),b.useEffect(function(){return!r&&v&&T.current&&T.current.focus(),function(){}},[T,v,r]);var Q=b.useCallback(function(re){M?M(re):console.error(re)},[M]),Z=b.useCallback(function(re){re.preventDefault(),re.persist(),ve(re),K.current=[].concat(xh(K.current),[re.target]),so(re)&&Promise.resolve(o(re)).then(function(pe){if(!(Eo(re)&&!P)){var Me=pe.length,Te=Me>0&&ih({files:pe,accept:F,minSize:s,maxSize:i,multiple:a,maxFiles:l,validator:R}),Ye=Me>0&&!Te;_({isDragAccept:Te,isDragReject:Ye,isDragActive:!0,type:"setDraggedFiles"}),c&&c(re)}}).catch(function(pe){return Q(pe)})},[o,c,Q,P,F,s,i,a,l,R]),H=b.useCallback(function(re){re.preventDefault(),re.persist(),ve(re);var pe=so(re);if(pe&&re.dataTransfer)try{re.dataTransfer.dropEffect="copy"}catch{}return pe&&u&&u(re),!1},[u,P]),ne=b.useCallback(function(re){re.preventDefault(),re.persist(),ve(re);var pe=K.current.filter(function(Te){return T.current&&T.current.contains(Te)}),Me=pe.indexOf(re.target);Me!==-1&&pe.splice(Me,1),K.current=pe,!(pe.length>0)&&(_({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),so(re)&&d&&d(re))},[T,d,P]),se=b.useCallback(function(re,pe){var Me=[],Te=[];re.forEach(function(Ye){var hn=Ic(Ye,F),qt=vi(hn,2),kr=qt[0],wr=qt[1],mn=Nc(Ye,s,i),gn=vi(mn,2),yn=gn[0],xn=gn[1],vn=R?R(Ye):null;if(kr&&yn&&!vn)Me.push(Ye);else{var Sr=[wr,xn];vn&&(Sr=Sr.concat(vn)),Te.push({file:Ye,errors:Sr.filter(function(we){return we})})}}),(!a&&Me.length>1||a&&l>=1&&Me.length>l)&&(Me.forEach(function(Ye){Te.push({file:Ye,errors:[oh]})}),Me.splice(0)),_({acceptedFiles:Me,fileRejections:Te,isDragReject:Te.length>0,type:"setFiles"}),p&&p(Me,Te,pe),Te.length>0&&f&&f(Te,pe),Me.length>0&&h&&h(Me,pe)},[_,a,F,s,i,l,p,h,f,R]),te=b.useCallback(function(re){re.preventDefault(),re.persist(),ve(re),K.current=[],so(re)&&Promise.resolve(o(re)).then(function(pe){Eo(re)&&!P||se(pe,re)}).catch(function(pe){return Q(pe)}),_({type:"reset"})},[o,se,Q,P]),j=b.useCallback(function(){if(G.current){_({type:"openDialog"}),V();var re={multiple:a,types:N};window.showOpenFilePicker(re).then(function(pe){return o(pe)}).then(function(pe){se(pe,null),_({type:"closeDialog"})}).catch(function(pe){ph(pe)?($(pe),_({type:"closeDialog"})):fh(pe)?(G.current=!1,S.current?(S.current.value=null,S.current.click()):Q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Q(pe)});return}S.current&&(_({type:"openDialog"}),V(),S.current.value=null,S.current.click())},[_,V,$,x,se,Q,N,a]),A=b.useCallback(function(re){!T.current||!T.current.isEqualNode(re.target)||(re.key===" "||re.key==="Enter"||re.keyCode===32||re.keyCode===13)&&(re.preventDefault(),j())},[T,j]),Y=b.useCallback(function(){_({type:"focus"})},[]),q=b.useCallback(function(){_({type:"blur"})},[]),X=b.useCallback(function(){w||(lh()?setTimeout(j,0):j())},[w,j]),oe=function(pe){return r?null:pe},ee=function(pe){return D?null:oe(pe)},fe=function(pe){return E?null:oe(pe)},ve=function(pe){P&&pe.stopPropagation()},bt=b.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=re.refKey,Me=pe===void 0?"ref":pe,Te=re.role,Ye=re.onKeyDown,hn=re.onFocus,qt=re.onBlur,kr=re.onClick,wr=re.onDragEnter,mn=re.onDragOver,gn=re.onDragLeave,yn=re.onDrop,xn=Po(re,gh);return De(De(ts({onKeyDown:ee(Ot(Ye,A)),onFocus:ee(Ot(hn,Y)),onBlur:ee(Ot(qt,q)),onClick:oe(Ot(kr,X)),onDragEnter:fe(Ot(wr,Z)),onDragOver:fe(Ot(mn,H)),onDragLeave:fe(Ot(gn,ne)),onDrop:fe(Ot(yn,te)),role:typeof Te=="string"&&Te!==""?Te:"presentation"},Me,T),!r&&!D?{tabIndex:0}:{}),xn)}},[T,A,Y,q,X,Z,H,ne,te,D,E,r]),Ut=b.useCallback(function(re){re.stopPropagation()},[]),br=b.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=re.refKey,Me=pe===void 0?"ref":pe,Te=re.onChange,Ye=re.onClick,hn=Po(re,yh),qt=ts({accept:F,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:oe(Ot(Te,te)),onClick:oe(Ot(Ye,Ut)),tabIndex:-1},Me,S);return De(De({},qt),hn)}},[S,t,a,te,r]);return De(De({},L),{},{isFocused:U&&!r,getRootProps:bt,getInputProps:br,rootRef:T,inputRef:S,open:oe(j)})}function Dh(n,e){switch(e.type){case"focus":return De(De({},n),{},{isFocused:!0});case"blur":return De(De({},n),{},{isFocused:!1});case"openDialog":return De(De({},ns),{},{isFileDialogActive:!0});case"closeDialog":return De(De({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return De(De({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return De(De({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return De({},ns);default:return n}}function Da(){}const Ta=ce(n=>y.jsx(kc,{...n}))();function Th(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const $c=I.oneOfType([I.func,I.object]);function Oh(n){if(typeof n!="string")throw new Error(Th(7));return n.charAt(0).toUpperCase()+n.slice(1)}function bi(n){return n&&n.ownerDocument||document}function Eh(n,e){typeof n=="function"?n(e):n&&(n.current=e)}const zt=typeof window<"u"?b.useLayoutEffect:b.useEffect;let Oa=0;function Ph(n){const[e,t]=b.useState(n),r=n||e;return b.useEffect(()=>{e==null&&(Oa+=1,t(`mui-${Oa}`))},[e]),r}const Ea=wp.useId;function Gr(n){if(Ea!==void 0){const e=Ea();return n??e}return Ph(n)}function Ln({controlled:n,default:e,name:t,state:r="value"}){const{current:o}=b.useRef(n!==void 0),[i,s]=b.useState(e),a=o?n:i,l=b.useCallback(c=>{o||s(c)},[]);return[a,l]}function le(n){const e=b.useRef(n);return zt(()=>{e.current=n}),b.useRef((...t)=>(0,e.current)(...t)).current}function ct(...n){return b.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{Eh(t,e)})},n)}const Ah={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Ae(n,e,t=void 0){const r={};return Object.keys(n).forEach(o=>{r[o]=n[o].reduce((i,s)=>{if(s){const a=e(s);a!==""&&i.push(a),t&&t[s]&&i.push(t[s])}return i},[]).join(" ")}),r}const Pa=n=>n,Ih=()=>{let n=Pa;return{configure(e){n=e},generate(e){return n(e)},reset(){n=Pa}}},Nh=Ih(),Rh={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ie(n,e,t="Mui"){const r=Rh[e];return r?`${t}-${r}`:`${Nh.generate(n)}-${e}`}function Ne(n,e,t="Mui"){const r={};return e.forEach(o=>{r[o]=Ie(n,o,t)}),r}function Fh(n){return typeof n=="string"}function jh(n,e,t){return n===void 0||Fh(n)?e:C({},e,{ownerState:C({},e.ownerState,t)})}function Lh(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function Aa(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Vh(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:o,className:i}=n;if(!e){const h=Pe(t==null?void 0:t.className,i,o==null?void 0:o.className,r==null?void 0:r.className),f=C({},t==null?void 0:t.style,o==null?void 0:o.style,r==null?void 0:r.style),m=C({},t,o,r);return h.length>0&&(m.className=h),Object.keys(f).length>0&&(m.style=f),{props:m,internalRef:void 0}}const s=Lh(C({},o,r)),a=Aa(r),l=Aa(o),c=e(s),d=Pe(c==null?void 0:c.className,t==null?void 0:t.className,i,o==null?void 0:o.className,r==null?void 0:r.className),u=C({},c==null?void 0:c.style,t==null?void 0:t.style,o==null?void 0:o.style,r==null?void 0:r.style),p=C({},c,t,l,a);return d.length>0&&(p.className=d),Object.keys(u).length>0&&(p.style=u),{props:p,internalRef:c.ref}}function Os(n,e,t){return typeof n=="function"?n(e,t):n}const $h=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function be(n){var e;const{elementType:t,externalSlotProps:r,ownerState:o,skipResolvingSlotProps:i=!1}=n,s=me(n,$h),a=i?{}:Os(r,o),{props:l,internalRef:c}=Vh(C({},s,{externalSlotProps:a})),d=ct(c,a==null?void 0:a.ref,(e=n.additionalProps)==null?void 0:e.ref);return jh(t,C({},l,{ref:d}),o)}const Bh=["localeText"],rs=b.createContext(null),Ao=function(e){const{localeText:t}=e,r=me(e,Bh),{utils:o,localeText:i}=b.useContext(rs)??{utils:void 0,localeText:void 0},s=Se({props:r,name:"MuiLocalizationProvider"}),{children:a,dateAdapter:l,dateFormats:c,dateLibInstance:d,adapterLocale:u,localeText:p}=s,h=b.useMemo(()=>C({},p,i,t),[p,i,t]),f=b.useMemo(()=>{if(!l)return o||null;const x=new l({locale:u,formats:c,instance:d});if(!x.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return x},[l,u,c,d,o]),m=b.useMemo(()=>f?{minDate:f.date("1900-01-01T00:00:00.000"),maxDate:f.date("2099-12-31T00:00:00.000")}:null,[f]),g=b.useMemo(()=>({utils:f,defaultDates:m,localeText:h}),[m,f,h]);return y.jsx(rs.Provider,{value:g,children:a})},zh=n=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:C({},n)}}}}),Bc=n=>{const{utils:e,formatKey:t,contextTranslation:r,propsTranslation:o}=n;return i=>{const s=i!==null&&e.isValid(i)?e.format(i,t):null;return(o??r)(i,e,s)}},zc={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:n=>n==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(n,e,t,r)=>`Select ${n}. ${!r&&(e===null||!t.isValid(e))?"No time selected":`Selected time is ${r??t.format(e,"fullTime")}`}`,hoursClockNumberText:n=>`${n} hours`,minutesClockNumberText:n=>`${n} minutes`,secondsClockNumberText:n=>`${n} seconds`,selectViewText:n=>`Select ${n}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:n=>`Week ${n}`,calendarWeekNumberText:n=>`${n}`,openDatePickerDialogue:(n,e,t)=>t||n!==null&&e.isValid(n)?`Choose date, selected date is ${t??e.format(n,"fullDate")}`:"Choose date",openTimePickerDialogue:(n,e,t)=>t||n!==null&&e.isValid(n)?`Choose time, selected time is ${t??e.format(n,"fullTime")}`:"Choose time",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:n=>"Y".repeat(n.digitAmount),fieldMonthPlaceholder:n=>n.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:n=>n.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},_h=zc;zh(zc);const Hn=()=>{const n=b.useContext(rs);if(n===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(n.utils===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=b.useMemo(()=>C({},_h,n.localeText),[n.localeText]);return b.useMemo(()=>C({},n,{localeText:e}),[n,e])},Ce=()=>Hn().utils,Zr=()=>Hn().defaultDates,Qo=n=>{const e=Ce(),t=b.useRef();return t.current===void 0&&(t.current=e.date(void 0,n)),t.current},Ht=()=>Hn().localeText,Hh=$e(y.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Wh=$e(y.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),Uh=$e(y.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),qh=$e(y.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");$e(y.jsxs(b.Fragment,{children:[y.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),y.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");$e(y.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");$e(y.jsxs(b.Fragment,{children:[y.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),y.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time");const Yh=$e(y.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function Kh(n){return Ie("MuiPickersArrowSwitcher",n)}Ne("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const Jh=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId"],Gh=["ownerState"],Zh=["ownerState"],Xh=ce("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"flex"}),Qh=ce("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(n,e)=>e.spacer})(({theme:n})=>({width:n.spacing(3)})),Ia=ce(Zo,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(n,e)=>e.button})({variants:[{props:{hidden:!0},style:{visibility:"hidden"}}]}),em=n=>{const{classes:e}=n;return Ae({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},Kh,e)},tm=b.forwardRef(function(e,t){const r=_t(),o=Se({props:e,name:"MuiPickersArrowSwitcher"}),{children:i,className:s,slots:a,slotProps:l,isNextDisabled:c,isNextHidden:d,onGoToNext:u,nextLabel:p,isPreviousDisabled:h,isPreviousHidden:f,onGoToPrevious:m,previousLabel:g,labelId:x}=o,v=me(o,Jh),k=o,w=em(k),D={isDisabled:c,isHidden:d,goTo:u,label:p},E={isDisabled:h,isHidden:f,goTo:m,label:g},P=(a==null?void 0:a.previousIconButton)??Ia,M=be({elementType:P,externalSlotProps:l==null?void 0:l.previousIconButton,additionalProps:{size:"medium",title:E.label,"aria-label":E.label,disabled:E.isDisabled,edge:"end",onClick:E.goTo},ownerState:C({},k,{hidden:E.isHidden}),className:Pe(w.button,w.previousIconButton)}),R=(a==null?void 0:a.nextIconButton)??Ia,F=be({elementType:R,externalSlotProps:l==null?void 0:l.nextIconButton,additionalProps:{size:"medium",title:D.label,"aria-label":D.label,disabled:D.isDisabled,edge:"start",onClick:D.goTo},ownerState:C({},k,{hidden:D.isHidden}),className:Pe(w.button,w.nextIconButton)}),N=(a==null?void 0:a.leftArrowIcon)??Wh,V=be({elementType:N,externalSlotProps:l==null?void 0:l.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:k,className:w.leftArrowIcon}),$=me(V,Gh),T=(a==null?void 0:a.rightArrowIcon)??Uh,S=be({elementType:T,externalSlotProps:l==null?void 0:l.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:k,className:w.rightArrowIcon}),O=me(S,Zh);return y.jsxs(Xh,C({ref:t,className:Pe(w.root,s),ownerState:k},v,{children:[y.jsx(P,C({},M,{children:r?y.jsx(T,C({},O)):y.jsx(N,C({},$))})),i?y.jsx(nt,{variant:"subtitle1",component:"span",id:x,children:i}):y.jsx(Qh,{className:w.spacer,ownerState:k}),y.jsx(R,C({},F,{children:r?y.jsx(N,C({},$)):y.jsx(T,C({},O))}))]}))}),Mr=(n,e)=>n.length!==e.length?!1:e.every(t=>n.includes(t)),nm=({openTo:n,defaultOpenTo:e,views:t,defaultViews:r})=>{const o=t??r;let i;if(n!=null)i=n;else if(o.includes(e))i=e;else if(o.length>0)i=o[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:o,openTo:i}},rm=["hours","minutes","seconds"],om=n=>rm.includes(n),Na=(n,e)=>e.getHours(n)*3600+e.getMinutes(n)*60+e.getSeconds(n),im=(n,e)=>(t,r)=>n?e.isAfter(t,r):Na(t,e)>Na(r,e);function _c({onChange:n,onViewChange:e,openTo:t,view:r,views:o,autoFocus:i,focusedView:s,onFocusedViewChange:a}){const l=b.useRef(t),c=b.useRef(o),d=b.useRef(o.includes(t)?t:o[0]),[u,p]=Ln({name:"useViews",state:"view",controlled:r,default:d.current}),h=b.useRef(i?u:null),[f,m]=Ln({name:"useViews",state:"focusedView",controlled:s,default:h.current});b.useEffect(()=>{(l.current&&l.current!==t||c.current&&c.current.some(P=>!o.includes(P)))&&(p(o.includes(t)?t:o[0]),c.current=o,l.current=t)},[t,p,u,o]);const g=o.indexOf(u),x=o[g-1]??null,v=o[g+1]??null,k=le((P,M)=>{m(M?P:R=>P===R?null:R),a==null||a(P,M)}),w=le(P=>{k(P,!0),P!==u&&(p(P),e&&e(P))}),D=le(()=>{v&&w(v)}),E=le((P,M,R)=>{const F=M==="finish",N=R?o.indexOf(R)<o.length-1:!!v;if(n(P,F&&N?"partial":M,R),R&&R!==u){const $=o[o.indexOf(R)+1];$&&w($)}else F&&D()});return{view:u,setView:w,focusedView:f,setFocusedView:k,nextView:v,previousView:x,defaultView:o.includes(t)?t:o[0],goToNextView:D,setValueAndGoToNextView:E}}function sm(n,{disableFuture:e,maxDate:t,timezone:r}){const o=Ce();return b.useMemo(()=>{const i=o.date(void 0,r),s=o.startOfMonth(e&&o.isBefore(i,t)?i:t);return!o.isAfter(s,n)},[e,t,n,o,r])}function am(n,{disablePast:e,minDate:t,timezone:r}){const o=Ce();return b.useMemo(()=>{const i=o.date(void 0,r),s=o.startOfMonth(e&&o.isAfter(i,t)?i:t);return!o.isBefore(s,n)},[e,t,n,o,r])}const Br=36,ei=2,ti=320,lm=280,Es=336,cm=ce("div")({overflow:"hidden",width:ti,maxHeight:Es,display:"flex",flexDirection:"column",margin:"0 auto"}),Io=(n,e,t)=>{let r=e;return r=n.setHours(r,n.getHours(t)),r=n.setMinutes(r,n.getMinutes(t)),r=n.setSeconds(r,n.getSeconds(t)),r=n.setMilliseconds(r,n.getMilliseconds(t)),r},Rr=({date:n,disableFuture:e,disablePast:t,maxDate:r,minDate:o,isDateDisabled:i,utils:s,timezone:a})=>{const l=Io(s,s.date(void 0,a),n);t&&s.isBefore(o,l)&&(o=l),e&&s.isAfter(r,l)&&(r=l);let c=n,d=n;for(s.isBefore(n,o)&&(c=o,d=null),s.isAfter(n,r)&&(d&&(d=r),c=null);c||d;){if(c&&s.isAfter(c,r)&&(c=null),d&&s.isBefore(d,o)&&(d=null),c){if(!i(c))return c;c=s.addDays(c,1)}if(d){if(!i(d))return d;d=s.addDays(d,-1)}}return null},dm=(n,e)=>e==null||!n.isValid(e)?null:e,xt=(n,e,t)=>e==null||!n.isValid(e)?t:e,um=(n,e,t)=>!n.isValid(e)&&e!=null&&!n.isValid(t)&&t!=null?!0:n.isEqual(e,t),Ps=(n,e)=>{const r=[n.startOfYear(e)];for(;r.length<12;){const o=r[r.length-1];r.push(n.addMonths(o,1))}return r},Hc=(n,e,t)=>t==="date"?n.startOfDay(n.date(void 0,e)):n.date(void 0,e),pm=["year","month","day"],Ra=n=>pm.includes(n),As=(n,{format:e,views:t},r)=>{if(e!=null)return e;const o=n.formats;return Mr(t,["year"])?o.year:Mr(t,["month"])?o.month:Mr(t,["day"])?o.dayOfMonth:Mr(t,["month","year"])?`${o.month} ${o.year}`:Mr(t,["day","month"])?`${o.month} ${o.dayOfMonth}`:r?/en/.test(n.getCurrentLocaleCode())?o.normalDateWithWeekday:o.normalDate:o.keyboardDate},fm=(n,e)=>{const t=n.startOfWeek(e);return[0,1,2,3,4,5,6].map(r=>n.addDays(t,r))},Is=({timezone:n,value:e,defaultValue:t,onChange:r,valueManager:o})=>{const i=Ce(),s=b.useRef(t),a=e??s.current??o.emptyValue,l=b.useMemo(()=>o.getTimezone(i,a),[i,o,a]),c=le(h=>l==null?h:o.setTimezone(i,l,h)),d=n??l??"default",u=b.useMemo(()=>o.setTimezone(i,d,a),[o,i,d,a]),p=le((h,...f)=>{const m=c(h);r==null||r(m,...f)});return{value:u,handleValueChange:p,timezone:d}},Ns=({name:n,timezone:e,value:t,defaultValue:r,onChange:o,valueManager:i})=>{const[s,a]=Ln({name:n,state:"value",controlled:t,default:r??i.emptyValue}),l=le((c,...d)=>{a(c),o==null||o(c,...d)});return Is({timezone:e,value:s,defaultValue:void 0,onChange:l,valueManager:i})},At={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},hm=n=>Math.max(...n.map(e=>At[e.type]??1)),Dr=(n,e,t)=>{if(e===At.year)return n.startOfYear(t);if(e===At.month)return n.startOfMonth(t);if(e===At.day)return n.startOfDay(t);let r=t;return e<At.minutes&&(r=n.setMinutes(r,0)),e<At.seconds&&(r=n.setSeconds(r,0)),e<At.milliseconds&&(r=n.setMilliseconds(r,0)),r},mm=({props:n,utils:e,granularity:t,timezone:r,getTodayDate:o})=>{let i=o?o():Dr(e,t,Hc(e,r));n.minDate!=null&&e.isAfterDay(n.minDate,i)&&(i=Dr(e,t,n.minDate)),n.maxDate!=null&&e.isBeforeDay(n.maxDate,i)&&(i=Dr(e,t,n.maxDate));const s=im(n.disableIgnoringDatePartForTimeValidation??!1,e);return n.minTime!=null&&s(n.minTime,i)&&(i=Dr(e,t,n.disableIgnoringDatePartForTimeValidation?n.minTime:Io(e,i,n.minTime))),n.maxTime!=null&&s(i,n.maxTime)&&(i=Dr(e,t,n.disableIgnoringDatePartForTimeValidation?n.maxTime:Io(e,i,n.maxTime))),i},Wc=(n,e)=>{const t=n.formatTokenMap[e];if(t==null)throw new Error([`MUI X: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof t=="string"?{type:t,contentType:t==="meridiem"?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},gm=n=>{switch(n){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},ni=(n,e,t)=>{const r=[],o=n.date(void 0,e),i=n.startOfWeek(o),s=n.endOfWeek(o);let a=i;for(;n.isBefore(a,s);)r.push(a),a=n.addDays(a,1);return r.map(l=>n.formatByString(l,t))},Uc=(n,e,t,r)=>{switch(t){case"month":return Ps(n,n.date(void 0,e)).map(o=>n.formatByString(o,r));case"weekDay":return ni(n,e,r);case"meridiem":{const o=n.date(void 0,e);return[n.startOfDay(o),n.endOfDay(o)].map(i=>n.formatByString(i,r))}default:return[]}},Fa="s",ym=["0","1","2","3","4","5","6","7","8","9"],xm=n=>{const e=n.date(void 0);return n.formatByString(n.setSeconds(e,0),Fa)==="0"?ym:Array.from({length:10}).map((r,o)=>n.formatByString(n.setSeconds(e,o),Fa))},Vn=(n,e)=>{if(e[0]==="0")return n;const t=[];let r="";for(let o=0;o<n.length;o+=1){r+=n[o];const i=e.indexOf(r);i>-1&&(t.push(i.toString()),r="")}return t.join("")},Rs=(n,e)=>e[0]==="0"?n:n.split("").map(t=>e[Number(t)]).join(""),ja=(n,e)=>{const t=Vn(n,e);return t!==" "&&!Number.isNaN(Number(t))},qc=(n,e)=>{let t=n;for(t=Number(t).toString();t.length<e;)t=`0${t}`;return t},Yc=(n,e,t,r,o)=>{if(o.type==="day"&&o.contentType==="digit-with-letter"){const s=n.setDate(t.longestMonth,e);return n.formatByString(s,o.format)}let i=e.toString();return o.hasLeadingZerosInInput&&(i=qc(i,o.maxLength)),Rs(i,r)},vm=(n,e,t,r,o,i,s,a)=>{const l=gm(r),c=r==="Home",d=r==="End",u=t.value===""||c||d,p=()=>{const f=o[t.type]({currentDate:s,format:t.format,contentType:t.contentType}),m=k=>Yc(n,k,f,i,t),g=t.type==="minutes"&&(a!=null&&a.minutesStep)?a.minutesStep:1;let v=parseInt(Vn(t.value,i),10)+l*g;if(u){if(t.type==="year"&&!d&&!c)return n.formatByString(n.date(void 0,e),t.format);l>0||c?v=f.minimum:v=f.maximum}return v%g!==0&&((l<0||c)&&(v+=g-(g+v)%g),(l>0||d)&&(v-=v%g)),v>f.maximum?m(f.minimum+(v-f.maximum-1)%(f.maximum-f.minimum+1)):v<f.minimum?m(f.maximum-(f.minimum-v-1)%(f.maximum-f.minimum+1)):m(v)},h=()=>{const f=Uc(n,e,t.type,t.format);if(f.length===0)return t.value;if(u)return l>0||c?f[0]:f[f.length-1];const x=((f.indexOf(t.value)+l)%f.length+f.length)%f.length;return f[x]};return t.contentType==="digit"||t.contentType==="digit-with-letter"?p():h()},Fs=(n,e,t)=>{let r=n.value||n.placeholder;const o=e==="non-input"?n.hasLeadingZerosInFormat:n.hasLeadingZerosInInput;return e==="non-input"&&n.hasLeadingZerosInInput&&!n.hasLeadingZerosInFormat&&(r=Number(Vn(r,t)).toString()),["input-rtl","input-ltr"].includes(e)&&n.contentType==="digit"&&!o&&r.length===1&&(r=`${r}`),e==="input-rtl"&&(r=`${r}`),r},La=(n,e,t,r)=>n.formatByString(n.parse(e,t),r),Kc=(n,e,t)=>n.formatByString(n.date(void 0,e),t).length===4,Jc=(n,e,t,r,o)=>{if(t!=="digit")return!1;const i=n.date(void 0,e);switch(r){case"year":return Kc(n,e,o)?n.formatByString(n.setYear(i,1),o)==="0001":n.formatByString(n.setYear(i,2001),o)==="01";case"month":return n.formatByString(n.startOfYear(i),o).length>1;case"day":return n.formatByString(n.startOfMonth(i),o).length>1;case"weekDay":return n.formatByString(n.startOfWeek(i),o).length>1;case"hours":return n.formatByString(n.setHours(i,1),o).length>1;case"minutes":return n.formatByString(n.setMinutes(i,1),o).length>1;case"seconds":return n.formatByString(n.setSeconds(i,1),o).length>1;default:throw new Error("Invalid section type")}},bm=(n,e,t)=>{const r=e.some(l=>l.type==="day"),o=[],i=[];for(let l=0;l<e.length;l+=1){const c=e[l];r&&c.type==="weekDay"||(o.push(c.format),i.push(Fs(c,"non-input",t)))}const s=o.join(" "),a=i.join(" ");return n.parse(a,s)},km=n=>n.map(e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`).join(""),wm=(n,e,t)=>{const o=n.map(i=>{const s=Fs(i,t?"input-rtl":"input-ltr",e);return`${i.startSeparator}${s}${i.endSeparator}`}).join("");return t?`${o}`:o},Sm=(n,e,t)=>{const r=n.date(void 0,t),o=n.endOfYear(r),i=n.endOfDay(r),{maxDaysInMonth:s,longestMonth:a}=Ps(n,r).reduce((l,c)=>{const d=n.getDaysInMonth(c);return d>l.maxDaysInMonth?{maxDaysInMonth:d,longestMonth:c}:l},{maxDaysInMonth:0,longestMonth:null});return{year:({format:l})=>({minimum:0,maximum:Kc(n,t,l)?9999:99}),month:()=>({minimum:1,maximum:n.getMonth(o)+1}),day:({currentDate:l})=>({minimum:1,maximum:l!=null&&n.isValid(l)?n.getDaysInMonth(l):s,longestMonth:a}),weekDay:({format:l,contentType:c})=>{if(c==="digit"){const d=ni(n,t,l).map(Number);return{minimum:Math.min(...d),maximum:Math.max(...d)}}return{minimum:1,maximum:7}},hours:({format:l})=>{const c=n.getHours(i);return Vn(n.formatByString(n.endOfDay(r),l),e)!==c.toString()?{minimum:1,maximum:Number(Vn(n.formatByString(n.startOfDay(r),l),e))}:{minimum:0,maximum:c}},minutes:()=>({minimum:0,maximum:n.getMinutes(i)}),seconds:()=>({minimum:0,maximum:n.getSeconds(i)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},Cm=(n,e,t,r,o)=>{switch(t.type){case"year":return n.setYear(o,n.getYear(r));case"month":return n.setMonth(o,n.getMonth(r));case"weekDay":{const i=ni(n,e,t.format),s=n.formatByString(r,t.format),a=i.indexOf(s),c=i.indexOf(t.value)-a;return n.addDays(r,c)}case"day":return n.setDate(o,n.getDate(r));case"meridiem":{const i=n.getHours(r)<12,s=n.getHours(o);return i&&s>=12?n.addHours(o,-12):!i&&s<12?n.addHours(o,12):o}case"hours":return n.setHours(o,n.getHours(r));case"minutes":return n.setMinutes(o,n.getMinutes(r));case"seconds":return n.setSeconds(o,n.getSeconds(r));default:return o}},Va={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},$a=(n,e,t,r,o,i)=>[...r].sort((s,a)=>Va[s.type]-Va[a.type]).reduce((s,a)=>!i||a.modified?Cm(n,e,a,t,s):s,o),Mm=()=>navigator.userAgent.toLowerCase().includes("android"),Dm=(n,e)=>{const t={};if(!e)return n.forEach((l,c)=>{const d=c===0?null:c-1,u=c===n.length-1?null:c+1;t[c]={leftIndex:d,rightIndex:u}}),{neighbors:t,startIndex:0,endIndex:n.length-1};const r={},o={};let i=0,s=0,a=n.length-1;for(;a>=0;){s=n.findIndex((l,c)=>{var d;return c>=i&&((d=l.endSeparator)==null?void 0:d.includes(" "))&&l.endSeparator!==" / "}),s===-1&&(s=n.length-1);for(let l=s;l>=i;l-=1)o[l]=a,r[a]=l,a-=1;i=s+1}return n.forEach((l,c)=>{const d=o[c],u=d===0?null:r[d-1],p=d===n.length-1?null:r[d+1];t[c]={leftIndex:u,rightIndex:p}}),{neighbors:t,startIndex:r[0],endIndex:r[n.length-1]}},is=(n,e)=>n==null?null:n==="all"?"all":typeof n=="string"?e.findIndex(t=>t.type===n):n,Tm=(n,e)=>{if(n.value)switch(n.type){case"month":{if(n.contentType==="digit")return e.format(e.setMonth(e.date(),Number(n.value)-1),"month");const t=e.parse(n.value,n.format);return t?e.format(t,"month"):void 0}case"day":return n.contentType==="digit"?e.format(e.setDate(e.startOfYear(e.date()),Number(n.value)),"dayOfMonthFull"):n.value;case"weekDay":return;default:return}},Om=(n,e)=>{if(n.value)switch(n.type){case"weekDay":return n.contentType==="letter"?void 0:Number(n.value);case"meridiem":{const t=e.parse(`01:00 ${n.value}`,`${e.formats.hours12h}:${e.formats.minutes} ${n.format}`);return t?e.getHours(t)>=12?1:0:void 0}case"day":return n.contentType==="digit-with-letter"?parseInt(n.value,10):Number(n.value);case"month":{if(n.contentType==="digit")return Number(n.value);const t=e.parse(n.value,n.format);return t?e.getMonth(t)+1:void 0}default:return n.contentType!=="letter"?Number(n.value):void 0}},Em=["value","referenceDate"],Nt={emptyValue:null,getTodayValue:Hc,getInitialReferenceValue:n=>{let{value:e,referenceDate:t}=n,r=me(n,Em);return e!=null&&r.utils.isValid(e)?e:t??mm(r)},cleanValue:dm,areValuesEqual:um,isSameError:(n,e)=>n===e,hasError:n=>n!=null,defaultErrorState:null,getTimezone:(n,e)=>e==null||!n.isValid(e)?null:n.getTimezone(e),setTimezone:(n,e,t)=>t==null?null:n.setTimezone(t,e)},Pm={updateReferenceValue:(n,e,t)=>e==null||!n.isValid(e)?t:e,getSectionsFromValue:(n,e,t,r)=>!n.isValid(e)&&!!t?t:r(e),getV7HiddenInputValueFromSections:km,getV6InputValueFromSections:wm,getActiveDateManager:(n,e)=>({date:e.value,referenceDate:e.referenceValue,getSections:t=>t,getNewValuesFromNewActiveDate:t=>({value:t,referenceValue:t==null||!n.isValid(t)?e.referenceValue:t})}),parseValueStr:(n,e,t)=>t(n.trim(),e)};function Am(n){return Ie("MuiPickersDay",n)}const kn=Ne("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),Im=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],Nm=n=>{const{selected:e,disableMargin:t,disableHighlightToday:r,today:o,disabled:i,outsideCurrentMonth:s,showDaysOutsideCurrentMonth:a,classes:l}=n,c=s&&!a;return Ae({root:["root",e&&!c&&"selected",i&&"disabled",!t&&"dayWithMargin",!r&&o&&"today",s&&a&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},Am,l)},Gc=({theme:n})=>C({},n.typography.caption,{width:Br,height:Br,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:n.transitions.create("background-color",{duration:n.transitions.duration.short}),color:(n.vars||n).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:We(n.palette.primary.main,n.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.focusOpacity})`:We(n.palette.primary.main,n.palette.action.focusOpacity),[`&.${kn.selected}`]:{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${kn.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,fontWeight:n.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(n.vars||n).palette.primary.dark}},[`&.${kn.disabled}:not(.${kn.selected})`]:{color:(n.vars||n).palette.text.disabled},[`&.${kn.disabled}&.${kn.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${ei}px`}},{props:{outsideCurrentMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(n.vars||n).palette.text.secondary}},{props:{disableHighlightToday:!1,today:!0},style:{[`&:not(.${kn.selected})`]:{border:`1px solid ${(n.vars||n).palette.text.secondary}`}}}]}),Zc=(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disableMargin&&e.dayWithMargin,!t.disableHighlightToday&&t.today&&e.today,!t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,t.outsideCurrentMonth&&!t.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},Rm=ce(Sc,{name:"MuiPickersDay",slot:"Root",overridesResolver:Zc})(Gc),Fm=ce("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Zc})(({theme:n})=>C({},Gc({theme:n}),{opacity:0,pointerEvents:"none"})),Tr=()=>{},jm=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersDay"}),{autoFocus:o=!1,className:i,day:s,disabled:a=!1,disableHighlightToday:l=!1,disableMargin:c=!1,isAnimating:d,onClick:u,onDaySelect:p,onFocus:h=Tr,onBlur:f=Tr,onKeyDown:m=Tr,onMouseDown:g=Tr,onMouseEnter:x=Tr,outsideCurrentMonth:v,selected:k=!1,showDaysOutsideCurrentMonth:w=!1,children:D,today:E=!1}=r,P=me(r,Im),M=C({},r,{autoFocus:o,disabled:a,disableHighlightToday:l,disableMargin:c,selected:k,showDaysOutsideCurrentMonth:w,today:E}),R=Nm(M),F=Ce(),N=b.useRef(null),V=ct(N,t);zt(()=>{o&&!a&&!d&&!v&&N.current.focus()},[o,a,d,v]);const $=S=>{g(S),v&&S.preventDefault()},T=S=>{a||p(s),v&&S.currentTarget.focus(),u&&u(S)};return v&&!w?y.jsx(Fm,{className:Pe(R.root,R.hiddenDaySpacingFiller,i),ownerState:M,role:P.role}):y.jsx(Rm,C({className:Pe(R.root,i),ref:V,centerRipple:!0,disabled:a,tabIndex:k?0:-1,onKeyDown:S=>m(S,s),onFocus:S=>h(S,s),onBlur:S=>f(S,s),onMouseEnter:S=>x(S,s),onClick:T,onMouseDown:$},P,{ownerState:M,children:D||F.format(s,"dayOfMonth")}))}),Lm=b.memo(jm),Xr=({props:n,value:e,timezone:t,adapter:r})=>{if(e===null)return null;const{shouldDisableDate:o,shouldDisableMonth:i,shouldDisableYear:s,disablePast:a,disableFuture:l}=n,c=r.utils.date(void 0,t),d=xt(r.utils,n.minDate,r.defaultDates.minDate),u=xt(r.utils,n.maxDate,r.defaultDates.maxDate);switch(!0){case!r.utils.isValid(e):return"invalidDate";case!!(o&&o(e)):return"shouldDisableDate";case!!(i&&i(e)):return"shouldDisableMonth";case!!(s&&s(e)):return"shouldDisableYear";case!!(l&&r.utils.isAfterDay(e,c)):return"disableFuture";case!!(a&&r.utils.isBeforeDay(e,c)):return"disablePast";case!!(d&&r.utils.isBeforeDay(e,d)):return"minDate";case!!(u&&r.utils.isAfterDay(e,u)):return"maxDate";default:return null}};Xr.valueManager=Nt;const Xc=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],Vm=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],$m=["minDateTime","maxDateTime"],Bm=[...Xc,...Vm,...$m],Qc=n=>Bm.reduce((e,t)=>(n.hasOwnProperty(t)&&(e[t]=n[t]),e),{});function ed(n){const{props:e,validator:t,value:r,timezone:o,onError:i}=n,s=Hn(),a=b.useRef(t.valueManager.defaultErrorState),l=t({adapter:s,value:r,timezone:o,props:e}),c=t.valueManager.hasError(l);b.useEffect(()=>{i&&!t.valueManager.isSameError(l,a.current)&&i(l,r),a.current=l},[t,i,l,r]);const d=le(u=>t({adapter:s,value:u,timezone:o,props:e}));return{validationError:l,hasValidationError:c,getValidationErrorForNewValue:d}}const zm=({utils:n,format:e})=>{let t=10,r=e,o=n.expandFormat(e);for(;o!==r;)if(r=o,o=n.expandFormat(r),t-=1,t<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the picker component.");return o},_m=({utils:n,expandedFormat:e})=>{const t=[],{start:r,end:o}=n.escapedCharacters,i=new RegExp(`(\\${r}[^\\${o}]*\\${o})+`,"g");let s=null;for(;s=i.exec(e);)t.push({start:s.index,end:i.lastIndex-1});return t},Hm=(n,e,t,r,o)=>{switch(r.type){case"year":return t.fieldYearPlaceholder({digitAmount:n.formatByString(n.date(void 0,e),o).length,format:o});case"month":return t.fieldMonthPlaceholder({contentType:r.contentType,format:o});case"day":return t.fieldDayPlaceholder({format:o});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:r.contentType,format:o});case"hours":return t.fieldHoursPlaceholder({format:o});case"minutes":return t.fieldMinutesPlaceholder({format:o});case"seconds":return t.fieldSecondsPlaceholder({format:o});case"meridiem":return t.fieldMeridiemPlaceholder({format:o});default:return o}},Wm=({utils:n,timezone:e,date:t,shouldRespectLeadingZeros:r,localeText:o,localizedDigits:i,now:s,token:a,startSeparator:l})=>{if(a==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const c=Wc(n,a),d=Jc(n,e,c.contentType,c.type,a),u=r?d:c.contentType==="digit",p=t!=null&&n.isValid(t);let h=p?n.formatByString(t,a):"",f=null;if(u)if(d)f=h===""?n.formatByString(s,a).length:h.length;else{if(c.maxLength==null)throw new Error(`MUI X: The token ${a} should have a 'maxDigitNumber' property on it's adapter`);f=c.maxLength,p&&(h=Rs(qc(Vn(h,i),f),i))}return C({},c,{format:a,maxLength:f,value:h,placeholder:Hm(n,e,o,c,a),hasLeadingZerosInFormat:d,hasLeadingZerosInInput:u,startSeparator:l,endSeparator:"",modified:!1})},Um=n=>{var h;const{utils:e,expandedFormat:t,escapedParts:r}=n,o=e.date(void 0),i=[];let s="";const a=Object.keys(e.formatTokenMap).sort((f,m)=>m.length-f.length),l=/^([a-zA-Z]+)/,c=new RegExp(`^(${a.join("|")})*$`),d=new RegExp(`^(${a.join("|")})`),u=f=>r.find(m=>m.start<=f&&m.end>=f);let p=0;for(;p<t.length;){const f=u(p),m=f!=null,g=(h=l.exec(t.slice(p)))==null?void 0:h[1];if(!m&&g!=null&&c.test(g)){let x=g;for(;x.length>0;){const v=d.exec(x)[1];x=x.slice(v.length),i.push(Wm(C({},n,{now:o,token:v,startSeparator:s}))),s=""}p+=g.length}else{const x=t[p];m&&(f==null?void 0:f.start)===p||(f==null?void 0:f.end)===p||(i.length===0?s+=x:i[i.length-1].endSeparator+=x),p+=1}}return i.length===0&&s.length>0&&i.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:s,endSeparator:"",modified:!1}),i},qm=({isRtl:n,formatDensity:e,sections:t})=>t.map(r=>{const o=i=>{let s=i;return n&&s!==null&&s.includes(" ")&&(s=`${s}`),e==="spacious"&&["/",".","-"].includes(s)&&(s=` ${s} `),s};return r.startSeparator=o(r.startSeparator),r.endSeparator=o(r.endSeparator),r}),Ba=n=>{let e=zm(n);n.isRtl&&n.enableAccessibleFieldDOMStructure&&(e=e.split(" ").reverse().join(" "));const t=_m(C({},n,{expandedFormat:e})),r=Um(C({},n,{expandedFormat:e,escapedParts:t}));return qm(C({},n,{sections:r}))},Ym=n=>{const e=Ce(),t=Ht(),r=Hn(),o=_t(),{valueManager:i,fieldValueManager:s,valueType:a,validator:l,internalProps:c,internalProps:{value:d,defaultValue:u,referenceDate:p,onChange:h,format:f,formatDensity:m="dense",selectedSections:g,onSelectedSectionsChange:x,shouldRespectLeadingZeros:v=!1,timezone:k,enableAccessibleFieldDOMStructure:w=!1}}=n,{timezone:D,value:E,handleValueChange:P}=Is({timezone:k,value:d,defaultValue:u,onChange:h,valueManager:i}),M=b.useMemo(()=>xm(e),[e]),R=b.useMemo(()=>Sm(e,M,D),[e,M,D]),F=b.useCallback((z,Q=null)=>s.getSectionsFromValue(e,z,Q,Z=>Ba({utils:e,timezone:D,localeText:t,localizedDigits:M,format:f,date:Z,formatDensity:m,shouldRespectLeadingZeros:v,enableAccessibleFieldDOMStructure:w,isRtl:o})),[s,f,t,M,o,v,e,m,D,w]),[N,V]=b.useState(()=>{const z=F(E),Q={sections:z,value:E,referenceValue:i.emptyValue,tempValueStrAndroid:null},Z=hm(z),H=i.getInitialReferenceValue({referenceDate:p,value:E,utils:e,props:c,granularity:Z,timezone:D});return C({},Q,{referenceValue:H})}),[$,T]=Ln({controlled:g,default:null,name:"useField",state:"selectedSections"}),S=z=>{T(z),x==null||x(z)},O=b.useMemo(()=>is($,N.sections),[$,N.sections]),B=O==="all"?0:O,L=({value:z,referenceValue:Q,sections:Z})=>{if(V(ne=>C({},ne,{sections:Z,value:z,referenceValue:Q,tempValueStrAndroid:null})),i.areValuesEqual(e,N.value,z))return;const H={validationError:l({adapter:r,value:z,timezone:D,props:c})};P(z,H)},_=(z,Q)=>{const Z=[...N.sections];return Z[z]=C({},Z[z],{value:Q,modified:!0}),Z},U=()=>{L({value:i.emptyValue,referenceValue:N.referenceValue,sections:F(i.emptyValue)})},J=()=>{if(B==null)return;const z=N.sections[B],Q=s.getActiveDateManager(e,N,z),H=Q.getSections(N.sections).filter(j=>j.value!=="").length===(z.value===""?0:1),ne=_(B,""),se=H?null:e.getInvalidDate(),te=Q.getNewValuesFromNewActiveDate(se);L(C({},te,{sections:ne}))},G=z=>{const Q=(ne,se)=>{const te=e.parse(ne,f);if(te==null||!e.isValid(te))return null;const j=Ba({utils:e,timezone:D,localeText:t,localizedDigits:M,format:f,date:te,formatDensity:m,shouldRespectLeadingZeros:v,enableAccessibleFieldDOMStructure:w,isRtl:o});return $a(e,D,te,j,se,!1)},Z=s.parseValueStr(z,N.referenceValue,Q),H=s.updateReferenceValue(e,Z,N.referenceValue);L({value:Z,referenceValue:H,sections:F(Z,N.sections)})},de=({activeSection:z,newSectionValue:Q,shouldGoToNextSection:Z})=>{Z&&B<N.sections.length-1&&S(B+1);const H=s.getActiveDateManager(e,N,z),ne=_(B,Q),se=H.getSections(ne),te=bm(e,se,M);let j,A;if(te!=null&&e.isValid(te)){const Y=$a(e,D,te,se,H.referenceDate,!0);j=H.getNewValuesFromNewActiveDate(Y),A=!0}else j=H.getNewValuesFromNewActiveDate(te),A=(te!=null&&!e.isValid(te))!=(H.date!=null&&!e.isValid(H.date));return A?L(C({},j,{sections:ne})):V(Y=>C({},Y,j,{sections:ne,tempValueStrAndroid:null}))},K=z=>V(Q=>C({},Q,{tempValueStrAndroid:z}));return b.useEffect(()=>{const z=F(N.value);V(Q=>C({},Q,{sections:z}))},[f,e.locale,o]),b.useEffect(()=>{let z;i.areValuesEqual(e,N.value,E)?z=i.getTimezone(e,N.value)!==i.getTimezone(e,E):z=!0,z&&V(Q=>C({},Q,{value:E,referenceValue:s.updateReferenceValue(e,E,Q.referenceValue),sections:F(E)}))},[E]),{state:N,activeSectionIndex:B,parsedSelectedSections:O,setSelectedSections:S,clearValue:U,clearActiveSection:J,updateSectionValue:de,updateValueFromValueStr:G,setTempAndroidValueStr:K,getSectionsFromValue:F,sectionsValueBoundaries:R,localizedDigits:M,timezone:D}},Km=5e3,Yn=n=>n.saveQuery!=null,Jm=({sections:n,updateSectionValue:e,sectionsValueBoundaries:t,localizedDigits:r,setTempAndroidValueStr:o,timezone:i})=>{const s=Ce(),[a,l]=b.useState(null),c=le(()=>l(null));b.useEffect(()=>{var f;a!=null&&((f=n[a.sectionIndex])==null?void 0:f.type)!==a.sectionType&&c()},[n,a,c]),b.useEffect(()=>{if(a!=null){const f=setTimeout(()=>c(),Km);return()=>{clearTimeout(f)}}return()=>{}},[a,c]);const d=({keyPressed:f,sectionIndex:m},g,x)=>{const v=f.toLowerCase(),k=n[m];if(a!=null&&(!x||x(a.value))&&a.sectionIndex===m){const D=`${a.value}${v}`,E=g(D,k);if(!Yn(E))return l({sectionIndex:m,value:D,sectionType:k.type}),E}const w=g(v,k);return Yn(w)&&!w.saveQuery?(c(),null):(l({sectionIndex:m,value:v,sectionType:k.type}),Yn(w)?null:w)},u=f=>{const m=(v,k,w)=>{const D=k.filter(E=>E.toLowerCase().startsWith(w));return D.length===0?{saveQuery:!1}:{sectionValue:D[0],shouldGoToNextSection:D.length===1}},g=(v,k,w,D)=>{const E=P=>Uc(s,i,k.type,P);if(k.contentType==="letter")return m(k.format,E(k.format),v);if(w&&D!=null&&Wc(s,w).contentType==="letter"){const P=E(w),M=m(w,P,v);return Yn(M)?{saveQuery:!1}:C({},M,{sectionValue:D(M.sectionValue,P)})}return{saveQuery:!1}};return d(f,(v,k)=>{switch(k.type){case"month":{const w=D=>La(s,D,s.formats.month,k.format);return g(v,k,s.formats.month,w)}case"weekDay":{const w=(D,E)=>E.indexOf(D).toString();return g(v,k,s.formats.weekday,w)}case"meridiem":return g(v,k);default:return{saveQuery:!1}}})},p=f=>{const m=(x,v)=>{const k=Vn(x,r),w=Number(k),D=t[v.type]({currentDate:null,format:v.format,contentType:v.contentType});if(w>D.maximum)return{saveQuery:!1};if(w<D.minimum)return{saveQuery:!0};const E=w*10>D.maximum||k.length===D.maximum.toString().length;return{sectionValue:Yc(s,w,D,r,v),shouldGoToNextSection:E}};return d(f,(x,v)=>{if(v.contentType==="digit"||v.contentType==="digit-with-letter")return m(x,v);if(v.type==="month"){const k=Jc(s,i,"digit","month","MM"),w=m(x,{type:v.type,format:"MM",hasLeadingZerosInFormat:k,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Yn(w))return w;const D=La(s,w.sectionValue,"MM",v.format);return C({},w,{sectionValue:D})}if(v.type==="weekDay"){const k=m(x,v);if(Yn(k))return k;const w=ni(s,i,v.format)[Number(k.sectionValue)-1];return C({},k,{sectionValue:w})}return{saveQuery:!1}},x=>ja(x,r))};return{applyCharacterEditing:le(f=>{const m=n[f.sectionIndex],x=ja(f.keyPressed,r)?p(C({},f,{keyPressed:Rs(f.keyPressed,r)})):u(f);if(x==null){o(null);return}e({activeSection:m,newSectionValue:x.sectionValue,shouldGoToNextSection:x.shouldGoToNextSection})}),resetCharacterQuery:c}};function Gm(n,e){return Array.isArray(e)?e.every(t=>n.indexOf(t)!==-1):n.indexOf(e)!==-1}const Zm=(n,e)=>t=>{(t.key==="Enter"||t.key===" ")&&(n(t),t.preventDefault(),t.stopPropagation())},at=(n=document)=>{const e=n.activeElement;return e?e.shadowRoot?at(e.shadowRoot):e:null},Xm="@media (pointer: fine)",Qm=n=>{const{internalProps:{disabled:e,readOnly:t=!1},forwardedProps:{sectionListRef:r,onBlur:o,onClick:i,onFocus:s,onInput:a,onPaste:l,focused:c,autoFocus:d=!1},fieldValueManager:u,applyCharacterEditing:p,resetCharacterQuery:h,setSelectedSections:f,parsedSelectedSections:m,state:g,clearActiveSection:x,clearValue:v,updateSectionValue:k,updateValueFromValueStr:w,sectionOrder:D,areAllSectionsEmpty:E,sectionsValueBoundaries:P}=n,M=b.useRef(null),R=ct(r,M),F=Ht(),N=Ce(),V=Gr(),[$,T]=b.useState(!1),S=b.useMemo(()=>({syncSelectionToDOM:()=>{if(!M.current)return;const A=document.getSelection();if(!A)return;if(m==null){A.rangeCount>0&&M.current.getRoot().contains(A.getRangeAt(0).startContainer)&&A.removeAllRanges(),$&&M.current.getRoot().blur();return}if(!M.current.getRoot().contains(at(document)))return;const Y=new window.Range;let q;m==="all"?q=M.current.getRoot():g.sections[m].type==="empty"?q=M.current.getSectionContainer(m):q=M.current.getSectionContent(m),Y.selectNodeContents(q),q.focus(),A.removeAllRanges(),A.addRange(Y)},getActiveSectionIndexFromDOM:()=>{const A=at(document);return!A||!M.current||!M.current.getRoot().contains(A)?null:M.current.getSectionIndexFromDOMElement(A)},focusField:(A=0)=>{if(!M.current)return;const Y=is(A,g.sections);T(!0),M.current.getSectionContent(Y).focus()},setSelectedSections:A=>{if(!M.current)return;const Y=is(A,g.sections);T((Y==="all"?0:Y)!==null),f(A)},isFieldFocused:()=>{const A=at(document);return!!M.current&&M.current.getRoot().contains(A)}}),[m,f,g.sections,$]),O=le(A=>{if(!M.current)return;const Y=g.sections[A];M.current.getSectionContent(A).innerHTML=Y.value||Y.placeholder,S.syncSelectionToDOM()}),B=le((A,...Y)=>{A.isDefaultPrevented()||!M.current||(T(!0),i==null||i(A,...Y),m==="all"?setTimeout(()=>{const q=document.getSelection().getRangeAt(0).startOffset;if(q===0){f(D.startIndex);return}let X=0,oe=0;for(;oe<q&&X<g.sections.length;){const ee=g.sections[X];X+=1,oe+=`${ee.startSeparator}${ee.value||ee.placeholder}${ee.endSeparator}`.length}f(X-1)}):$?M.current.getRoot().contains(A.target)||f(D.startIndex):(T(!0),f(D.startIndex)))}),L=le(A=>{if(a==null||a(A),!M.current||m!=="all")return;const q=A.target.textContent??"";M.current.getRoot().innerHTML=g.sections.map(X=>`${X.startSeparator}${X.value||X.placeholder}${X.endSeparator}`).join(""),S.syncSelectionToDOM(),q.length===0||q.charCodeAt(0)===10?(h(),v(),f("all")):q.length>1?w(q):p({keyPressed:q,sectionIndex:0})}),_=le(A=>{if(l==null||l(A),t||m!=="all"){A.preventDefault();return}const Y=A.clipboardData.getData("text");A.preventDefault(),h(),w(Y)}),U=le((...A)=>{if(s==null||s(...A),$||!M.current)return;T(!0),M.current.getSectionIndexFromDOMElement(at(document))!=null||f(D.startIndex)}),J=le((...A)=>{o==null||o(...A),setTimeout(()=>{if(!M.current)return;const Y=at(document);!M.current.getRoot().contains(Y)&&(T(!1),f(null))})}),G=le(A=>Y=>{Y.isDefaultPrevented()||f(A)}),de=le(A=>{A.preventDefault()}),K=le(A=>()=>{f(A)}),z=le(A=>{if(A.preventDefault(),t||e||typeof m!="number")return;const Y=g.sections[m],q=A.clipboardData.getData("text"),X=/^[a-zA-Z]+$/.test(q),oe=/^[0-9]+$/.test(q),ee=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(q);Y.contentType==="letter"&&X||Y.contentType==="digit"&&oe||Y.contentType==="digit-with-letter"&&ee?(h(),k({activeSection:Y,newSectionValue:q,shouldGoToNextSection:!0})):!X&&!oe&&(h(),w(q))}),Q=le(A=>{A.preventDefault(),A.dataTransfer.dropEffect="none"}),Z=le(A=>{if(!M.current)return;const Y=A.target,q=Y.textContent??"",X=M.current.getSectionIndexFromDOMElement(Y),oe=g.sections[X];if(t||!M.current){O(X);return}if(q.length===0){if(oe.value===""){O(X);return}const ee=A.nativeEvent.inputType;if(ee==="insertParagraph"||ee==="insertLineBreak"){O(X);return}h(),x();return}p({keyPressed:q,sectionIndex:X}),O(X)});zt(()=>{if(!(!$||!M.current)){if(m==="all")M.current.getRoot().focus();else if(typeof m=="number"){const A=M.current.getSectionContent(m);A&&A.focus()}}},[m,$]);const H=b.useMemo(()=>g.sections.reduce((A,Y)=>(A[Y.type]=P[Y.type]({currentDate:null,contentType:Y.contentType,format:Y.format}),A),{}),[P,g.sections]),ne=m==="all",se=b.useMemo(()=>g.sections.map((A,Y)=>{const q=!ne&&!e&&!t;return{container:{"data-sectionindex":Y,onClick:G(Y)},content:{tabIndex:ne||Y>0?-1:0,contentEditable:!ne&&!e&&!t,role:"spinbutton",id:`${V}-${A.type}`,"aria-labelledby":`${V}-${A.type}`,"aria-readonly":t,"aria-valuenow":Om(A,N),"aria-valuemin":H[A.type].minimum,"aria-valuemax":H[A.type].maximum,"aria-valuetext":A.value?Tm(A,N):F.empty,"aria-label":F[A.type],"aria-disabled":e,spellCheck:q?!1:void 0,autoCapitalize:q?"off":void 0,autoCorrect:q?"off":void 0,[parseInt(b.version,10)>=17?"enterKeyHint":"enterkeyhint"]:q?"next":void 0,children:A.value||A.placeholder,onInput:Z,onPaste:z,onFocus:K(Y),onDragOver:Q,onMouseUp:de,inputMode:A.contentType==="letter"?"text":"numeric"},before:{children:A.startSeparator},after:{children:A.endSeparator}}}),[g.sections,K,z,Q,Z,G,de,e,t,ne,F,N,H,V]),te=le(A=>{w(A.target.value)}),j=b.useMemo(()=>E?"":u.getV7HiddenInputValueFromSections(g.sections),[E,g.sections,u]);return b.useEffect(()=>{if(M.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please remove the `enableAccessibleFieldDOMStructure` prop from your picker or field component:","","<DatePicker slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));d&&M.current&&M.current.getSectionContent(D.startIndex).focus()},[]),{interactions:S,returnedValue:{autoFocus:d,readOnly:t,focused:c??$,sectionListRef:R,onBlur:J,onClick:B,onFocus:U,onInput:L,onPaste:_,enableAccessibleFieldDOMStructure:!0,elements:se,tabIndex:m===0?-1:0,contentEditable:ne,value:j,onChange:te,areAllSectionsEmpty:E}}},tr=n=>n.replace(/[\u2066\u2067\u2068\u2069]/g,""),eg=(n,e,t)=>{let r=0,o=t?1:0;const i=[];for(let s=0;s<n.length;s+=1){const a=n[s],l=Fs(a,t?"input-rtl":"input-ltr",e),c=`${a.startSeparator}${l}${a.endSeparator}`,d=tr(c).length,u=c.length,p=tr(l),h=o+(p===""?0:l.indexOf(p[0]))+a.startSeparator.length,f=h+p.length;i.push(C({},a,{start:r,end:r+d,startInInput:h,endInInput:f})),r+=d,o+=u}return i},tg=n=>{const e=_t(),t=b.useRef(),r=b.useRef(),{forwardedProps:{onFocus:o,onClick:i,onPaste:s,onBlur:a,inputRef:l,placeholder:c},internalProps:{readOnly:d=!1,disabled:u=!1},parsedSelectedSections:p,activeSectionIndex:h,state:f,fieldValueManager:m,valueManager:g,applyCharacterEditing:x,resetCharacterQuery:v,updateSectionValue:k,updateValueFromValueStr:w,clearActiveSection:D,clearValue:E,setTempAndroidValueStr:P,setSelectedSections:M,getSectionsFromValue:R,areAllSectionsEmpty:F,localizedDigits:N}=n,V=b.useRef(null),$=ct(l,V),T=b.useMemo(()=>eg(f.sections,N,e),[f.sections,N,e]),S=b.useMemo(()=>({syncSelectionToDOM:()=>{if(!V.current)return;if(p==null){V.current.scrollLeft&&(V.current.scrollLeft=0);return}if(V.current!==at(document))return;const Z=V.current.scrollTop;if(p==="all")V.current.select();else{const H=T[p],ne=H.type==="empty"?H.startInInput-H.startSeparator.length:H.startInInput,se=H.type==="empty"?H.endInInput+H.endSeparator.length:H.endInInput;(ne!==V.current.selectionStart||se!==V.current.selectionEnd)&&V.current===at(document)&&V.current.setSelectionRange(ne,se),clearTimeout(r.current),r.current=setTimeout(()=>{V.current&&V.current===at(document)&&V.current.selectionStart===V.current.selectionEnd&&(V.current.selectionStart!==ne||V.current.selectionEnd!==se)&&S.syncSelectionToDOM()})}V.current.scrollTop=Z},getActiveSectionIndexFromDOM:()=>{const Z=V.current.selectionStart??0,H=V.current.selectionEnd??0;if(Z===0&&H===0)return null;const ne=Z<=T[0].startInInput?1:T.findIndex(se=>se.startInInput-se.startSeparator.length>Z);return ne===-1?T.length-1:ne-1},focusField:(Z=0)=>{var H;(H=V.current)==null||H.focus(),M(Z)},setSelectedSections:Z=>M(Z),isFieldFocused:()=>V.current===at(document)}),[V,p,T,M]),O=()=>{const Z=V.current.selectionStart??0;let H;Z<=T[0].startInInput||Z>=T[T.length-1].endInInput?H=1:H=T.findIndex(se=>se.startInInput-se.startSeparator.length>Z);const ne=H===-1?T.length-1:H-1;M(ne)},B=le((...Z)=>{o==null||o(...Z);const H=V.current;clearTimeout(t.current),t.current=setTimeout(()=>{!H||H!==V.current||h==null&&(H.value.length&&Number(H.selectionEnd)-Number(H.selectionStart)===H.value.length?M("all"):O())})}),L=le((Z,...H)=>{Z.isDefaultPrevented()||(i==null||i(Z,...H),O())}),_=le(Z=>{if(s==null||s(Z),Z.preventDefault(),d||u)return;const H=Z.clipboardData.getData("text");if(typeof p=="number"){const ne=f.sections[p],se=/^[a-zA-Z]+$/.test(H),te=/^[0-9]+$/.test(H),j=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(H);if(ne.contentType==="letter"&&se||ne.contentType==="digit"&&te||ne.contentType==="digit-with-letter"&&j){v(),k({activeSection:ne,newSectionValue:H,shouldGoToNextSection:!0});return}if(se||te)return}v(),w(H)}),U=le((...Z)=>{a==null||a(...Z),M(null)}),J=le(Z=>{if(d)return;const H=Z.target.value;if(H===""){v(),E();return}const ne=Z.nativeEvent.data,se=ne&&ne.length>1,te=se?ne:H,j=tr(te);if(h==null||se){w(se?ne:j);return}let A;if(p==="all"&&j.length===1)A=j;else{const Y=tr(m.getV6InputValueFromSections(T,N,e));let q=-1,X=-1;for(let ve=0;ve<Y.length;ve+=1)q===-1&&Y[ve]!==j[ve]&&(q=ve),X===-1&&Y[Y.length-ve-1]!==j[j.length-ve-1]&&(X=ve);const oe=T[h];if(q<oe.start||Y.length-X-1>oe.end)return;const fe=j.length-Y.length+oe.end-tr(oe.endSeparator||"").length;A=j.slice(oe.start+tr(oe.startSeparator||"").length,fe)}if(A.length===0){Mm()&&P(te),v(),D();return}x({keyPressed:A,sectionIndex:h})}),G=b.useMemo(()=>c!==void 0?c:m.getV6InputValueFromSections(R(g.emptyValue),N,e),[c,m,R,g.emptyValue,N,e]),de=b.useMemo(()=>f.tempValueStrAndroid??m.getV6InputValueFromSections(f.sections,N,e),[f.sections,m,f.tempValueStrAndroid,N,e]);b.useEffect(()=>(V.current&&V.current===at(document)&&M("all"),()=>{clearTimeout(t.current),clearTimeout(r.current)}),[]);const K=b.useMemo(()=>h==null||f.sections[h].contentType==="letter"?"text":"numeric",[h,f.sections]),Q=!(V.current&&V.current===at(document))&&F;return{interactions:S,returnedValue:{readOnly:d,onBlur:U,onClick:L,onFocus:B,onPaste:_,inputRef:$,enableAccessibleFieldDOMStructure:!1,placeholder:G,inputMode:K,autoComplete:"off",value:Q?"":de,onChange:J}}},ng=n=>{const e=Ce(),{internalProps:t,internalProps:{unstableFieldRef:r,minutesStep:o,enableAccessibleFieldDOMStructure:i=!1,disabled:s=!1,readOnly:a=!1},forwardedProps:{onKeyDown:l,error:c,clearable:d,onClear:u},fieldValueManager:p,valueManager:h,validator:f}=n,m=_t(),g=Ym(n),{state:x,activeSectionIndex:v,parsedSelectedSections:k,setSelectedSections:w,clearValue:D,clearActiveSection:E,updateSectionValue:P,setTempAndroidValueStr:M,sectionsValueBoundaries:R,localizedDigits:F,timezone:N}=g,V=Jm({sections:x.sections,updateSectionValue:P,sectionsValueBoundaries:R,localizedDigits:F,setTempAndroidValueStr:M,timezone:N}),{resetCharacterQuery:$}=V,T=h.areValuesEqual(e,x.value,h.emptyValue),S=i?Qm:tg,O=b.useMemo(()=>Dm(x.sections,m&&!i),[x.sections,m,i]),{returnedValue:B,interactions:L}=S(C({},n,g,V,{areAllSectionsEmpty:T,sectionOrder:O})),_=le(z=>{if(l==null||l(z),!s)switch(!0){case((z.ctrlKey||z.metaKey)&&z.key.toLowerCase()==="a"&&!z.shiftKey&&!z.altKey):{z.preventDefault(),w("all");break}case z.key==="ArrowRight":{if(z.preventDefault(),k==null)w(O.startIndex);else if(k==="all")w(O.endIndex);else{const Q=O.neighbors[k].rightIndex;Q!==null&&w(Q)}break}case z.key==="ArrowLeft":{if(z.preventDefault(),k==null)w(O.endIndex);else if(k==="all")w(O.startIndex);else{const Q=O.neighbors[k].leftIndex;Q!==null&&w(Q)}break}case z.key==="Delete":{if(z.preventDefault(),a)break;k==null||k==="all"?D():E(),$();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(z.key):{if(z.preventDefault(),a||v==null)break;const Q=x.sections[v],Z=p.getActiveDateManager(e,x,Q),H=vm(e,N,Q,z.key,R,F,Z.date,{minutesStep:o});P({activeSection:Q,newSectionValue:H,shouldGoToNextSection:!1});break}}});zt(()=>{L.syncSelectionToDOM()});const{hasValidationError:U}=ed({props:t,validator:f,timezone:N,value:x.value,onError:t.onError}),J=b.useMemo(()=>c!==void 0?c:U,[U,c]);b.useEffect(()=>{!J&&v==null&&$()},[x.referenceValue,v,J]),b.useEffect(()=>{x.tempValueStrAndroid!=null&&v!=null&&($(),E())},[x.sections]),b.useImperativeHandle(r,()=>({getSections:()=>x.sections,getActiveSectionIndex:L.getActiveSectionIndexFromDOM,setSelectedSections:L.setSelectedSections,focusField:L.focusField,isFieldFocused:L.isFieldFocused}));const G=le((z,...Q)=>{z.preventDefault(),u==null||u(z,...Q),D(),L.isFieldFocused()?w(O.startIndex):L.focusField(0)}),de={onKeyDown:_,onClear:G,error:J,clearable:!!(d&&!T&&!a&&!s)},K={disabled:s,readOnly:a};return C({},n.forwardedProps,de,K,B)},rg=["clearable","onClear","InputProps","sx","slots","slotProps"],og=["ownerState"],ig=n=>{const e=Ht(),{clearable:t,onClear:r,InputProps:o,sx:i,slots:s,slotProps:a}=n,l=me(n,rg),c=(s==null?void 0:s.clearButton)??Zo,d=be({elementType:c,externalSlotProps:a==null?void 0:a.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:e.fieldClearLabel}}),u=me(d,og),p=(s==null?void 0:s.clearIcon)??Yh,h=be({elementType:p,externalSlotProps:a==null?void 0:a.clearIcon,ownerState:{}});return C({},l,{InputProps:C({},o,{endAdornment:y.jsxs(b.Fragment,{children:[t&&y.jsx(Tc,{position:"end",sx:{marginRight:o!=null&&o.endAdornment?-1:-1.5},children:y.jsx(c,C({},u,{onClick:r,children:y.jsx(p,C({fontSize:"small"},h))}))}),o==null?void 0:o.endAdornment]})}),sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(i)?i:[i]]})},sg=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator"],ag=(n,e)=>b.useMemo(()=>{const t=C({},n),r={},o=i=>{t.hasOwnProperty(i)&&(r[i]=t[i],delete t[i])};return sg.forEach(o),Xc.forEach(o),{forwardedProps:t,internalProps:r}},[n,e]),lg=n=>{const e=Ce(),t=Zr();return C({},n,{disablePast:n.disablePast??!1,disableFuture:n.disableFuture??!1,format:n.format??e.formats.keyboardDate,minDate:xt(e,n.minDate,t.minDate),maxDate:xt(e,n.maxDate,t.maxDate)})},cg=n=>{const e=lg(n),{forwardedProps:t,internalProps:r}=ag(e,"date");return ng({forwardedProps:t,internalProps:r,valueManager:Nt,fieldValueManager:Pm,validator:Xr,valueType:"date"})};function dg(n){return Ie("MuiPickersTextField",n)}Ne("MuiPickersTextField",["root","focused","disabled","error","required"]);function ug(n){return Ie("MuiPickersInputBase",n)}const or=Ne("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input"]);function pg(n){return Ie("MuiPickersSectionList",n)}const Or=Ne("MuiPickersSectionList",["root","section","sectionContent"]),fg=["slots","slotProps","elements","sectionListRef"],td=ce("div",{name:"MuiPickersSectionList",slot:"Root",overridesResolver:(n,e)=>e.root})({direction:"ltr /*! @noflip */",outline:"none"}),nd=ce("span",{name:"MuiPickersSectionList",slot:"Section",overridesResolver:(n,e)=>e.section})({}),rd=ce("span",{name:"MuiPickersSectionList",slot:"SectionSeparator",overridesResolver:(n,e)=>e.sectionSeparator})({whiteSpace:"pre"}),od=ce("span",{name:"MuiPickersSectionList",slot:"SectionContent",overridesResolver:(n,e)=>e.sectionContent})({outline:"none"}),hg=n=>{const{classes:e}=n;return Ae({root:["root"],section:["section"],sectionContent:["sectionContent"]},pg,e)};function mg(n){const{slots:e,slotProps:t,element:r,classes:o}=n,i=(e==null?void 0:e.section)??nd,s=be({elementType:i,externalSlotProps:t==null?void 0:t.section,externalForwardedProps:r.container,className:o.section,ownerState:{}}),a=(e==null?void 0:e.sectionContent)??od,l=be({elementType:a,externalSlotProps:t==null?void 0:t.sectionContent,externalForwardedProps:r.content,additionalProps:{suppressContentEditableWarning:!0},className:o.sectionContent,ownerState:{}}),c=(e==null?void 0:e.sectionSeparator)??rd,d=be({elementType:c,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.before,ownerState:{position:"before"}}),u=be({elementType:c,externalSlotProps:t==null?void 0:t.sectionSeparator,externalForwardedProps:r.after,ownerState:{position:"after"}});return y.jsxs(i,C({},s,{children:[y.jsx(c,C({},d)),y.jsx(a,C({},l)),y.jsx(c,C({},u))]}))}const gg=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersSectionList"}),{slots:o,slotProps:i,elements:s,sectionListRef:a}=r,l=me(r,fg),c=hg(r),d=b.useRef(null),u=ct(t,d),p=m=>{if(!d.current)throw new Error(`MUI X: Cannot call sectionListRef.${m} before the mount of the component.`);return d.current};b.useImperativeHandle(a,()=>({getRoot(){return p("getRoot")},getSectionContainer(m){return p("getSectionContainer").querySelector(`.${Or.section}[data-sectionindex="${m}"]`)},getSectionContent(m){return p("getSectionContent").querySelector(`.${Or.section}[data-sectionindex="${m}"] .${Or.sectionContent}`)},getSectionIndexFromDOMElement(m){const g=p("getSectionIndexFromDOMElement");if(m==null||!g.contains(m))return null;let x=null;return m.classList.contains(Or.section)?x=m:m.classList.contains(Or.sectionContent)&&(x=m.parentElement),x==null?null:Number(x.dataset.sectionindex)}}));const h=(o==null?void 0:o.root)??td,f=be({elementType:h,externalSlotProps:i==null?void 0:i.root,externalForwardedProps:l,additionalProps:{ref:u,suppressContentEditableWarning:!0},className:c.root,ownerState:{}});return y.jsx(h,C({},f,{children:f.contentEditable?s.map(({content:m,before:g,after:x})=>`${g.children}${m.children}${x.children}`).join(""):y.jsx(b.Fragment,{children:s.map((m,g)=>y.jsx(mg,{slots:o,slotProps:i,element:m,classes:c},g))})}))}),yg=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef"],xg=n=>Math.round(n*1e5)/1e5,ri=ce("div",{name:"MuiPickersInputBase",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>C({},n.typography.body1,{color:(n.vars||n).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${xg(.15/16)}em`,variants:[{props:{fullWidth:!0},style:{width:"100%"}}]})),js=ce(td,{name:"MuiPickersInputBase",slot:"SectionsContainer",overridesResolver:(n,e)=>e.sectionsContainer})(({theme:n})=>({padding:"4px 0 5px",fontFamily:n.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{isRtl:!0},style:{textAlign:"right /*! @noflip */"}},{props:{size:"small"},style:{paddingTop:1}},{props:{adornedStart:!1,focused:!1,filled:!1},style:{color:"currentColor",opacity:0}},{props:({adornedStart:e,focused:t,filled:r,label:o})=>!e&&!t&&!r&&o==null,style:n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:n.palette.mode==="light"?.42:.5}}]})),vg=ce(nd,{name:"MuiPickersInputBase",slot:"Section",overridesResolver:(n,e)=>e.section})(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"flex"})),bg=ce(od,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(n,e)=>e.content})(({theme:n})=>({fontFamily:n.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),kg=ce(rd,{name:"MuiPickersInputBase",slot:"Separator",overridesResolver:(n,e)=>e.separator})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),wg=ce("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(n,e)=>e.hiddenInput})(C({},Ah)),Sg=n=>{const{focused:e,disabled:t,error:r,classes:o,fullWidth:i,readOnly:s,color:a,size:l,endAdornment:c,startAdornment:d}=n,u={root:["root",e&&!t&&"focused",t&&"disabled",s&&"readOnly",r&&"error",i&&"fullWidth",`color${Oh(a)}`,l==="small"&&"inputSizeSmall",!!d&&"adornedStart",!!c&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"]};return Ae(u,ug,o)},Ls=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersInputBase"}),{elements:o,areAllSectionsEmpty:i,value:s,onChange:a,id:l,endAdornment:c,startAdornment:d,renderSuffix:u,slots:p,slotProps:h,contentEditable:f,tabIndex:m,onInput:g,onPaste:x,onKeyDown:v,name:k,readOnly:w,inputProps:D,inputRef:E,sectionListRef:P}=r,M=me(r,yg),R=b.useRef(null),F=ct(t,R),N=ct(D==null?void 0:D.ref,E),V=_t(),$=Xo();if(!$)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const T=U=>{var J;if($.disabled){U.stopPropagation();return}(J=$.onFocus)==null||J.call($,U)};b.useEffect(()=>{$&&$.setAdornedStart(!!d)},[$,d]),b.useEffect(()=>{$&&(i?$.onEmpty():$.onFilled())},[$,i]);const S=C({},r,$,{isRtl:V}),O=Sg(S),B=(p==null?void 0:p.root)||ri,L=be({elementType:B,externalSlotProps:h==null?void 0:h.root,externalForwardedProps:M,additionalProps:{"aria-invalid":$.error,ref:F},className:O.root,ownerState:S}),_=(p==null?void 0:p.input)||js;return y.jsxs(B,C({},L,{children:[d,y.jsx(gg,{sectionListRef:P,elements:o,contentEditable:f,tabIndex:m,className:O.sectionsContainer,onFocus:T,onBlur:$.onBlur,onInput:g,onPaste:x,onKeyDown:v,slots:{root:_,section:vg,sectionContent:bg,sectionSeparator:kg},slotProps:{root:{ownerState:S},sectionContent:{className:or.sectionContent},sectionSeparator:({position:U})=>({className:U==="before"?or.sectionBefore:or.sectionAfter})}}),c,u?u(C({},$)):null,y.jsx(wg,C({name:k,className:O.input,value:s,onChange:a,id:l,"aria-hidden":"true",tabIndex:-1,readOnly:w,required:$.required,disabled:$.disabled},D,{ref:N}))]}))});function Cg(n){return Ie("MuiPickersOutlinedInput",n)}const kt=C({},or,Ne("MuiPickersOutlinedInput",["root","notchedOutline","input"])),Mg=["children","className","label","notched","shrink"],Dg=ce("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),za=ce("span")(({theme:n})=>({fontFamily:n.typography.fontFamily,fontSize:"inherit"})),Tg=ce("legend")(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{withLabel:!1},style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:{withLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{withLabel:!0,notched:!0},style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]}));function Og(n){const{className:e,label:t}=n,r=me(n,Mg),o=t!=null&&t!=="",i=C({},n,{withLabel:o});return y.jsx(Dg,C({"aria-hidden":!0,className:e},r,{ownerState:i,children:y.jsx(Tg,{ownerState:i,children:o?y.jsx(za,{children:t}):y.jsx(za,{className:"notranslate",children:""})})}))}const Eg=["label","autoFocus","ownerState","notched"],Pg=ce(ri,{name:"MuiPickersOutlinedInput",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${kt.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${kt.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${kt.focused} .${kt.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${kt.disabled}`]:{[`& .${kt.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled},"*":{color:(n.vars||n).palette.action.disabled}},[`&.${kt.error} .${kt.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},variants:Object.keys((n.vars??n).palette).filter(t=>{var r;return((r=(n.vars??n).palette[t])==null?void 0:r.main)??!1}).map(t=>({props:{color:t},style:{[`&.${kt.focused}:not(.${kt.error}) .${kt.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}}))}}),Ag=ce(js,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer",overridesResolver:(n,e)=>e.sectionsContainer})({padding:"16.5px 0",variants:[{props:{size:"small"},style:{padding:"8.5px 0"}}]}),Ig=n=>{const{classes:e}=n,r=Ae({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Cg,e);return C({},e,r)},id=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersOutlinedInput"}),{label:o,ownerState:i,notched:s}=r,a=me(r,Eg),l=Xo(),c=C({},r,i,l,{color:(l==null?void 0:l.color)||"primary"}),d=Ig(c);return y.jsx(Ls,C({slots:{root:Pg,input:Ag},renderSuffix:u=>y.jsx(Og,{shrink:!!(s||u.adornedStart||u.focused||u.filled),notched:!!(s||u.adornedStart||u.focused||u.filled),className:d.notchedOutline,label:o!=null&&o!==""&&(l!=null&&l.required)?y.jsxs(b.Fragment,{children:[o,"","*"]}):o,ownerState:c})},a,{label:o,classes:d,ref:t}))});id.muiName="Input";function Ng(n){return Ie("MuiPickersFilledInput",n)}const wn=C({},or,Ne("MuiPickersFilledInput",["root","underline","input"])),Rg=["label","autoFocus","disableUnderline","ownerState"],Fg=ce(ri,{name:"MuiPickersFilledInput",slot:"Root",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>jp(n)&&n!=="disableUnderline"})(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${wn.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${wn.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:i},variants:[...Object.keys((n.vars??n).palette).filter(s=>(n.vars??n).palette[s].main).map(s=>{var a;return{props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[s])==null?void 0:a.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${wn.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${wn.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${wn.disabled}, .${wn.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${wn.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:({startAdornment:s})=>!!s,style:{paddingLeft:12}},{props:({endAdornment:s})=>!!s,style:{paddingRight:12}}]}}),jg=ce(js,{name:"MuiPickersFilledInput",slot:"sectionsContainer",overridesResolver:(n,e)=>e.sectionsContainer})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({startAdornment:n})=>!!n,style:{paddingLeft:0}},{props:({endAdornment:n})=>!!n,style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,size:"small"},style:{paddingTop:8,paddingBottom:9}}]}),Lg=n=>{const{classes:e,disableUnderline:t}=n,o=Ae({root:["root",!t&&"underline"],input:["input"]},Ng,e);return C({},e,o)},sd=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersFilledInput"}),{label:o,disableUnderline:i=!1,ownerState:s}=r,a=me(r,Rg),l=Xo(),c=C({},r,s,l,{color:(l==null?void 0:l.color)||"primary"}),d=Lg(c);return y.jsx(Ls,C({slots:{root:Fg,input:jg},slotProps:{root:{disableUnderline:i}}},a,{label:o,classes:d,ref:t}))});sd.muiName="Input";function Vg(n){return Ie("MuiPickersFilledInput",n)}const Er=C({},or,Ne("MuiPickersInput",["root","input"])),$g=["label","autoFocus","disableUnderline","ownerState"],Bg=ce(ri,{name:"MuiPickersInput",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((n.vars??n).palette).filter(r=>(n.vars??n).palette[r].main).map(r=>({props:{color:r},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Er.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Er.error}`]:{"&:before, &:after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Er.disabled}, .${Er.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Er.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),zg=n=>{const{classes:e,disableUnderline:t}=n,o=Ae({root:["root",!t&&"underline"],input:["input"]},Vg,e);return C({},e,o)},ad=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersInput"}),{label:o,disableUnderline:i=!1,ownerState:s}=r,a=me(r,$g),l=Xo(),c=C({},r,s,l,{disableUnderline:i,color:(l==null?void 0:l.color)||"primary"}),d=zg(c);return y.jsx(Ls,C({slots:{root:Bg}},a,{label:o,classes:d,ref:t}))});ad.muiName="Input";const _g=["onFocus","onBlur","className","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps"],Hg={standard:ad,filled:sd,outlined:id},Wg=ce($p,{name:"MuiPickersTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Ug=n=>{const{focused:e,disabled:t,classes:r,required:o}=n;return Ae({root:["root",e&&!t&&"focused",t&&"disabled",o&&"required"]},dg,r)},qg=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersTextField"}),{onFocus:o,onBlur:i,className:s,color:a="primary",disabled:l=!1,error:c=!1,variant:d="outlined",required:u=!1,InputProps:p,inputProps:h,inputRef:f,sectionListRef:m,elements:g,areAllSectionsEmpty:x,onClick:v,onKeyDown:k,onKeyUp:w,onPaste:D,onInput:E,endAdornment:P,startAdornment:M,tabIndex:R,contentEditable:F,focused:N,value:V,onChange:$,fullWidth:T,id:S,name:O,helperText:B,FormHelperTextProps:L,label:_,InputLabelProps:U}=r,J=me(r,_g),G=b.useRef(null),de=ct(t,G),K=Gr(S),z=B&&K?`${K}-helper-text`:void 0,Q=_&&K?`${K}-label`:void 0,Z=C({},r,{color:a,disabled:l,error:c,focused:N,required:u,variant:d}),H=Ug(Z),ne=Hg[d];return y.jsxs(Wg,C({className:Pe(H.root,s),ref:de,focused:N,onFocus:o,onBlur:i,disabled:l,variant:d,error:c,color:a,fullWidth:T,required:u,ownerState:Z},J,{children:[y.jsx(Bp,C({htmlFor:K,id:Q},U,{children:_})),y.jsx(ne,C({elements:g,areAllSectionsEmpty:x,onClick:v,onKeyDown:k,onKeyUp:w,onInput:E,onPaste:D,endAdornment:P,startAdornment:M,tabIndex:R,contentEditable:F,value:V,onChange:$,id:K,fullWidth:T,inputProps:h,inputRef:f,sectionListRef:m,label:_,name:O,role:"group","aria-labelledby":Q},p)),B&&y.jsx(rf,C({id:z},L,{children:B}))]}))}),Yg=["enableAccessibleFieldDOMStructure"],Kg=["InputProps","readOnly"],Jg=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef"],Gg=n=>{let{enableAccessibleFieldDOMStructure:e}=n,t=me(n,Yg);if(e){const{InputProps:u,readOnly:p}=t,h=me(t,Kg);return C({},h,{InputProps:C({},u??{},{readOnly:p})})}const{onPaste:r,onKeyDown:o,inputMode:i,readOnly:s,InputProps:a,inputProps:l,inputRef:c}=t,d=me(t,Jg);return C({},d,{InputProps:C({},a??{},{readOnly:s}),inputProps:C({},l??{},{inputMode:i,onPaste:r,onKeyDown:o,ref:c})})},Zg=["slots","slotProps","InputProps","inputProps"],ld=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiDateField"}),{slots:o,slotProps:i,InputProps:s,inputProps:a}=r,l=me(r,Zg),c=r,d=(o==null?void 0:o.textField)??(e.enableAccessibleFieldDOMStructure?qg:Cn),u=be({elementType:d,externalSlotProps:i==null?void 0:i.textField,externalForwardedProps:l,additionalProps:{ref:t},ownerState:c});u.inputProps=C({},a,u.inputProps),u.InputProps=C({},s,u.InputProps);const p=cg(u),h=Gg(p),f=ig(C({},h,{slots:o,slotProps:i}));return y.jsx(d,C({},f))}),cd=({shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:o,disableFuture:i,disablePast:s,timezone:a})=>{const l=Hn();return b.useCallback(c=>Xr({adapter:l,value:c,timezone:a,props:{shouldDisableDate:n,shouldDisableMonth:e,shouldDisableYear:t,minDate:r,maxDate:o,disableFuture:i,disablePast:s}})!==null,[l,n,e,t,r,o,i,s,a])},Xg=(n,e,t)=>(r,o)=>{switch(o.type){case"changeMonth":return C({},r,{slideDirection:o.direction,currentMonth:o.newMonth,isMonthSwitchingAnimating:!n});case"finishMonthSwitchingAnimation":return C({},r,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(r.focusedDay!=null&&o.focusedDay!=null&&t.isSameDay(o.focusedDay,r.focusedDay))return r;const i=o.focusedDay!=null&&!e&&!t.isSameMonth(r.currentMonth,o.focusedDay);return C({},r,{focusedDay:o.focusedDay,isMonthSwitchingAnimating:i&&!n&&!o.withoutMonthSwitchingAnimation,currentMonth:i?t.startOfMonth(o.focusedDay):r.currentMonth,slideDirection:o.focusedDay!=null&&t.isAfterDay(o.focusedDay,r.currentMonth)?"left":"right"})}default:throw new Error("missing support")}},Qg=n=>{const{value:e,referenceDate:t,disableFuture:r,disablePast:o,disableSwitchToMonthOnDayFocus:i=!1,maxDate:s,minDate:a,onMonthChange:l,reduceAnimations:c,shouldDisableDate:d,timezone:u}=n,p=Ce(),h=b.useRef(Xg(!!c,i,p)).current,f=b.useMemo(()=>Nt.getInitialReferenceValue({value:e,utils:p,timezone:u,props:n,referenceDate:t,granularity:At.day}),[]),[m,g]=b.useReducer(h,{isMonthSwitchingAnimating:!1,focusedDay:f,currentMonth:p.startOfMonth(f),slideDirection:"left"}),x=b.useCallback(E=>{g(C({type:"changeMonth"},E)),l&&l(E.newMonth)},[l]),v=b.useCallback(E=>{const P=E;p.isSameMonth(P,m.currentMonth)||x({newMonth:p.startOfMonth(P),direction:p.isAfterDay(P,m.currentMonth)?"left":"right"})},[m.currentMonth,x,p]),k=cd({shouldDisableDate:d,minDate:a,maxDate:s,disableFuture:r,disablePast:o,timezone:u}),w=b.useCallback(()=>{g({type:"finishMonthSwitchingAnimation"})},[]),D=le((E,P)=>{k(E)||g({type:"changeFocusedDay",focusedDay:E,withoutMonthSwitchingAnimation:P})});return{referenceDate:f,calendarState:m,changeMonth:v,changeFocusedDay:D,isDateDisabled:k,onMonthSwitchingAnimationEnd:w,handleChangeMonth:x}},ey=n=>Ie("MuiPickersFadeTransitionGroup",n);Ne("MuiPickersFadeTransitionGroup",["root"]);const ty=n=>{const{classes:e}=n;return Ae({root:["root"]},ey,e)},ny=ce(Cc,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"block",position:"relative"});function dd(n){const e=Se({props:n,name:"MuiPickersFadeTransitionGroup"}),{children:t,className:r,reduceAnimations:o,transKey:i}=e,s=ty(e),a=Jr();return o?t:y.jsx(ny,{className:Pe(s.root,r),children:y.jsx(Go,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:a.transitions.duration.enteringScreen,enter:a.transitions.duration.enteringScreen,exit:0},children:t},i)})}const ry=n=>Ie("MuiPickersSlideTransition",n),ut=Ne("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),oy=["children","className","reduceAnimations","slideDirection","transKey","classes"],iy=n=>{const{classes:e,slideDirection:t}=n,r={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return Ae(r,ry,e)},sy=ce(Cc,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(n,e)=>[e.root,{[`.${ut["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${ut["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${ut.slideEnterActive}`]:e.slideEnterActive},{[`.${ut.slideExit}`]:e.slideExit},{[`.${ut["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${ut["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:n})=>{const e=n.transitions.create("transform",{duration:n.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${ut["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${ut["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${ut.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${ut.slideExit}`]:{transform:"translate(0%)"},[`& .${ut["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${ut["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function ay(n){const e=Se({props:n,name:"MuiPickersSlideTransition"}),{children:t,className:r,reduceAnimations:o,transKey:i}=e,s=me(e,oy),a=iy(e),l=Jr();if(o)return y.jsx("div",{className:Pe(a.root,r),children:t});const c={exit:a.exit,enterActive:a.enterActive,enter:a.enter,exitActive:a.exitActive};return y.jsx(sy,{className:Pe(a.root,r),childFactory:d=>b.cloneElement(d,{classNames:c}),role:"presentation",children:y.jsx(Ds,C({mountOnEnter:!0,unmountOnExit:!0,timeout:l.transitions.duration.complex,classNames:c},s,{children:t}),i)})}const ly=n=>Ie("MuiDayCalendar",n);Ne("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const cy=["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],dy=["ownerState"],uy=n=>{const{classes:e}=n;return Ae({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},ly,e)},ud=(Br+ei*2)*6,py=ce("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(n,e)=>e.root})({}),fy=ce("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(n,e)=>e.header})({display:"flex",justifyContent:"center",alignItems:"center"}),hy=ce(nt,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(n,e)=>e.weekDayLabel})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(n.vars||n).palette.text.secondary})),my=ce(nt,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(n,e)=>e.weekNumberLabel})(({theme:n})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:n.palette.text.disabled})),gy=ce(nt,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(n,e)=>e.weekNumber})(({theme:n})=>C({},n.typography.caption,{width:Br,height:Br,padding:0,margin:`0 ${ei}px`,color:n.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),yy=ce("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(n,e)=>e.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:ud}),xy=ce(ay,{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(n,e)=>e.slideTransition})({minHeight:ud}),vy=ce("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(n,e)=>e.monthContainer})({overflow:"hidden"}),by=ce("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(n,e)=>e.weekContainer})({margin:`${ei}px 0`,display:"flex",justifyContent:"center"});function ky(n){let{parentProps:e,day:t,focusableDay:r,selectedDays:o,isDateDisabled:i,currentMonthNumber:s,isViewFocused:a}=n,l=me(n,cy);const{disabled:c,disableHighlightToday:d,isMonthSwitchingAnimating:u,showDaysOutsideCurrentMonth:p,slots:h,slotProps:f,timezone:m}=e,g=Ce(),x=Qo(m),v=r!==null&&g.isSameDay(t,r),k=o.some(V=>g.isSameDay(V,t)),w=g.isSameDay(t,x),D=(h==null?void 0:h.day)??Lm,E=be({elementType:D,externalSlotProps:f==null?void 0:f.day,additionalProps:C({disableHighlightToday:d,showDaysOutsideCurrentMonth:p,role:"gridcell",isAnimating:u,"data-timestamp":g.toJsDate(t).valueOf()},l),ownerState:C({},e,{day:t,selected:k})}),P=me(E,dy),M=b.useMemo(()=>c||i(t),[c,i,t]),R=b.useMemo(()=>g.getMonth(t)!==s,[g,t,s]),F=b.useMemo(()=>{const V=g.startOfMonth(g.setMonth(t,s));return p?g.isSameDay(t,g.startOfWeek(V)):g.isSameDay(t,V)},[s,t,p,g]),N=b.useMemo(()=>{const V=g.endOfMonth(g.setMonth(t,s));return p?g.isSameDay(t,g.endOfWeek(V)):g.isSameDay(t,V)},[s,t,p,g]);return y.jsx(D,C({},P,{day:t,disabled:M,autoFocus:a&&v,today:w,outsideCurrentMonth:R,isFirstVisibleCell:F,isLastVisibleCell:N,selected:k,tabIndex:v?0:-1,"aria-selected":k,"aria-current":w?"date":void 0}))}function wy(n){const e=Se({props:n,name:"MuiDayCalendar"}),t=Ce(),{onFocusedDayChange:r,className:o,currentMonth:i,selectedDays:s,focusedDay:a,loading:l,onSelectedDaysChange:c,onMonthSwitchingAnimationEnd:d,readOnly:u,reduceAnimations:p,renderLoading:h=()=>y.jsx("span",{children:"..."}),slideDirection:f,TransitionProps:m,disablePast:g,disableFuture:x,minDate:v,maxDate:k,shouldDisableDate:w,shouldDisableMonth:D,shouldDisableYear:E,dayOfWeekFormatter:P=X=>t.format(X,"weekdayShort").charAt(0).toUpperCase(),hasFocus:M,onFocusedViewChange:R,gridLabelId:F,displayWeekNumber:N,fixedWeekNumber:V,autoFocus:$,timezone:T}=e,S=Qo(T),O=uy(e),B=_t(),L=cd({shouldDisableDate:w,shouldDisableMonth:D,shouldDisableYear:E,minDate:v,maxDate:k,disablePast:g,disableFuture:x,timezone:T}),_=Ht(),[U,J]=Ln({name:"DayCalendar",state:"hasFocus",controlled:M,default:$??!1}),[G,de]=b.useState(()=>a||S),K=le(X=>{u||c(X)}),z=X=>{L(X)||(r(X),de(X),R==null||R(!0),J(!0))},Q=le((X,oe)=>{switch(X.key){case"ArrowUp":z(t.addDays(oe,-7)),X.preventDefault();break;case"ArrowDown":z(t.addDays(oe,7)),X.preventDefault();break;case"ArrowLeft":{const ee=t.addDays(oe,B?1:-1),fe=t.addMonths(oe,B?1:-1),ve=Rr({utils:t,date:ee,minDate:B?ee:t.startOfMonth(fe),maxDate:B?t.endOfMonth(fe):ee,isDateDisabled:L,timezone:T});z(ve||ee),X.preventDefault();break}case"ArrowRight":{const ee=t.addDays(oe,B?-1:1),fe=t.addMonths(oe,B?-1:1),ve=Rr({utils:t,date:ee,minDate:B?t.startOfMonth(fe):ee,maxDate:B?ee:t.endOfMonth(fe),isDateDisabled:L,timezone:T});z(ve||ee),X.preventDefault();break}case"Home":z(t.startOfWeek(oe)),X.preventDefault();break;case"End":z(t.endOfWeek(oe)),X.preventDefault();break;case"PageUp":z(t.addMonths(oe,1)),X.preventDefault();break;case"PageDown":z(t.addMonths(oe,-1)),X.preventDefault();break}}),Z=le((X,oe)=>z(oe)),H=le((X,oe)=>{U&&t.isSameDay(G,oe)&&(R==null||R(!1))}),ne=t.getMonth(i),se=t.getYear(i),te=b.useMemo(()=>s.filter(X=>!!X).map(X=>t.startOfDay(X)),[t,s]),j=`${se}-${ne}`,A=b.useMemo(()=>b.createRef(),[j]),Y=b.useMemo(()=>{const X=t.startOfMonth(i),oe=t.endOfMonth(i);return L(G)||t.isAfterDay(G,oe)||t.isBeforeDay(G,X)?Rr({utils:t,date:G,minDate:X,maxDate:oe,disablePast:g,disableFuture:x,isDateDisabled:L,timezone:T}):G},[i,x,g,G,L,t,T]),q=b.useMemo(()=>{const X=t.setTimezone(i,T),oe=t.getWeekArray(X);let ee=t.addMonths(X,1);for(;V&&oe.length<V;){const fe=t.getWeekArray(ee),ve=t.isSameDay(oe[oe.length-1][0],fe[0][0]);fe.slice(ve?1:0).forEach(bt=>{oe.length<V&&oe.push(bt)}),ee=t.addMonths(ee,1)}return oe},[i,V,t,T]);return y.jsxs(py,{role:"grid","aria-labelledby":F,className:O.root,children:[y.jsxs(fy,{role:"row",className:O.header,children:[N&&y.jsx(my,{variant:"caption",role:"columnheader","aria-label":_.calendarWeekNumberHeaderLabel,className:O.weekNumberLabel,children:_.calendarWeekNumberHeaderText}),fm(t,S).map((X,oe)=>y.jsx(hy,{variant:"caption",role:"columnheader","aria-label":t.format(X,"weekday"),className:O.weekDayLabel,children:P(X)},oe.toString()))]}),l?y.jsx(yy,{className:O.loadingContainer,children:h()}):y.jsx(xy,C({transKey:j,onExited:d,reduceAnimations:p,slideDirection:f,className:Pe(o,O.slideTransition)},m,{nodeRef:A,children:y.jsx(vy,{ref:A,role:"rowgroup",className:O.monthContainer,children:q.map((X,oe)=>y.jsxs(by,{role:"row",className:O.weekContainer,"aria-rowindex":oe+1,children:[N&&y.jsx(gy,{className:O.weekNumber,role:"rowheader","aria-label":_.calendarWeekNumberAriaLabelText(t.getWeekNumber(X[0])),children:_.calendarWeekNumberText(t.getWeekNumber(X[0]))}),X.map((ee,fe)=>y.jsx(ky,{parentProps:e,day:ee,selectedDays:te,focusableDay:Y,onKeyDown:Q,onFocus:Z,onBlur:H,onDaySelect:K,isDateDisabled:L,currentMonthNumber:ne,isViewFocused:U,"aria-colindex":fe+1},ee.toString()))]},`week-${X[0]}`))})}))]})}function Sy(n){return Ie("MuiPickersMonth",n)}const ao=Ne("MuiPickersMonth",["root","monthButton","disabled","selected"]),Cy=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow","slots","slotProps"],My=n=>{const{disabled:e,selected:t,classes:r}=n;return Ae({root:["root"],monthButton:["monthButton",e&&"disabled",t&&"selected"]},Sy,r)},Dy=ce("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(n,e)=>[e.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{monthsPerRow:4},style:{flexBasis:"25%"}}]}),Ty=ce("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(n,e)=>[e.monthButton,{[`&.${ao.disabled}`]:e.disabled},{[`&.${ao.selected}`]:e.selected}]})(({theme:n})=>C({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:We(n.palette.action.active,n.palette.action.hoverOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:We(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${ao.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${ao.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),Oy=b.memo(function(e){const t=Se({props:e,name:"MuiPickersMonth"}),{autoFocus:r,className:o,children:i,disabled:s,selected:a,value:l,tabIndex:c,onClick:d,onKeyDown:u,onFocus:p,onBlur:h,"aria-current":f,"aria-label":m,slots:g,slotProps:x}=t,v=me(t,Cy),k=b.useRef(null),w=My(t);zt(()=>{var P;r&&((P=k.current)==null||P.focus())},[r]);const D=(g==null?void 0:g.monthButton)??Ty,E=be({elementType:D,externalSlotProps:x==null?void 0:x.monthButton,additionalProps:{children:i,disabled:s,tabIndex:c,ref:k,type:"button",role:"radio","aria-current":f,"aria-checked":a,"aria-label":m,onClick:P=>d(P,l),onKeyDown:P=>u(P,l),onFocus:P=>p(P,l),onBlur:P=>h(P,l)},ownerState:t,className:w.monthButton});return y.jsx(Dy,C({className:Pe(w.root,o),ownerState:t},v,{children:y.jsx(D,C({},E))}))});function Ey(n){return Ie("MuiMonthCalendar",n)}Ne("MuiMonthCalendar",["root"]);const Py=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],Ay=n=>{const{classes:e}=n;return Ae({root:["root"]},Ey,e)};function Iy(n,e){const t=Ce(),r=Zr(),o=Se({props:n,name:e});return C({disableFuture:!1,disablePast:!1},o,{minDate:xt(t,o.minDate,r.minDate),maxDate:xt(t,o.maxDate,r.maxDate)})}const Ny=ce("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:ti,boxSizing:"border-box"}),Ry=b.forwardRef(function(e,t){const r=Iy(e,"MuiMonthCalendar"),{className:o,value:i,defaultValue:s,referenceDate:a,disabled:l,disableFuture:c,disablePast:d,maxDate:u,minDate:p,onChange:h,shouldDisableMonth:f,readOnly:m,autoFocus:g=!1,onMonthFocus:x,hasFocus:v,onFocusedViewChange:k,monthsPerRow:w=3,timezone:D,gridLabelId:E,slots:P,slotProps:M}=r,R=me(r,Py),{value:F,handleValueChange:N,timezone:V}=Ns({name:"MonthCalendar",timezone:D,value:i,defaultValue:s,onChange:h,valueManager:Nt}),$=Qo(V),T=_t(),S=Ce(),O=b.useMemo(()=>Nt.getInitialReferenceValue({value:F,utils:S,props:r,timezone:V,referenceDate:a,granularity:At.month}),[]),B=r,L=Ay(B),_=b.useMemo(()=>S.getMonth($),[S,$]),U=b.useMemo(()=>F!=null?S.getMonth(F):null,[F,S]),[J,G]=b.useState(()=>U||S.getMonth(O)),[de,K]=Ln({name:"MonthCalendar",state:"hasFocus",controlled:v,default:g??!1}),z=le(j=>{K(j),k&&k(j)}),Q=b.useCallback(j=>{const A=S.startOfMonth(d&&S.isAfter($,p)?$:p),Y=S.startOfMonth(c&&S.isBefore($,u)?$:u),q=S.startOfMonth(j);return S.isBefore(q,A)||S.isAfter(q,Y)?!0:f?f(q):!1},[c,d,u,p,$,f,S]),Z=le((j,A)=>{if(m)return;const Y=S.setMonth(F??O,A);N(Y)}),H=le(j=>{Q(S.setMonth(F??O,j))||(G(j),z(!0),x&&x(j))});b.useEffect(()=>{G(j=>U!==null&&j!==U?U:j)},[U]);const ne=le((j,A)=>{switch(j.key){case"ArrowUp":H((12+A-3)%12),j.preventDefault();break;case"ArrowDown":H((12+A+3)%12),j.preventDefault();break;case"ArrowLeft":H((12+A+(T?1:-1))%12),j.preventDefault();break;case"ArrowRight":H((12+A+(T?-1:1))%12),j.preventDefault();break}}),se=le((j,A)=>{H(A)}),te=le((j,A)=>{J===A&&z(!1)});return y.jsx(Ny,C({ref:t,className:Pe(L.root,o),ownerState:B,role:"radiogroup","aria-labelledby":E},R,{children:Ps(S,F??O).map(j=>{const A=S.getMonth(j),Y=S.format(j,"monthShort"),q=S.format(j,"month"),X=A===U,oe=l||Q(j);return y.jsx(Oy,{selected:X,value:A,onClick:Z,onKeyDown:ne,autoFocus:de&&A===J,disabled:oe,tabIndex:A===J&&!oe?0:-1,onFocus:se,onBlur:te,"aria-current":_===A?"date":void 0,"aria-label":q,monthsPerRow:w,slots:P,slotProps:M,children:Y},Y)})}))});function Fy(n){return Ie("MuiPickersYear",n)}const lo=Ne("MuiPickersYear",["root","yearButton","selected","disabled"]),jy=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow","slots","slotProps"],Ly=n=>{const{disabled:e,selected:t,classes:r}=n;return Ae({root:["root"],yearButton:["yearButton",e&&"disabled",t&&"selected"]},Fy,r)},Vy=ce("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(n,e)=>[e.root]})({display:"flex",alignItems:"center",justifyContent:"center",flexBasis:"33.3%",variants:[{props:{yearsPerRow:4},style:{flexBasis:"25%"}}]}),$y=ce("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(n,e)=>[e.yearButton,{[`&.${lo.disabled}`]:e.disabled},{[`&.${lo.selected}`]:e.selected}]})(({theme:n})=>C({color:"unset",backgroundColor:"transparent",border:0,outline:0},n.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.focusOpacity})`:We(n.palette.action.active,n.palette.action.focusOpacity)},"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:We(n.palette.action.active,n.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${lo.disabled}`]:{color:(n.vars||n).palette.text.secondary},[`&.${lo.selected}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.main,"&:focus, &:hover":{backgroundColor:(n.vars||n).palette.primary.dark}}})),By=b.memo(function(e){const t=Se({props:e,name:"MuiPickersYear"}),{autoFocus:r,className:o,children:i,disabled:s,selected:a,value:l,tabIndex:c,onClick:d,onKeyDown:u,onFocus:p,onBlur:h,"aria-current":f,slots:m,slotProps:g}=t,x=me(t,jy),v=b.useRef(null),k=Ly(t);zt(()=>{var E;r&&((E=v.current)==null||E.focus())},[r]);const w=(m==null?void 0:m.yearButton)??$y,D=be({elementType:w,externalSlotProps:g==null?void 0:g.yearButton,additionalProps:{children:i,disabled:s,tabIndex:c,ref:v,type:"button",role:"radio","aria-current":f,"aria-checked":a,onClick:E=>d(E,l),onKeyDown:E=>u(E,l),onFocus:E=>p(E,l),onBlur:E=>h(E,l)},ownerState:t,className:k.yearButton});return y.jsx(Vy,C({className:Pe(k.root,o),ownerState:t},x,{children:y.jsx(w,C({},D))}))});function zy(n){return Ie("MuiYearCalendar",n)}Ne("MuiYearCalendar",["root"]);const _y=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],Hy=n=>{const{classes:e}=n;return Ae({root:["root"]},zy,e)};function Wy(n,e){const t=Ce(),r=Zr(),o=Se({props:n,name:e});return C({disablePast:!1,disableFuture:!1},o,{yearsPerRow:o.yearsPerRow??3,minDate:xt(t,o.minDate,r.minDate),maxDate:xt(t,o.maxDate,r.maxDate)})}const Uy=ce("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:ti,maxHeight:lm,boxSizing:"border-box",position:"relative"}),qy=b.forwardRef(function(e,t){const r=Wy(e,"MuiYearCalendar"),{autoFocus:o,className:i,value:s,defaultValue:a,referenceDate:l,disabled:c,disableFuture:d,disablePast:u,maxDate:p,minDate:h,onChange:f,readOnly:m,shouldDisableYear:g,onYearFocus:x,hasFocus:v,onFocusedViewChange:k,yearsOrder:w="asc",yearsPerRow:D,timezone:E,gridLabelId:P,slots:M,slotProps:R}=r,F=me(r,_y),{value:N,handleValueChange:V,timezone:$}=Ns({name:"YearCalendar",timezone:E,value:s,defaultValue:a,onChange:f,valueManager:Nt}),T=Qo($),S=_t(),O=Ce(),B=b.useMemo(()=>Nt.getInitialReferenceValue({value:N,utils:O,props:r,timezone:$,referenceDate:l,granularity:At.year}),[]),L=r,_=Hy(L),U=b.useMemo(()=>O.getYear(T),[O,T]),J=b.useMemo(()=>N!=null?O.getYear(N):null,[N,O]),[G,de]=b.useState(()=>J||O.getYear(B)),[K,z]=Ln({name:"YearCalendar",state:"hasFocus",controlled:v,default:o??!1}),Q=le(ee=>{z(ee),k&&k(ee)}),Z=b.useCallback(ee=>{if(u&&O.isBeforeYear(ee,T)||d&&O.isAfterYear(ee,T)||h&&O.isBeforeYear(ee,h)||p&&O.isAfterYear(ee,p))return!0;if(!g)return!1;const fe=O.startOfYear(ee);return g(fe)},[d,u,p,h,T,g,O]),H=le((ee,fe)=>{if(m)return;const ve=O.setYear(N??B,fe);V(ve)}),ne=le(ee=>{Z(O.setYear(N??B,ee))||(de(ee),Q(!0),x==null||x(ee))});b.useEffect(()=>{de(ee=>J!==null&&ee!==J?J:ee)},[J]);const se=w!=="desc"?D*1:D*-1,te=S||w==="desc"?-1:1,j=le((ee,fe)=>{switch(ee.key){case"ArrowUp":ne(fe-se),ee.preventDefault();break;case"ArrowDown":ne(fe+se),ee.preventDefault();break;case"ArrowLeft":ne(fe-te),ee.preventDefault();break;case"ArrowRight":ne(fe+te),ee.preventDefault();break}}),A=le((ee,fe)=>{ne(fe)}),Y=le((ee,fe)=>{G===fe&&Q(!1)}),q=b.useRef(null),X=ct(t,q);b.useEffect(()=>{if(o||q.current===null)return;const ee=q.current.querySelector('[tabindex="0"]');if(!ee)return;const fe=ee.offsetHeight,ve=ee.offsetTop,bt=q.current.clientHeight,Ut=q.current.scrollTop,br=ve+fe;fe>bt||ve<Ut||(q.current.scrollTop=br-bt/2-fe/2)},[o]);const oe=O.getYearRange([h,p]);return w==="desc"&&oe.reverse(),y.jsx(Uy,C({ref:X,className:Pe(_.root,i),ownerState:L,role:"radiogroup","aria-labelledby":P},F,{children:oe.map(ee=>{const fe=O.getYear(ee),ve=fe===J,bt=c||Z(ee);return y.jsx(By,{selected:ve,value:fe,onClick:H,onKeyDown:j,autoFocus:K&&fe===G,disabled:bt,tabIndex:fe===G&&!bt?0:-1,onFocus:A,onBlur:Y,"aria-current":U===fe?"date":void 0,yearsPerRow:D,slots:M,slotProps:R,children:O.format(ee,"year")},O.format(ee,"year"))})}))}),Yy=n=>Ie("MuiPickersCalendarHeader",n),Ky=Ne("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Jy=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone","format"],Gy=["ownerState"],Zy=n=>{const{classes:e}=n;return Ae({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Yy,e)},Xy=ce("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),Qy=ce("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(n,e)=>e.labelContainer})(({theme:n})=>C({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},n.typography.body1,{fontWeight:n.typography.fontWeightMedium})),ex=ce("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(n,e)=>e.label})({marginRight:6}),tx=ce(Zo,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(n,e)=>e.switchViewButton})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${Ky.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),nx=ce(Hh,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(n,e)=>e.switchViewIcon})(({theme:n})=>({willChange:"transform",transition:n.transitions.create("transform"),transform:"rotate(0deg)"})),rx=b.forwardRef(function(e,t){const r=Ht(),o=Ce(),i=Se({props:e,name:"MuiPickersCalendarHeader"}),{slots:s,slotProps:a,currentMonth:l,disabled:c,disableFuture:d,disablePast:u,maxDate:p,minDate:h,onMonthChange:f,onViewChange:m,view:g,reduceAnimations:x,views:v,labelId:k,className:w,timezone:D,format:E=`${o.formats.month} ${o.formats.year}`}=i,P=me(i,Jy),M=i,R=Zy(i),F=(s==null?void 0:s.switchViewButton)??tx,N=be({elementType:F,externalSlotProps:a==null?void 0:a.switchViewButton,additionalProps:{size:"small","aria-label":r.calendarViewSwitchingButtonAriaLabel(g)},ownerState:M,className:R.switchViewButton}),V=(s==null?void 0:s.switchViewIcon)??nx,$=be({elementType:V,externalSlotProps:a==null?void 0:a.switchViewIcon,ownerState:M,className:R.switchViewIcon}),T=me($,Gy),S=()=>f(o.addMonths(l,1),"left"),O=()=>f(o.addMonths(l,-1),"right"),B=sm(l,{disableFuture:d,maxDate:p,timezone:D}),L=am(l,{disablePast:u,minDate:h,timezone:D}),_=()=>{if(!(v.length===1||!m||c))if(v.length===2)m(v.find(J=>J!==g)||v[0]);else{const J=v.indexOf(g)!==0?0:1;m(v[J])}};if(v.length===1&&v[0]==="year")return null;const U=o.formatByString(l,E);return y.jsxs(Xy,C({},P,{ownerState:M,className:Pe(w,R.root),ref:t,children:[y.jsxs(Qy,{role:"presentation",onClick:_,ownerState:M,"aria-live":"polite",className:R.labelContainer,children:[y.jsx(dd,{reduceAnimations:x,transKey:U,children:y.jsx(ex,{id:k,ownerState:M,className:R.label,children:U})}),v.length>1&&!c&&y.jsx(F,C({},N,{children:y.jsx(V,C({},T))}))]}),y.jsx(Go,{in:g==="day",children:y.jsx(tm,{slots:s,slotProps:a,onGoToPrevious:O,isPreviousDisabled:L,previousLabel:r.previousMonth,onGoToNext:S,isNextDisabled:B,nextLabel:r.nextMonth})})]}))}),ox="@media (prefers-reduced-motion: reduce)",ir=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),_a=ir&&ir[1]?parseInt(ir[1],10):null,Ha=ir&&ir[2]?parseInt(ir[2],10):null,ix=_a&&_a<10||Ha&&Ha<13||!1,pd=()=>Dc(ox,{defaultMatches:!1})||ix,sx=n=>Ie("MuiDateCalendar",n);Ne("MuiDateCalendar",["root","viewTransitionContainer"]);const ax=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],lx=n=>{const{classes:e}=n;return Ae({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},sx,e)};function cx(n,e){const t=Ce(),r=Zr(),o=pd(),i=Se({props:n,name:e});return C({},i,{loading:i.loading??!1,disablePast:i.disablePast??!1,disableFuture:i.disableFuture??!1,openTo:i.openTo??"day",views:i.views??["year","day"],reduceAnimations:i.reduceAnimations??o,renderLoading:i.renderLoading??(()=>y.jsx("span",{children:"..."})),minDate:xt(t,i.minDate,r.minDate),maxDate:xt(t,i.maxDate,r.maxDate)})}const dx=ce(cm,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"flex",flexDirection:"column",height:Es}),ux=ce(dd,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(n,e)=>e.viewTransitionContainer})({}),px=b.forwardRef(function(e,t){const r=Ce(),o=Gr(),i=cx(e,"MuiDateCalendar"),{autoFocus:s,onViewChange:a,value:l,defaultValue:c,referenceDate:d,disableFuture:u,disablePast:p,onChange:h,onYearChange:f,onMonthChange:m,reduceAnimations:g,shouldDisableDate:x,shouldDisableMonth:v,shouldDisableYear:k,view:w,views:D,openTo:E,className:P,disabled:M,readOnly:R,minDate:F,maxDate:N,disableHighlightToday:V,focusedView:$,onFocusedViewChange:T,showDaysOutsideCurrentMonth:S,fixedWeekNumber:O,dayOfWeekFormatter:B,slots:L,slotProps:_,loading:U,renderLoading:J,displayWeekNumber:G,yearsOrder:de,yearsPerRow:K,monthsPerRow:z,timezone:Q}=i,Z=me(i,ax),{value:H,handleValueChange:ne,timezone:se}=Ns({name:"DateCalendar",timezone:Q,value:l,defaultValue:c,onChange:h,valueManager:Nt}),{view:te,setView:j,focusedView:A,setFocusedView:Y,goToNextView:q,setValueAndGoToNextView:X}=_c({view:w,views:D,openTo:E,onChange:ne,onViewChange:a,autoFocus:s,focusedView:$,onFocusedViewChange:T}),{referenceDate:oe,calendarState:ee,changeFocusedDay:fe,changeMonth:ve,handleChangeMonth:bt,isDateDisabled:Ut,onMonthSwitchingAnimationEnd:br}=Qg({value:H,referenceDate:d,reduceAnimations:g,onMonthChange:m,minDate:F,maxDate:N,shouldDisableDate:x,disablePast:p,disableFuture:u,timezone:se}),re=M&&H||F,pe=M&&H||N,Me=`${o}-grid-label`,Te=A!==null,Ye=(L==null?void 0:L.calendarHeader)??rx,hn=be({elementType:Ye,externalSlotProps:_==null?void 0:_.calendarHeader,additionalProps:{views:D,view:te,currentMonth:ee.currentMonth,onViewChange:j,onMonthChange:(we,Tt)=>bt({newMonth:we,direction:Tt}),minDate:re,maxDate:pe,disabled:M,disablePast:p,disableFuture:u,reduceAnimations:g,timezone:se,labelId:Me},ownerState:i}),qt=le(we=>{const Tt=r.startOfMonth(we),Cr=r.endOfMonth(we),Yt=Ut(we)?Rr({utils:r,date:we,minDate:r.isBefore(F,Tt)?Tt:F,maxDate:r.isAfter(N,Cr)?Cr:N,disablePast:p,disableFuture:u,isDateDisabled:Ut,timezone:se}):we;Yt?(X(Yt,"finish"),m==null||m(Tt)):(q(),ve(Tt)),fe(Yt,!0)}),kr=le(we=>{const Tt=r.startOfYear(we),Cr=r.endOfYear(we),Yt=Ut(we)?Rr({utils:r,date:we,minDate:r.isBefore(F,Tt)?Tt:F,maxDate:r.isAfter(N,Cr)?Cr:N,disablePast:p,disableFuture:u,isDateDisabled:Ut,timezone:se}):we;Yt?(X(Yt,"finish"),f==null||f(Yt)):(q(),ve(Tt)),fe(Yt,!0)}),wr=le(we=>ne(we&&Io(r,we,H??oe),"finish",te));b.useEffect(()=>{H!=null&&r.isValid(H)&&ve(H)},[H]);const mn=i,gn=lx(mn),yn={disablePast:p,disableFuture:u,maxDate:N,minDate:F},xn={disableHighlightToday:V,readOnly:R,disabled:M,timezone:se,gridLabelId:Me,slots:L,slotProps:_},vn=b.useRef(te);b.useEffect(()=>{vn.current!==te&&(A===vn.current&&Y(te,!0),vn.current=te)},[A,Y,te]);const Sr=b.useMemo(()=>[H],[H]);return y.jsxs(dx,C({ref:t,className:Pe(gn.root,P),ownerState:mn},Z,{children:[y.jsx(Ye,C({},hn,{slots:L,slotProps:_})),y.jsx(ux,{reduceAnimations:g,className:gn.viewTransitionContainer,transKey:te,ownerState:mn,children:y.jsxs("div",{children:[te==="year"&&y.jsx(qy,C({},yn,xn,{value:H,onChange:kr,shouldDisableYear:k,hasFocus:Te,onFocusedViewChange:we=>Y("year",we),yearsOrder:de,yearsPerRow:K,referenceDate:oe})),te==="month"&&y.jsx(Ry,C({},yn,xn,{hasFocus:Te,className:P,value:H,onChange:qt,shouldDisableMonth:v,onFocusedViewChange:we=>Y("month",we),monthsPerRow:z,referenceDate:oe})),te==="day"&&y.jsx(wy,C({},ee,yn,xn,{onMonthSwitchingAnimationEnd:br,onFocusedDayChange:fe,reduceAnimations:g,selectedDays:Sr,onSelectedDaysChange:wr,shouldDisableDate:x,shouldDisableMonth:v,shouldDisableYear:k,hasFocus:Te,onFocusedViewChange:we=>Y("day",we),showDaysOutsideCurrentMonth:S,fixedWeekNumber:O,dayOfWeekFormatter:B,displayWeekNumber:G,loading:U,renderLoading:J}))]})})]}))});function fx(n){return Ie("MuiPickersToolbar",n)}Ne("MuiPickersToolbar",["root","content"]);const hx=["children","className","toolbarTitle","hidden","titleId","isLandscape","classes","landscapeDirection"],mx=n=>{const{classes:e,isLandscape:t}=n;return Ae({root:["root"],content:["content"],penIconButton:["penIconButton",t&&"penIconButtonLandscape"]},fx,e)},gx=ce("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:n.spacing(2,3),variants:[{props:{isLandscape:!0},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),yx=ce("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(n,e)=>e.content})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{isLandscape:!0},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{isLandscape:!0,landscapeDirection:"row"},style:{flexDirection:"row"}}]}),xx=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersToolbar"}),{children:o,className:i,toolbarTitle:s,hidden:a,titleId:l}=r,c=me(r,hx),d=r,u=mx(d);return a?null:y.jsxs(gx,C({ref:t,className:Pe(u.root,i),ownerState:d},c,{children:[y.jsx(nt,{color:"text.secondary",variant:"overline",id:l,children:s}),y.jsx(yx,{className:u.content,ownerState:d,children:o})]}))});function vx(n){return Ie("MuiDatePickerToolbar",n)}Ne("MuiDatePickerToolbar",["root","title"]);const bx=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className","onViewChange","view"],kx=n=>{const{classes:e}=n;return Ae({root:["root"],title:["title"]},vx,e)},wx=ce(xx,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Sx=ce(nt,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(n,e)=>e.title})({variants:[{props:{isLandscape:!0},style:{margin:"auto 16px auto auto"}}]}),Cx=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiDatePickerToolbar"}),{value:o,isLandscape:i,toolbarFormat:s,toolbarPlaceholder:a="",views:l,className:c}=r,d=me(r,bx),u=Ce(),p=Ht(),h=kx(r),f=b.useMemo(()=>{if(!o)return a;const g=As(u,{format:s,views:l},!0);return u.formatByString(o,g)},[o,s,a,u,l]),m=r;return y.jsx(wx,C({ref:t,toolbarTitle:p.datePickerToolbarTitle,isLandscape:i,className:Pe(h.root,c)},d,{children:y.jsx(Sx,{variant:"h4",align:i?"left":"center",ownerState:m,className:h.title,children:f})}))});function fd(n,e){const t=Ce(),r=Zr(),o=Se({props:n,name:e}),i=b.useMemo(()=>{var s;return((s=o.localeText)==null?void 0:s.toolbarTitle)==null?o.localeText:C({},o.localeText,{datePickerToolbarTitle:o.localeText.toolbarTitle})},[o.localeText]);return C({},o,{localeText:i},nm({views:o.views,openTo:o.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:o.disableFuture??!1,disablePast:o.disablePast??!1,minDate:xt(t,o.minDate,r.minDate),maxDate:xt(t,o.maxDate,r.maxDate),slots:C({toolbar:Cx},o.slots)})}function Mx(n){return Ie("MuiPickersPopper",n)}Ne("MuiPickersPopper",["root","paper"]);const Dx=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Tx=n=>{const{classes:e}=n;return Ae({root:["root"],paper:["paper"]},Mx,e)},Ox=ce(sf,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(n,e)=>e.root})(({theme:n})=>({zIndex:n.zIndex.modal})),Ex=ce(Up,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(n,e)=>e.paper})({outline:0,transformOrigin:"top center",variants:[{props:({placement:n})=>["top","top-start","top-end"].includes(n),style:{transformOrigin:"bottom center"}}]});function Px(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function Ax(n,e){const t=b.useRef(!1),r=b.useRef(!1),o=b.useRef(null),i=b.useRef(!1);b.useEffect(()=>{if(!n)return;function l(){i.current=!0}return document.addEventListener("mousedown",l,!0),document.addEventListener("touchstart",l,!0),()=>{document.removeEventListener("mousedown",l,!0),document.removeEventListener("touchstart",l,!0),i.current=!1}},[n]);const s=le(l=>{if(!i.current)return;const c=r.current;r.current=!1;const d=bi(o.current);if(!o.current||"clientX"in l&&Px(l,d))return;if(t.current){t.current=!1;return}let u;l.composedPath?u=l.composedPath().indexOf(o.current)>-1:u=!d.documentElement.contains(l.target)||o.current.contains(l.target),!u&&!c&&e(l)}),a=()=>{r.current=!0};return b.useEffect(()=>{if(n){const l=bi(o.current),c=()=>{t.current=!0};return l.addEventListener("touchstart",s),l.addEventListener("touchmove",c),()=>{l.removeEventListener("touchstart",s),l.removeEventListener("touchmove",c)}}},[n,s]),b.useEffect(()=>{if(n){const l=bi(o.current);return l.addEventListener("click",s),()=>{l.removeEventListener("click",s),r.current=!1}}},[n,s]),[o,a,a]}const Ix=b.forwardRef((n,e)=>{const{PaperComponent:t,popperPlacement:r,ownerState:o,children:i,paperSlotProps:s,paperClasses:a,onPaperClick:l,onPaperTouchStart:c}=n,d=me(n,Dx),u=C({},o,{placement:r}),p=be({elementType:t,externalSlotProps:s,additionalProps:{tabIndex:-1,elevation:8,ref:e},className:a,ownerState:u});return y.jsx(t,C({},d,p,{onClick:h=>{var f;l(h),(f=p.onClick)==null||f.call(p,h)},onTouchStart:h=>{var f;c(h),(f=p.onTouchStart)==null||f.call(p,h)},ownerState:u,children:i}))});function Nx(n){const e=Se({props:n,name:"MuiPickersPopper"}),{anchorEl:t,children:r,containerRef:o=null,shouldRestoreFocus:i,onBlur:s,onDismiss:a,open:l,role:c,placement:d,slots:u,slotProps:p,reduceAnimations:h}=e;b.useEffect(()=>{function S(O){l&&O.key==="Escape"&&a()}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[a,l]);const f=b.useRef(null);b.useEffect(()=>{c==="tooltip"||i&&!i()||(l?f.current=at(document):f.current&&f.current instanceof HTMLElement&&setTimeout(()=>{f.current instanceof HTMLElement&&f.current.focus()}))},[l,c,i]);const[m,g,x]=Ax(l,s??a),v=b.useRef(null),k=ct(v,o),w=ct(k,m),D=e,E=Tx(D),P=pd(),M=h??P,R=S=>{S.key==="Escape"&&(S.stopPropagation(),a())},F=(u==null?void 0:u.desktopTransition)??M?Go:zp,N=(u==null?void 0:u.desktopTrapFocus)??_p,V=(u==null?void 0:u.desktopPaper)??Ex,$=(u==null?void 0:u.popper)??Ox,T=be({elementType:$,externalSlotProps:p==null?void 0:p.popper,additionalProps:{transition:!0,role:c,open:l,anchorEl:t,placement:d,onKeyDown:R},className:E.root,ownerState:e});return y.jsx($,C({},T,{children:({TransitionProps:S,placement:O})=>y.jsx(N,C({open:l,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:c==="tooltip",isEnabled:()=>!0},p==null?void 0:p.desktopTrapFocus,{children:y.jsx(F,C({},S,p==null?void 0:p.desktopTransition,{children:y.jsx(Ix,{PaperComponent:V,ownerState:D,popperPlacement:O,ref:w,onPaperClick:g,onPaperTouchStart:x,paperClasses:E.paper,paperSlotProps:p==null?void 0:p.desktopPaper,children:r})}))}))}))}const Rx=({open:n,onOpen:e,onClose:t})=>{const r=b.useRef(typeof n=="boolean").current,[o,i]=b.useState(!1);b.useEffect(()=>{if(r){if(typeof n!="boolean")throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");i(n)}},[r,n]);const s=b.useCallback(a=>{r||i(a),a&&e&&e(),!a&&t&&t()},[r,e,t]);return{isOpen:o,setIsOpen:s}},Fx=n=>{const{action:e,hasChanged:t,dateState:r,isControlled:o}=n,i=!o&&!r.hasBeenModifiedSinceMount;return e.name==="setValueFromField"?!0:e.name==="setValueFromAction"?i&&["accept","today","clear"].includes(e.pickerAction)?!0:t(r.lastPublishedValue):e.name==="setValueFromView"&&e.selectionState!=="shallow"||e.name==="setValueFromShortcut"?i?!0:t(r.lastPublishedValue):!1},jx=n=>{const{action:e,hasChanged:t,dateState:r,isControlled:o,closeOnSelect:i}=n,s=!o&&!r.hasBeenModifiedSinceMount;return e.name==="setValueFromAction"?s&&["accept","today","clear"].includes(e.pickerAction)?!0:t(r.lastCommittedValue):e.name==="setValueFromView"&&e.selectionState==="finish"&&i?s?!0:t(r.lastCommittedValue):e.name==="setValueFromShortcut"?e.changeImportance==="accept"&&t(r.lastCommittedValue):!1},Lx=n=>{const{action:e,closeOnSelect:t}=n;return e.name==="setValueFromAction"?!0:e.name==="setValueFromView"?e.selectionState==="finish"&&t:e.name==="setValueFromShortcut"?e.changeImportance==="accept":!1},Vx=({props:n,valueManager:e,valueType:t,wrapperVariant:r,validator:o})=>{const{onAccept:i,onChange:s,value:a,defaultValue:l,closeOnSelect:c=r==="desktop",timezone:d}=n,{current:u}=b.useRef(l),{current:p}=b.useRef(a!==void 0),h=Ce(),f=Hn(),{isOpen:m,setIsOpen:g}=Rx(n),{timezone:x,value:v,handleValueChange:k}=Is({timezone:d,value:a,defaultValue:u,onChange:s,valueManager:e}),[w,D]=b.useState(()=>{let K;return v!==void 0?K=v:u!==void 0?K=u:K=e.emptyValue,{draft:K,lastPublishedValue:K,lastCommittedValue:K,lastControlledValue:v,hasBeenModifiedSinceMount:!1}}),{getValidationErrorForNewValue:E}=ed({props:n,validator:o,timezone:x,value:w.draft,onError:n.onError}),P=le(K=>{const z={action:K,dateState:w,hasChanged:te=>!e.areValuesEqual(h,K.value,te),isControlled:p,closeOnSelect:c},Q=Fx(z),Z=jx(z),H=Lx(z);D(te=>C({},te,{draft:K.value,lastPublishedValue:Q?K.value:te.lastPublishedValue,lastCommittedValue:Z?K.value:te.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let ne=null;const se=()=>(ne||(ne={validationError:K.name==="setValueFromField"?K.context.validationError:E(K.value)},K.name==="setValueFromShortcut"&&(ne.shortcut=K.shortcut)),ne);Q&&k(K.value,se()),Z&&i&&i(K.value,se()),H&&g(!1)});if(v!==void 0&&(w.lastControlledValue===void 0||!e.areValuesEqual(h,w.lastControlledValue,v))){const K=e.areValuesEqual(h,w.draft,v);D(z=>C({},z,{lastControlledValue:v},K?{}:{lastCommittedValue:v,lastPublishedValue:v,draft:v,hasBeenModifiedSinceMount:!0}))}const M=le(()=>{P({value:e.emptyValue,name:"setValueFromAction",pickerAction:"clear"})}),R=le(()=>{P({value:w.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})}),F=le(()=>{P({value:w.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})}),N=le(()=>{P({value:w.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})}),V=le(()=>{P({value:e.getTodayValue(h,x,t),name:"setValueFromAction",pickerAction:"today"})}),$=le(K=>{K.preventDefault(),g(!0)}),T=le(K=>{K==null||K.preventDefault(),g(!1)}),S=le((K,z="partial")=>P({name:"setValueFromView",value:K,selectionState:z})),O=le((K,z,Q)=>P({name:"setValueFromShortcut",value:K,changeImportance:z,shortcut:Q})),B=le((K,z)=>P({name:"setValueFromField",value:K,context:z})),L={onClear:M,onAccept:R,onDismiss:F,onCancel:N,onSetToday:V,onOpen:$,onClose:T},_={value:w.draft,onChange:B},U=b.useMemo(()=>e.cleanValue(h,w.draft),[h,e,w.draft]),J={value:U,onChange:S,onClose:T,open:m},de=C({},L,{value:U,onChange:S,onSelectShortcut:O,isValid:K=>{const z=o({adapter:f,value:K,timezone:x,props:n});return!e.hasError(z)}});return{open:m,fieldProps:_,viewProps:J,layoutProps:de,actions:L}},$x=["className","sx"],Bx=({props:n,propsFromPickerValue:e,additionalViewProps:t,autoFocusView:r,rendererInterceptor:o,fieldRef:i})=>{const{onChange:s,open:a,onClose:l}=e,{view:c,views:d,openTo:u,onViewChange:p,viewRenderers:h,timezone:f}=n,m=me(n,$x),{view:g,setView:x,defaultView:v,focusedView:k,setFocusedView:w,setValueAndGoToNextView:D}=_c({view:c,views:d,openTo:u,onChange:s,onViewChange:p,autoFocus:r}),{hasUIView:E,viewModeLookup:P}=b.useMemo(()=>d.reduce((T,S)=>{let O;return h[S]!=null?O="UI":O="field",T.viewModeLookup[S]=O,O==="UI"&&(T.hasUIView=!0),T},{hasUIView:!1,viewModeLookup:{}}),[h,d]),M=b.useMemo(()=>d.reduce((T,S)=>h[S]!=null&&om(S)?T+1:T,0),[h,d]),R=P[g],F=le(()=>R==="UI"),[N,V]=b.useState(R==="UI"?g:null);return N!==g&&P[g]==="UI"&&V(g),zt(()=>{R==="field"&&a&&(l(),setTimeout(()=>{var T,S;(T=i==null?void 0:i.current)==null||T.setSelectedSections(g),(S=i==null?void 0:i.current)==null||S.focusField(g)}))},[g]),zt(()=>{if(!a)return;let T=g;R==="field"&&N!=null&&(T=N),T!==v&&P[T]==="UI"&&P[v]==="UI"&&(T=v),T!==g&&x(T),w(T,!0)},[a]),{hasUIView:E,shouldRestoreFocus:F,layoutProps:{views:d,view:N,onViewChange:x},renderCurrentView:()=>{if(N==null)return null;const T=h[N];if(T==null)return null;const S=C({},m,t,e,{views:d,timezone:f,onChange:D,view:N,onViewChange:x,focusedView:k,onFocusedViewChange:w,showViewSwitcher:M>1,timeViewsCount:M});return o?o(h,N,S):T(S)}}};function Wa(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}const zx=(n,e)=>{const[t,r]=b.useState(Wa);return zt(()=>{const i=()=>{r(Wa())};return window.addEventListener("orientationchange",i),()=>{window.removeEventListener("orientationchange",i)}},[]),Gm(n,["hours","minutes","seconds"])?!1:(e||t)==="landscape"},_x=({props:n,propsFromPickerValue:e,propsFromPickerViews:t,wrapperVariant:r})=>{const{orientation:o}=n,i=zx(t.views,o),s=_t();return{layoutProps:C({},t,e,{isLandscape:i,isRtl:s,wrapperVariant:r,disabled:n.disabled,readOnly:n.readOnly})}},hd=({props:n,valueManager:e,valueType:t,wrapperVariant:r,additionalViewProps:o,validator:i,autoFocusView:s,rendererInterceptor:a,fieldRef:l})=>{const c=Vx({props:n,valueManager:e,valueType:t,wrapperVariant:r,validator:i}),d=Bx({props:n,additionalViewProps:o,autoFocusView:s,fieldRef:l,propsFromPickerValue:c.viewProps,rendererInterceptor:a}),u=_x({props:n,wrapperVariant:r,propsFromPickerValue:c.layoutProps,propsFromPickerViews:d.layoutProps});return{open:c.open,actions:c.actions,fieldProps:c.fieldProps,renderCurrentView:d.renderCurrentView,hasUIView:d.hasUIView,shouldRestoreFocus:d.shouldRestoreFocus,layoutProps:u.layoutProps}};function md(n){return Ie("MuiPickersLayout",n)}const Sn=Ne("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Hx=["onAccept","onClear","onCancel","onSetToday","actions"];function Wx(n){const{onAccept:e,onClear:t,onCancel:r,onSetToday:o,actions:i}=n,s=me(n,Hx),a=Ht();if(i==null||i.length===0)return null;const l=i==null?void 0:i.map(c=>{switch(c){case"clear":return y.jsx(pt,{onClick:t,children:a.clearButtonLabel},c);case"cancel":return y.jsx(pt,{onClick:r,children:a.cancelButtonLabel},c);case"accept":return y.jsx(pt,{onClick:e,children:a.okButtonLabel},c);case"today":return y.jsx(pt,{onClick:o,children:a.todayButtonLabel},c);default:return null}});return y.jsx(Ji,C({},s,{children:l}))}const Ux=["items","changeImportance","isLandscape","onChange","isValid"],qx=["getValue"];function Yx(n){const{items:e,changeImportance:t="accept",onChange:r,isValid:o}=n,i=me(n,Ux);if(e==null||e.length===0)return null;const s=e.map(a=>{let{getValue:l}=a,c=me(a,qx);const d=l({isValid:o});return C({},c,{label:c.label,onClick:()=>{r(d,t,c)},disabled:!o(d)})});return y.jsx(of,C({dense:!0,sx:[{maxHeight:Es,maxWidth:200,overflow:"auto"},...Array.isArray(i.sx)?i.sx:[i.sx]]},i,{children:s.map(a=>y.jsx(af,{children:y.jsx(Mc,C({},a))},a.id??a.label))}))}function Kx(n){return n.view!==null}const Jx=n=>{const{classes:e,isLandscape:t}=n;return Ae({root:["root",t&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},md,e)},Gx=n=>{const{wrapperVariant:e,onAccept:t,onClear:r,onCancel:o,onSetToday:i,view:s,views:a,onViewChange:l,value:c,onChange:d,onSelectShortcut:u,isValid:p,isLandscape:h,disabled:f,readOnly:m,children:g,slots:x,slotProps:v}=n,k=Jx(n),w=(x==null?void 0:x.actionBar)??Wx,D=be({elementType:w,externalSlotProps:v==null?void 0:v.actionBar,additionalProps:{onAccept:t,onClear:r,onCancel:o,onSetToday:i,actions:e==="desktop"?[]:["cancel","accept"]},className:k.actionBar,ownerState:C({},n,{wrapperVariant:e})}),E=y.jsx(w,C({},D)),P=x==null?void 0:x.toolbar,M=be({elementType:P,externalSlotProps:v==null?void 0:v.toolbar,additionalProps:{isLandscape:h,onChange:d,value:c,view:s,onViewChange:l,views:a,disabled:f,readOnly:m},className:k.toolbar,ownerState:C({},n,{wrapperVariant:e})}),R=Kx(M)&&P?y.jsx(P,C({},M)):null,F=g,N=x==null?void 0:x.tabs,V=s&&N?y.jsx(N,C({view:s,onViewChange:l,className:k.tabs},v==null?void 0:v.tabs)):null,$=(x==null?void 0:x.shortcuts)??Yx,T=be({elementType:$,externalSlotProps:v==null?void 0:v.shortcuts,additionalProps:{isValid:p,isLandscape:h,onChange:u},className:k.shortcuts,ownerState:{isValid:p,isLandscape:h,onChange:u,wrapperVariant:e}}),S=s&&$?y.jsx($,C({},T)):null;return{toolbar:R,content:F,tabs:V,actionBar:E,shortcuts:S}},Zx=n=>{const{isLandscape:e,classes:t}=n;return Ae({root:["root",e&&"landscape"],contentWrapper:["contentWrapper"]},md,t)},Xx=ce("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${Sn.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{isLandscape:!0},style:{[`& .${Sn.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${Sn.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{isLandscape:!0,isRtl:!0},style:{[`& .${Sn.toolbar}`]:{gridColumn:3}}},{props:{isLandscape:!1},style:{[`& .${Sn.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${Sn.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{isLandscape:!1,isRtl:!0},style:{[`& .${Sn.shortcuts}`]:{gridColumn:3}}}]}),Qx=ce("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(n,e)=>e.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),gd=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiPickersLayout"}),{toolbar:o,content:i,tabs:s,actionBar:a,shortcuts:l}=Gx(r),{sx:c,className:d,isLandscape:u,wrapperVariant:p}=r,h=Zx(r);return y.jsxs(Xx,{ref:t,sx:c,className:Pe(d,h.root),ownerState:r,children:[u?l:o,u?o:l,y.jsx(Qx,{className:h.contentWrapper,children:p==="desktop"?y.jsxs(b.Fragment,{children:[i,s]}):y.jsxs(b.Fragment,{children:[s,i]})}),a]})}),ev=["props","getOpenDialogAriaText"],tv=["ownerState"],nv=["ownerState"],rv=n=>{var Y;let{props:e,getOpenDialogAriaText:t}=n,r=me(n,ev);const{slots:o,slotProps:i,className:s,sx:a,format:l,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:u,onSelectedSectionsChange:p,timezone:h,name:f,label:m,inputRef:g,readOnly:x,disabled:v,autoFocus:k,localeText:w,reduceAnimations:D}=e,E=b.useRef(null),P=b.useRef(null),M=Gr(),R=((Y=i==null?void 0:i.toolbar)==null?void 0:Y.hidden)??!1,{open:F,actions:N,hasUIView:V,layoutProps:$,renderCurrentView:T,shouldRestoreFocus:S,fieldProps:O}=hd(C({},r,{props:e,fieldRef:P,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),B={open:F},L=o.inputAdornment??Tc,_=be({elementType:L,externalSlotProps:i==null?void 0:i.inputAdornment,additionalProps:{position:"end"},ownerState:e}),U=me(_,tv),J=o.openPickerButton??Zo,G=be({elementType:J,externalSlotProps:i==null?void 0:i.openPickerButton,additionalProps:{disabled:v||x,onClick:F?N.onClose:N.onOpen,"aria-label":t(O.value),edge:U.position},ownerState:e}),de=me(G,nv),K=o.openPickerIcon,z=be({elementType:K,externalSlotProps:i==null?void 0:i.openPickerIcon,ownerState:B}),Q=o.field,Z=be({elementType:Q,externalSlotProps:i==null?void 0:i.field,additionalProps:C({},O,R&&{id:M},{readOnly:x,disabled:v,className:s,sx:a,format:l,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:u,onSelectedSectionsChange:p,timezone:h,label:m,name:f,autoFocus:k&&!e.open,focused:F?!0:void 0},g?{inputRef:g}:{}),ownerState:e});V&&(Z.InputProps=C({},Z.InputProps,{ref:E},!e.disableOpenPicker&&{[`${U.position}Adornment`]:y.jsx(L,C({},U,{children:y.jsx(J,C({},de,{children:y.jsx(K,C({},z))}))}))}));const H=C({textField:o.textField,clearIcon:o.clearIcon,clearButton:o.clearButton},Z.slots),ne=o.layout??gd;let se=M;R&&(m?se=`${M}-label`:se=void 0);const te=C({},i,{toolbar:C({},i==null?void 0:i.toolbar,{titleId:M}),popper:C({"aria-labelledby":se},i==null?void 0:i.popper)}),j=ct(P,Z.unstableFieldRef);return{renderPicker:()=>y.jsxs(Ao,{localeText:w,children:[y.jsx(Q,C({},Z,{slots:H,slotProps:te,unstableFieldRef:j})),y.jsx(Nx,C({role:"dialog",placement:"bottom-start",anchorEl:E.current},N,{open:F,slots:o,slotProps:te,shouldRestoreFocus:S,reduceAnimations:D,children:y.jsx(ne,C({},$,te==null?void 0:te.layout,{slots:o,slotProps:te,children:T()}))}))]})}},sr=({view:n,onViewChange:e,views:t,focusedView:r,onFocusedViewChange:o,value:i,defaultValue:s,referenceDate:a,onChange:l,className:c,classes:d,disableFuture:u,disablePast:p,minDate:h,maxDate:f,shouldDisableDate:m,shouldDisableMonth:g,shouldDisableYear:x,reduceAnimations:v,onMonthChange:k,monthsPerRow:w,onYearChange:D,yearsOrder:E,yearsPerRow:P,slots:M,slotProps:R,loading:F,renderLoading:N,disableHighlightToday:V,readOnly:$,disabled:T,showDaysOutsideCurrentMonth:S,dayOfWeekFormatter:O,sx:B,autoFocus:L,fixedWeekNumber:_,displayWeekNumber:U,timezone:J})=>y.jsx(px,{view:n,onViewChange:e,views:t.filter(Ra),focusedView:r&&Ra(r)?r:null,onFocusedViewChange:o,value:i,defaultValue:s,referenceDate:a,onChange:l,className:c,classes:d,disableFuture:u,disablePast:p,minDate:h,maxDate:f,shouldDisableDate:m,shouldDisableMonth:g,shouldDisableYear:x,reduceAnimations:v,onMonthChange:k,monthsPerRow:w,onYearChange:D,yearsOrder:E,yearsPerRow:P,slots:M,slotProps:R,loading:F,renderLoading:N,disableHighlightToday:V,readOnly:$,disabled:T,showDaysOutsideCurrentMonth:S,dayOfWeekFormatter:O,sx:B,autoFocus:L,fixedWeekNumber:_,displayWeekNumber:U,timezone:J}),yd=b.forwardRef(function(e,t){var c,d;const r=Ht(),o=Ce(),i=fd(e,"MuiDesktopDatePicker"),s=C({day:sr,month:sr,year:sr},i.viewRenderers),a=C({},i,{viewRenderers:s,format:As(o,i,!1),yearsPerRow:i.yearsPerRow??4,slots:C({openPickerIcon:qh,field:ld},i.slots),slotProps:C({},i.slotProps,{field:u=>{var p;return C({},Os((p=i.slotProps)==null?void 0:p.field,u),Qc(i),{ref:t})},toolbar:C({hidden:!0},(c=i.slotProps)==null?void 0:c.toolbar)})}),{renderPicker:l}=rv({props:a,valueManager:Nt,valueType:"date",getOpenDialogAriaText:Bc({utils:o,formatKey:"fullDate",contextTranslation:r.openDatePickerDialogue,propsTranslation:(d=a.localeText)==null?void 0:d.openDatePickerDialogue}),validator:Xr});return l()});yd.propTypes={autoFocus:I.bool,className:I.string,closeOnSelect:I.bool,dayOfWeekFormatter:I.func,defaultValue:I.object,disabled:I.bool,disableFuture:I.bool,disableHighlightToday:I.bool,disableOpenPicker:I.bool,disablePast:I.bool,displayWeekNumber:I.bool,enableAccessibleFieldDOMStructure:I.any,fixedWeekNumber:I.number,format:I.string,formatDensity:I.oneOf(["dense","spacious"]),inputRef:$c,label:I.node,loading:I.bool,localeText:I.object,maxDate:I.object,minDate:I.object,monthsPerRow:I.oneOf([3,4]),name:I.string,onAccept:I.func,onChange:I.func,onClose:I.func,onError:I.func,onMonthChange:I.func,onOpen:I.func,onSelectedSectionsChange:I.func,onViewChange:I.func,onYearChange:I.func,open:I.bool,openTo:I.oneOf(["day","month","year"]),orientation:I.oneOf(["landscape","portrait"]),readOnly:I.bool,reduceAnimations:I.bool,referenceDate:I.object,renderLoading:I.func,selectedSections:I.oneOfType([I.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),I.number]),shouldDisableDate:I.func,shouldDisableMonth:I.func,shouldDisableYear:I.func,showDaysOutsideCurrentMonth:I.bool,slotProps:I.object,slots:I.object,sx:I.oneOfType([I.arrayOf(I.oneOfType([I.func,I.object,I.bool])),I.func,I.object]),timezone:I.string,value:I.object,view:I.oneOf(["day","month","year"]),viewRenderers:I.shape({day:I.func,month:I.func,year:I.func}),views:I.arrayOf(I.oneOf(["day","month","year"]).isRequired),yearsOrder:I.oneOf(["asc","desc"]),yearsPerRow:I.oneOf([3,4])};const ov=ce(Gi)({[`& .${pa.container}`]:{outline:0},[`& .${pa.paper}`]:{outline:0,minWidth:ti}}),iv=ce(Zi)({"&:first-of-type":{padding:0}});function sv(n){const{children:e,onDismiss:t,open:r,slots:o,slotProps:i}=n,s=(o==null?void 0:o.dialog)??ov,a=(o==null?void 0:o.mobileTransition)??Go;return y.jsx(s,C({open:r,onClose:t},i==null?void 0:i.dialog,{TransitionComponent:a,TransitionProps:i==null?void 0:i.mobileTransition,PaperComponent:o==null?void 0:o.mobilePaper,PaperProps:i==null?void 0:i.mobilePaper,children:y.jsx(iv,{children:e})}))}const av=["props","getOpenDialogAriaText"],lv=n=>{var U;let{props:e,getOpenDialogAriaText:t}=n,r=me(n,av);const{slots:o,slotProps:i,className:s,sx:a,format:l,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:u,onSelectedSectionsChange:p,timezone:h,name:f,label:m,inputRef:g,readOnly:x,disabled:v,localeText:k}=e,w=b.useRef(null),D=Gr(),E=((U=i==null?void 0:i.toolbar)==null?void 0:U.hidden)??!1,{open:P,actions:M,layoutProps:R,renderCurrentView:F,fieldProps:N}=hd(C({},r,{props:e,fieldRef:w,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),V=o.field,$=be({elementType:V,externalSlotProps:i==null?void 0:i.field,additionalProps:C({},N,E&&{id:D},!(v||x)&&{onClick:M.onOpen,onKeyDown:Zm(M.onOpen)},{readOnly:x??!0,disabled:v,className:s,sx:a,format:l,formatDensity:c,enableAccessibleFieldDOMStructure:d,selectedSections:u,onSelectedSectionsChange:p,timezone:h,label:m,name:f},g?{inputRef:g}:{}),ownerState:e});$.inputProps=C({},$.inputProps,{"aria-label":t(N.value)});const T=C({textField:o.textField},$.slots),S=o.layout??gd;let O=D;E&&(m?O=`${D}-label`:O=void 0);const B=C({},i,{toolbar:C({},i==null?void 0:i.toolbar,{titleId:D}),mobilePaper:C({"aria-labelledby":O},i==null?void 0:i.mobilePaper)}),L=ct(w,$.unstableFieldRef);return{renderPicker:()=>y.jsxs(Ao,{localeText:k,children:[y.jsx(V,C({},$,{slots:T,slotProps:B,unstableFieldRef:L})),y.jsx(sv,C({},M,{open:P,slots:o,slotProps:B,children:y.jsx(S,C({},R,B==null?void 0:B.layout,{slots:o,slotProps:B,children:F()}))}))]})}},xd=b.forwardRef(function(e,t){var c,d;const r=Ht(),o=Ce(),i=fd(e,"MuiMobileDatePicker"),s=C({day:sr,month:sr,year:sr},i.viewRenderers),a=C({},i,{viewRenderers:s,format:As(o,i,!1),slots:C({field:ld},i.slots),slotProps:C({},i.slotProps,{field:u=>{var p;return C({},Os((p=i.slotProps)==null?void 0:p.field,u),Qc(i),{ref:t})},toolbar:C({hidden:!1},(c=i.slotProps)==null?void 0:c.toolbar)})}),{renderPicker:l}=lv({props:a,valueManager:Nt,valueType:"date",getOpenDialogAriaText:Bc({utils:o,formatKey:"fullDate",contextTranslation:r.openDatePickerDialogue,propsTranslation:(d=a.localeText)==null?void 0:d.openDatePickerDialogue}),validator:Xr});return l()});xd.propTypes={autoFocus:I.bool,className:I.string,closeOnSelect:I.bool,dayOfWeekFormatter:I.func,defaultValue:I.object,disabled:I.bool,disableFuture:I.bool,disableHighlightToday:I.bool,disableOpenPicker:I.bool,disablePast:I.bool,displayWeekNumber:I.bool,enableAccessibleFieldDOMStructure:I.any,fixedWeekNumber:I.number,format:I.string,formatDensity:I.oneOf(["dense","spacious"]),inputRef:$c,label:I.node,loading:I.bool,localeText:I.object,maxDate:I.object,minDate:I.object,monthsPerRow:I.oneOf([3,4]),name:I.string,onAccept:I.func,onChange:I.func,onClose:I.func,onError:I.func,onMonthChange:I.func,onOpen:I.func,onSelectedSectionsChange:I.func,onViewChange:I.func,onYearChange:I.func,open:I.bool,openTo:I.oneOf(["day","month","year"]),orientation:I.oneOf(["landscape","portrait"]),readOnly:I.bool,reduceAnimations:I.bool,referenceDate:I.object,renderLoading:I.func,selectedSections:I.oneOfType([I.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),I.number]),shouldDisableDate:I.func,shouldDisableMonth:I.func,shouldDisableYear:I.func,showDaysOutsideCurrentMonth:I.bool,slotProps:I.object,slots:I.object,sx:I.oneOfType([I.arrayOf(I.oneOfType([I.func,I.object,I.bool])),I.func,I.object]),timezone:I.string,value:I.object,view:I.oneOf(["day","month","year"]),viewRenderers:I.shape({day:I.func,month:I.func,year:I.func}),views:I.arrayOf(I.oneOf(["day","month","year"]).isRequired),yearsOrder:I.oneOf(["asc","desc"]),yearsPerRow:I.oneOf([3,4])};const cv=["desktopModeMediaQuery"],Ua=b.forwardRef(function(e,t){const r=Se({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:o=Xm}=r,i=me(r,cv);return Dc(o,{defaultMatches:!0})?y.jsx(yd,C({ref:t},i)):y.jsx(xd,C({ref:t},i))});var vo={exports:{}},dv=vo.exports,qa;function uv(){return qa||(qa=1,function(n,e){(function(t,r){n.exports=r()})(dv,function(){var t=1e3,r=6e4,o=36e5,i="millisecond",s="second",a="minute",l="hour",c="day",d="week",u="month",p="quarter",h="year",f="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var S=["th","st","nd","rd"],O=T%100;return"["+T+(S[(O-20)%10]||S[O]||S[0])+"]"}},k=function(T,S,O){var B=String(T);return!B||B.length>=S?T:""+Array(S+1-B.length).join(O)+T},w={s:k,z:function(T){var S=-T.utcOffset(),O=Math.abs(S),B=Math.floor(O/60),L=O%60;return(S<=0?"+":"-")+k(B,2,"0")+":"+k(L,2,"0")},m:function T(S,O){if(S.date()<O.date())return-T(O,S);var B=12*(O.year()-S.year())+(O.month()-S.month()),L=S.clone().add(B,u),_=O-L<0,U=S.clone().add(B+(_?-1:1),u);return+(-(B+(O-L)/(_?L-U:U-L))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:u,y:h,w:d,d:c,D:f,h:l,m:a,s,ms:i,Q:p}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},D="en",E={};E[D]=v;var P="$isDayjsObject",M=function(T){return T instanceof V||!(!T||!T[P])},R=function T(S,O,B){var L;if(!S)return D;if(typeof S=="string"){var _=S.toLowerCase();E[_]&&(L=_),O&&(E[_]=O,L=_);var U=S.split("-");if(!L&&U.length>1)return T(U[0])}else{var J=S.name;E[J]=S,L=J}return!B&&L&&(D=L),L||!B&&D},F=function(T,S){if(M(T))return T.clone();var O=typeof S=="object"?S:{};return O.date=T,O.args=arguments,new V(O)},N=w;N.l=R,N.i=M,N.w=function(T,S){return F(T,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var V=function(){function T(O){this.$L=R(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[P]=!0}var S=T.prototype;return S.parse=function(O){this.$d=function(B){var L=B.date,_=B.utc;if(L===null)return new Date(NaN);if(N.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var U=L.match(g);if(U){var J=U[2]-1||0,G=(U[7]||"0").substring(0,3);return _?new Date(Date.UTC(U[1],J,U[3]||1,U[4]||0,U[5]||0,U[6]||0,G)):new Date(U[1],J,U[3]||1,U[4]||0,U[5]||0,U[6]||0,G)}}return new Date(L)}(O),this.init()},S.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},S.$utils=function(){return N},S.isValid=function(){return this.$d.toString()!==m},S.isSame=function(O,B){var L=F(O);return this.startOf(B)<=L&&L<=this.endOf(B)},S.isAfter=function(O,B){return F(O)<this.startOf(B)},S.isBefore=function(O,B){return this.endOf(B)<F(O)},S.$g=function(O,B,L){return N.u(O)?this[B]:this.set(L,O)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(O,B){var L=this,_=!!N.u(B)||B,U=N.p(O),J=function(ne,se){var te=N.w(L.$u?Date.UTC(L.$y,se,ne):new Date(L.$y,se,ne),L);return _?te:te.endOf(c)},G=function(ne,se){return N.w(L.toDate()[ne].apply(L.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(se)),L)},de=this.$W,K=this.$M,z=this.$D,Q="set"+(this.$u?"UTC":"");switch(U){case h:return _?J(1,0):J(31,11);case u:return _?J(1,K):J(0,K+1);case d:var Z=this.$locale().weekStart||0,H=(de<Z?de+7:de)-Z;return J(_?z-H:z+(6-H),K);case c:case f:return G(Q+"Hours",0);case l:return G(Q+"Minutes",1);case a:return G(Q+"Seconds",2);case s:return G(Q+"Milliseconds",3);default:return this.clone()}},S.endOf=function(O){return this.startOf(O,!1)},S.$set=function(O,B){var L,_=N.p(O),U="set"+(this.$u?"UTC":""),J=(L={},L[c]=U+"Date",L[f]=U+"Date",L[u]=U+"Month",L[h]=U+"FullYear",L[l]=U+"Hours",L[a]=U+"Minutes",L[s]=U+"Seconds",L[i]=U+"Milliseconds",L)[_],G=_===c?this.$D+(B-this.$W):B;if(_===u||_===h){var de=this.clone().set(f,1);de.$d[J](G),de.init(),this.$d=de.set(f,Math.min(this.$D,de.daysInMonth())).$d}else J&&this.$d[J](G);return this.init(),this},S.set=function(O,B){return this.clone().$set(O,B)},S.get=function(O){return this[N.p(O)]()},S.add=function(O,B){var L,_=this;O=Number(O);var U=N.p(B),J=function(K){var z=F(_);return N.w(z.date(z.date()+Math.round(K*O)),_)};if(U===u)return this.set(u,this.$M+O);if(U===h)return this.set(h,this.$y+O);if(U===c)return J(1);if(U===d)return J(7);var G=(L={},L[a]=r,L[l]=o,L[s]=t,L)[U]||1,de=this.$d.getTime()+O*G;return N.w(de,this)},S.subtract=function(O,B){return this.add(-1*O,B)},S.format=function(O){var B=this,L=this.$locale();if(!this.isValid())return L.invalidDate||m;var _=O||"YYYY-MM-DDTHH:mm:ssZ",U=N.z(this),J=this.$H,G=this.$m,de=this.$M,K=L.weekdays,z=L.months,Q=L.meridiem,Z=function(se,te,j,A){return se&&(se[te]||se(B,_))||j[te].slice(0,A)},H=function(se){return N.s(J%12||12,se,"0")},ne=Q||function(se,te,j){var A=se<12?"AM":"PM";return j?A.toLowerCase():A};return _.replace(x,function(se,te){return te||function(j){switch(j){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return de+1;case"MM":return N.s(de+1,2,"0");case"MMM":return Z(L.monthsShort,de,z,3);case"MMMM":return Z(z,de);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return Z(L.weekdaysMin,B.$W,K,2);case"ddd":return Z(L.weekdaysShort,B.$W,K,3);case"dddd":return K[B.$W];case"H":return String(J);case"HH":return N.s(J,2,"0");case"h":return H(1);case"hh":return H(2);case"a":return ne(J,G,!0);case"A":return ne(J,G,!1);case"m":return String(G);case"mm":return N.s(G,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return U}return null}(se)||U.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(O,B,L){var _,U=this,J=N.p(B),G=F(O),de=(G.utcOffset()-this.utcOffset())*r,K=this-G,z=function(){return N.m(U,G)};switch(J){case h:_=z()/12;break;case u:_=z();break;case p:_=z()/3;break;case d:_=(K-de)/6048e5;break;case c:_=(K-de)/864e5;break;case l:_=K/o;break;case a:_=K/r;break;case s:_=K/t;break;default:_=K}return L?_:N.a(_)},S.daysInMonth=function(){return this.endOf(u).$D},S.$locale=function(){return E[this.$L]},S.locale=function(O,B){if(!O)return this.$L;var L=this.clone(),_=R(O,B,!0);return _&&(L.$L=_),L},S.clone=function(){return N.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},T}(),$=V.prototype;return F.prototype=$,[["$ms",i],["$s",s],["$m",a],["$H",l],["$W",c],["$M",u],["$y",h],["$D",f]].forEach(function(T){$[T[1]]=function(S){return this.$g(S,T[0],T[1])}}),F.extend=function(T,S){return T.$i||(T(S,V,F),T.$i=!0),F},F.locale=R,F.isDayjs=M,F.unix=function(T){return F(1e3*T)},F.en=E[D],F.Ls=E,F.p={},F})}(vo)),vo.exports}var pv=uv();const Oe=xr(pv);var bo={exports:{}},fv=bo.exports,Ya;function hv(){return Ya||(Ya=1,function(n,e){(function(t,r){n.exports=r()})(fv,function(){var t="week",r="year";return function(o,i,s){var a=i.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var d=s(this).startOf(r).add(1,r).date(c),u=s(this).endOf(t);if(d.isBefore(u))return 1}var p=s(this).startOf(r).date(c).startOf(t).subtract(1,"millisecond"),h=this.diff(p,t,!0);return h<0?s(this).startOf("week").week():Math.ceil(h)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})}(bo)),bo.exports}var mv=hv();const gv=xr(mv);var ko={exports:{}},yv=ko.exports,Ka;function xv(){return Ka||(Ka=1,function(n,e){(function(t,r){n.exports=r()})(yv,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d/,i=/\d\d/,s=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,l={},c=function(g){return(g=+g)+(g>68?1900:2e3)},d=function(g){return function(x){this[g]=+x}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(x){if(!x||x==="Z")return 0;var v=x.match(/([+-]|\d\d)/g),k=60*v[1]+(+v[2]||0);return k===0?0:v[0]==="+"?-k:k}(g)}],p=function(g){var x=l[g];return x&&(x.indexOf?x:x.s.concat(x.f))},h=function(g,x){var v,k=l.meridiem;if(k){for(var w=1;w<=24;w+=1)if(g.indexOf(k(w,0,x))>-1){v=w>12;break}}else v=g===(x?"pm":"PM");return v},f={A:[a,function(g){this.afternoon=h(g,!1)}],a:[a,function(g){this.afternoon=h(g,!0)}],Q:[o,function(g){this.month=3*(g-1)+1}],S:[o,function(g){this.milliseconds=100*+g}],SS:[i,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[s,d("seconds")],ss:[s,d("seconds")],m:[s,d("minutes")],mm:[s,d("minutes")],H:[s,d("hours")],h:[s,d("hours")],HH:[s,d("hours")],hh:[s,d("hours")],D:[s,d("day")],DD:[i,d("day")],Do:[a,function(g){var x=l.ordinal,v=g.match(/\d+/);if(this.day=v[0],x)for(var k=1;k<=31;k+=1)x(k).replace(/\[|\]/g,"")===g&&(this.day=k)}],w:[s,d("week")],ww:[i,d("week")],M:[s,d("month")],MM:[i,d("month")],MMM:[a,function(g){var x=p("months"),v=(p("monthsShort")||x.map(function(k){return k.slice(0,3)})).indexOf(g)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[a,function(g){var x=p("months").indexOf(g)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,d("year")],YY:[i,function(g){this.year=c(g)}],YYYY:[/\d{4}/,d("year")],Z:u,ZZ:u};function m(g){var x,v;x=g,v=l&&l.formats;for(var k=(g=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(F,N,V){var $=V&&V.toUpperCase();return N||v[V]||t[V]||v[$].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(T,S,O){return S||O.slice(1)})})).match(r),w=k.length,D=0;D<w;D+=1){var E=k[D],P=f[E],M=P&&P[0],R=P&&P[1];k[D]=R?{regex:M,parser:R}:E.replace(/^\[|\]$/g,"")}return function(F){for(var N={},V=0,$=0;V<w;V+=1){var T=k[V];if(typeof T=="string")$+=T.length;else{var S=T.regex,O=T.parser,B=F.slice($),L=S.exec(B)[0];O.call(N,L),F=F.replace(L,"")}}return function(_){var U=_.afternoon;if(U!==void 0){var J=_.hours;U?J<12&&(_.hours+=12):J===12&&(_.hours=0),delete _.afternoon}}(N),N}}return function(g,x,v){v.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(c=g.parseTwoDigitYear);var k=x.prototype,w=k.parse;k.parse=function(D){var E=D.date,P=D.utc,M=D.args;this.$u=P;var R=M[1];if(typeof R=="string"){var F=M[2]===!0,N=M[3]===!0,V=F||N,$=M[2];N&&($=M[2]),l=this.$locale(),!F&&$&&(l=v.Ls[$]),this.$d=function(B,L,_,U){try{if(["x","X"].indexOf(L)>-1)return new Date((L==="X"?1e3:1)*B);var J=m(L)(B),G=J.year,de=J.month,K=J.day,z=J.hours,Q=J.minutes,Z=J.seconds,H=J.milliseconds,ne=J.zone,se=J.week,te=new Date,j=K||(G||de?1:te.getDate()),A=G||te.getFullYear(),Y=0;G&&!de||(Y=de>0?de-1:te.getMonth());var q,X=z||0,oe=Q||0,ee=Z||0,fe=H||0;return ne?new Date(Date.UTC(A,Y,j,X,oe,ee,fe+60*ne.offset*1e3)):_?new Date(Date.UTC(A,Y,j,X,oe,ee,fe)):(q=new Date(A,Y,j,X,oe,ee,fe),se&&(q=U(q).week(se).toDate()),q)}catch{return new Date("")}}(E,R,P,v),this.init(),$&&$!==!0&&(this.$L=this.locale($).$L),V&&E!=this.format(R)&&(this.$d=new Date("")),l={}}else if(R instanceof Array)for(var T=R.length,S=1;S<=T;S+=1){M[1]=R[S-1];var O=v.apply(this,M);if(O.isValid()){this.$d=O.$d,this.$L=O.$L,this.init();break}S===T&&(this.$d=new Date(""))}else w.call(this,D)}}})}(ko)),ko.exports}var vv=xv();const bv=xr(vv);var wo={exports:{}},kv=wo.exports,Ja;function wv(){return Ja||(Ja=1,function(n,e){(function(t,r){n.exports=r()})(kv,function(){return function(t,r){var o=r.prototype,i=o.format;o.format=function(s){var a=this,l=this.$locale();if(!this.isValid())return i.bind(this)(s);var c=this.$utils(),d=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(u){switch(u){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),u==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),u==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),u==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return u}});return i.bind(this)(d)}}})}(wo)),wo.exports}var Sv=wv();const Cv=xr(Sv);Oe.extend(Kp);Oe.extend(gv);Oe.extend(Jp);Oe.extend(Cv);const Mv={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Dv={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},ki=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),Ga=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`),Tv=(n,e)=>e?(...t)=>n(...t).locale(e):n;class Za{constructor({locale:e,formats:t}={}){this.isMUIAdapter=!0,this.isTimezoneCompatible=!0,this.lib="dayjs",this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=Mv,this.setLocaleToValue=r=>{const o=this.getCurrentLocaleCode();return o===r.locale()?r:r.locale(o)},this.hasUTCPlugin=()=>typeof Oe.utc<"u",this.hasTimezonePlugin=()=>typeof Oe.tz<"u",this.isSame=(r,o,i)=>{const s=this.setTimezone(o,this.getTimezone(r));return r.format(i)===s.format(i)},this.cleanTimezone=r=>{switch(r){case"default":return;case"system":return Oe.tz.guess();default:return r}},this.createSystemDate=r=>{if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const o=Oe.tz.guess();return o!=="UTC"?Oe.tz(r,o):Oe(r)}return Oe(r)},this.createUTCDate=r=>{if(!this.hasUTCPlugin())throw new Error(ki);return Oe.utc(r)},this.createTZDate=(r,o)=>{if(!this.hasUTCPlugin())throw new Error(ki);if(!this.hasTimezonePlugin())throw new Error(Ga);const i=r!==void 0&&!r.endsWith("Z");return Oe(r).tz(this.cleanTimezone(o),i)},this.getLocaleFormats=()=>{const r=Oe.Ls,o=this.locale||"en";let i=r[o];return i===void 0&&(i=r.en),i.formats},this.adjustOffset=r=>{if(!this.hasTimezonePlugin())return r;const o=this.getTimezone(r);if(o!=="UTC"){const i=r.tz(this.cleanTimezone(o),!0);if(i.$offset===(r.$offset??0))return r;r.$offset=i.$offset}return r},this.date=(r,o="default")=>{if(r===null)return null;let i;return o==="UTC"?i=this.createUTCDate(r):o==="system"||o==="default"&&!this.hasTimezonePlugin()?i=this.createSystemDate(r):i=this.createTZDate(r,o),this.locale===void 0?i:i.locale(this.locale)},this.getInvalidDate=()=>Oe(new Date("Invalid date")),this.getTimezone=r=>{var o;if(this.hasTimezonePlugin()){const i=(o=r.$x)==null?void 0:o.$timezone;if(i)return i}return this.hasUTCPlugin()&&r.isUTC()?"UTC":"system"},this.setTimezone=(r,o)=>{if(this.getTimezone(r)===o)return r;if(o==="UTC"){if(!this.hasUTCPlugin())throw new Error(ki);return r.utc()}if(o==="system")return r.local();if(!this.hasTimezonePlugin()){if(o==="default")return r;throw new Error(Ga)}return Oe.tz(r,this.cleanTimezone(o))},this.toJsDate=r=>r.toDate(),this.parse=(r,o)=>r===""?null:this.dayjs(r,o,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=r=>{const o=this.getLocaleFormats(),i=s=>s.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(a,l,c)=>l||c.slice(1));return r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(s,a,l)=>{const c=l&&l.toUpperCase();return a||o[l]||i(o[c])})},this.isValid=r=>r==null?!1:r.isValid(),this.format=(r,o)=>this.formatByString(r,this.formats[o]),this.formatByString=(r,o)=>this.dayjs(r).format(o),this.formatNumber=r=>r,this.isEqual=(r,o)=>r===null&&o===null?!0:r===null||o===null?!1:r.toDate().getTime()===o.toDate().getTime(),this.isSameYear=(r,o)=>this.isSame(r,o,"YYYY"),this.isSameMonth=(r,o)=>this.isSame(r,o,"YYYY-MM"),this.isSameDay=(r,o)=>this.isSame(r,o,"YYYY-MM-DD"),this.isSameHour=(r,o)=>r.isSame(o,"hour"),this.isAfter=(r,o)=>r>o,this.isAfterYear=(r,o)=>this.hasUTCPlugin()?!this.isSameYear(r,o)&&r.utc()>o.utc():r.isAfter(o,"year"),this.isAfterDay=(r,o)=>this.hasUTCPlugin()?!this.isSameDay(r,o)&&r.utc()>o.utc():r.isAfter(o,"day"),this.isBefore=(r,o)=>r<o,this.isBeforeYear=(r,o)=>this.hasUTCPlugin()?!this.isSameYear(r,o)&&r.utc()<o.utc():r.isBefore(o,"year"),this.isBeforeDay=(r,o)=>this.hasUTCPlugin()?!this.isSameDay(r,o)&&r.utc()<o.utc():r.isBefore(o,"day"),this.isWithinRange=(r,[o,i])=>r>=o&&r<=i,this.startOfYear=r=>this.adjustOffset(r.startOf("year")),this.startOfMonth=r=>this.adjustOffset(r.startOf("month")),this.startOfWeek=r=>this.adjustOffset(this.setLocaleToValue(r).startOf("week")),this.startOfDay=r=>this.adjustOffset(r.startOf("day")),this.endOfYear=r=>this.adjustOffset(r.endOf("year")),this.endOfMonth=r=>this.adjustOffset(r.endOf("month")),this.endOfWeek=r=>this.adjustOffset(this.setLocaleToValue(r).endOf("week")),this.endOfDay=r=>this.adjustOffset(r.endOf("day")),this.addYears=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"year"):r.add(o,"year")),this.addMonths=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"month"):r.add(o,"month")),this.addWeeks=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"week"):r.add(o,"week")),this.addDays=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"day"):r.add(o,"day")),this.addHours=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"hour"):r.add(o,"hour")),this.addMinutes=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"minute"):r.add(o,"minute")),this.addSeconds=(r,o)=>this.adjustOffset(o<0?r.subtract(Math.abs(o),"second"):r.add(o,"second")),this.getYear=r=>r.year(),this.getMonth=r=>r.month(),this.getDate=r=>r.date(),this.getHours=r=>r.hour(),this.getMinutes=r=>r.minute(),this.getSeconds=r=>r.second(),this.getMilliseconds=r=>r.millisecond(),this.setYear=(r,o)=>this.adjustOffset(r.set("year",o)),this.setMonth=(r,o)=>this.adjustOffset(r.set("month",o)),this.setDate=(r,o)=>this.adjustOffset(r.set("date",o)),this.setHours=(r,o)=>this.adjustOffset(r.set("hour",o)),this.setMinutes=(r,o)=>this.adjustOffset(r.set("minute",o)),this.setSeconds=(r,o)=>this.adjustOffset(r.set("second",o)),this.setMilliseconds=(r,o)=>this.adjustOffset(r.set("millisecond",o)),this.getDaysInMonth=r=>r.daysInMonth(),this.getWeekArray=r=>{const o=this.startOfWeek(this.startOfMonth(r)),i=this.endOfWeek(this.endOfMonth(r));let s=0,a=o;const l=[];for(;a<i;){const c=Math.floor(s/7);l[c]=l[c]||[],l[c].push(a),a=this.addDays(a,1),s+=1}return l},this.getWeekNumber=r=>r.week(),this.getYearRange=([r,o])=>{const i=this.startOfYear(r),s=this.endOfYear(o),a=[];let l=i;for(;this.isBefore(l,s);)a.push(l),l=this.addYears(l,1);return a},this.dayjs=Tv(Oe,e),this.locale=e,this.formats=C({},Dv,t),Oe.extend(bv)}getDayOfWeek(e){return e.day()+1}}function He(n){this.content=n}He.prototype={constructor:He,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,o=r.find(n),i=r.content.slice();return o==-1?i.push(t||n,e):(i[o+1]=e,t&&(i[o]=t)),new He(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new He(t)},addToStart:function(n,e){return new He([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new He(t)},addBefore:function(n,e,t){var r=this.remove(e),o=r.content.slice(),i=r.find(n);return o.splice(i==-1?o.length:i,0,e,t),new He(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=He.from(n),n.size?new He(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=He.from(n),n.size?new He(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=He.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};He.from=function(n){if(n instanceof He)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new He(e)};function vd(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),i=e.child(r);if(o==i){t+=o.nodeSize;continue}if(!o.sameMarkup(i))return t;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)t++;return t}if(o.content.size||i.content.size){let s=vd(o.content,i.content,t+1);if(s!=null)return s}t+=o.nodeSize}}function bd(n,e,t,r){for(let o=n.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:t,b:r};let s=n.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){t-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:t,b:r};if(s.isText&&s.text!=a.text){let c=0,d=Math.min(s.text.length,a.text.length);for(;c<d&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(s.content.size||a.content.size){let c=bd(s.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,i){for(let s=0,a=0;a<t;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,t-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let i="",s=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new W(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let i=0,s=0;s<t;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),r.push(a),o+=a.nodeSize),s=l}return new W(r,o)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new W(o,i)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return vd(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return bd(this,e,t,r)}findIndex(e,t=-1){if(e==0)return co(0,e);if(e==this.size)return co(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||t>0?co(r+1,s):co(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(t||(t=e.slice(0,o)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new W(t||e,r)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const wi={index:0,offset:0};function co(n,e){return wi.index=n,wi.offset=e,wi}function No(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!No(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!No(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ke=class ss{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&No(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ss.none;if(e instanceof ss)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};ke.none=[];class Ro extends Error{}class ie{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=wd(this.content,e+this.openStart,t);return r&&new ie(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ie(kd(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ie.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(W.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)o++;return new ie(e,r,o)}}ie.empty=new ie(W.empty,0,0);function kd(n,e,t){let{index:r,offset:o}=n.findIndex(e),i=n.maybeChild(r),{index:s,offset:a}=n.findIndex(t);if(o==e||i.isText){if(a!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(kd(i.content,e-o-1,t-o-1)))}function wd(n,e,t,r){let{index:o,offset:i}=n.findIndex(e),s=n.maybeChild(o);if(i==e||s.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=wd(s.content,e-i-1,t);return a&&n.replaceChild(o,s.copy(a))}function Ov(n,e,t){if(t.openStart>n.depth)throw new Ro("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Ro("Inconsistent open depths");return Sd(n,e,t,0)}function Sd(n,e,t,r){let o=n.index(r),i=n.node(r);if(o==e.index(r)&&r<n.depth-t.openStart){let s=Sd(n,e,t,r+1);return i.copy(i.content.replaceChild(o,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,a=s.content;return Nn(s,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=Ev(t,n);return Nn(i,Md(n,s,a,e,r))}else return Nn(i,Fo(n,e,r))}function Cd(n,e){if(!e.type.compatibleContent(n.type))throw new Ro("Cannot join "+e.type.name+" onto "+n.type.name)}function as(n,e,t){let r=n.node(t);return Cd(r,e.node(t)),r}function In(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Fr(n,e,t,r){let o=(e||n).node(t),i=0,s=e?e.index(t):o.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(In(n.nodeAfter,r),i++));for(let a=i;a<s;a++)In(o.child(a),r);e&&e.depth==t&&e.textOffset&&In(e.nodeBefore,r)}function Nn(n,e){return n.type.checkContent(e),n.copy(e)}function Md(n,e,t,r,o){let i=n.depth>o&&as(n,e,o+1),s=r.depth>o&&as(t,r,o+1),a=[];return Fr(null,n,o,a),i&&s&&e.index(o)==t.index(o)?(Cd(i,s),In(Nn(i,Md(n,e,t,r,o+1)),a)):(i&&In(Nn(i,Fo(n,e,o+1)),a),Fr(e,t,o,a),s&&In(Nn(s,Fo(t,r,o+1)),a)),Fr(r,null,o,a),new W(a)}function Fo(n,e,t){let r=[];if(Fr(null,n,t,r),n.depth>t){let o=as(n,e,t+1);In(Nn(o,Fo(n,e,t+1)),r)}return Fr(e,null,t,r),new W(r)}function Ev(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)o=e.node(i).copy(W.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class zr{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ke.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new jo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,i=t;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new zr(t,r,i)}static resolveCached(e,t){let r=Xa.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==t)return s}else Xa.set(e,r=new Pv);let o=r.elts[r.i]=zr.resolve(e,t);return r.i=(r.i+1)%Av,o}}class Pv{constructor(){this.elts=[],this.i=0}}const Av=12,Xa=new WeakMap;class jo{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Iv=Object.create(null);let nn=class ls{constructor(e,t,r,o=ke.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&No(this.attrs,t||e.defaultAttrs||Iv)&&ke.sameSet(this.marks,r||ke.none)}copy(e=null){return e==this.content?this:new ls(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ls(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ie.empty;let o=this.resolve(e),i=this.resolve(t),s=r?0:o.sharedDepth(t),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new ie(c,o.depth-s,i.depth-s)}replace(e,t,r){return Ov(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return zr.resolveCached(this,e)}resolveNoCache(e){return zr.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Dd(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=W.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ke.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ke.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=W.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};nn.prototype.text=void 0;class Lo extends nn{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Dd(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Lo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Lo(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Dd(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class $n{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Nv(e,t);if(r.next==null)return $n.empty;let o=Td(r);r.next&&r.err("Unexpected trailing text");let i=Bv($v(o));return zv(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let i=t;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!t||l.validEnd))return W.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:u}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let p=i(u,a.concat(d));if(p)return p}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}$n.empty=new $n(!0);class Nv{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Td(n){let e=[];do e.push(Rv(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Rv(n){let e=[];do e.push(Fv(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Fv(n){let e=Vv(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=jv(n,e);else break;return e}function Qa(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function jv(n,e){let t=Qa(n),r=t;return n.eat(",")&&(n.next!="}"?r=Qa(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Lv(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let i in t){let s=t[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function Vv(n){if(n.eat("(")){let e=Td(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Lv(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function $v(n){let e=[[]];return o(i(n,0),t()),e;function t(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=t())}else if(s.type=="star"){let l=t();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=t();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let d=t();o(i(s.expr,l),d),l=d}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let d=t();r(l,d),o(i(s.expr,l),d),l=d}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Od(n,e){return e-n}function el(n,e){let t=[];return r(e),t.sort(Od);function r(o){let i=n[o];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&t.indexOf(l)==-1&&r(l)}}}function Bv(n){let e=Object.create(null);return t(el(n,0));function t(r){let o=[];r.forEach(s=>{n[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);el(n,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let i=e[r.join(",")]=new $n(r.indexOf(n.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(Od);i.next.push({type:o[s][0],next:e[a.join(",")]||t(a)})}return i}}function zv(n,e){for(let t=0,r=[n];t<r.length;t++){let o=r[t],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Ed(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Pd(n,e){let t=Object.create(null);for(let r in n){let o=e&&e[r];if(o===void 0){let i=n[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function Ad(n,e,t,r){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let i=n[o];i.validate&&i.validate(e[o])}}function Id(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new Hv(n,r,e[r]);return t}let tl=class Nd{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Id(e,r.attrs),this.defaultAttrs=Ed(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==$n.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Pd(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new nn(this,this.computeAttrs(e),W.from(t),ke.setFrom(r))}createChecked(e=null,t,r){return t=W.from(t),this.checkContent(t),new nn(this,this.computeAttrs(e),t,ke.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=W.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(W.empty,!0);return i?new nn(this,e,t.append(i),ke.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ad(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ke.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,s)=>r[i]=new Nd(i,t,s));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function _v(n,e,t){let r=t.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class Hv{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?_v(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class oi{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=Id(e,o.attrs),this.excluded=null;let i=Ed(this.attrs);this.instance=i?new ke(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ke(this,Pd(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new oi(i,o++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Ad(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Rd{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=He.from(e.nodes),t.marks=He.from(e.marks||{}),this.nodes=tl.compile(this.spec.nodes,this),this.marks=oi.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=$n.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?nl(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:nl(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof tl){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new Lo(r,r.defaultAttrs,e,ke.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return nn.fromJSON(this,e)}markFromJSON(e){return ke.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function nl(n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],i=n.marks[o],s=i;if(i)t.push(i);else for(let a in n.marks){let l=n.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&t.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function Wv(n){return n.tag!=null}function Uv(n){return n.style!=null}class rn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(Wv(o))this.tags.push(o);else if(Uv(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new ol(this,t,!1);return r.addAll(e,ke.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ol(this,t,!0);return r.addAll(e,ke.none,t.from,t.to),ie.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(Kv(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,t,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(s.getAttrs){let l=s.getAttrs(t);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let t=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<t.length;s++){let a=t[s];if((a.priority==null?50:a.priority)<i)break}t.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=il(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=il(s)),s.node||s.ignore||s.mark||(s.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new rn(e,rn.schemaRules(e)))}}const Fd={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qv={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},jd={ol:!0,ul:!0},Vo=1,$o=2,jr=4;function rl(n,e,t){return e!=null?(e?Vo:0)|(e==="full"?$o:0):n&&n.whitespace=="pre"?Vo|$o:t&~jr}class uo{constructor(e,t,r,o,i,s){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=ke.none,this.match=i||(s&jr?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Vo)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Fd.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ol{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let o=t.topNode,i,s=rl(null,t.preserveWhitespace,0)|(r?jr:0);o?i=new uo(o.type,o.attrs,ke.none,!0,t.topMatch||o.type.contentMatch,s):r?i=new uo(null,null,ke.none,!0,null,s):i=new uo(e.schema.topNodeType,null,ke.none,!0,null,s),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top;if(o.options&$o||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o.options&Vo)o.options&$o?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=e.nodeName.toLowerCase(),i;jd.hasOwnProperty(o)&&this.parser.normalizeLists&&Yv(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,r));if(s?s.ignore:qv.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let a,l=this.top,c=this.needsBlock;if(Fd.hasOwnProperty(o))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let d=s&&s.skip?t:this.readStyles(e,t);d&&this.addAll(e,d),a&&this.sync(l),this.needsBlock=c}else{let a=this.readStyles(e,t);a&&this.addElementByRule(e,s,a,s.consuming===!1?i:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,o){let i,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(s,t.attrs||null,r,t.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,t,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,t);this.findAtPoint(e,i)}findPlace(e,t){let r,o;for(let i=this.open;i>=0;i--){let s=this.nodes[i],a=s.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,o=s,!a.length)||s.solid)break}if(!r)return null;this.sync(o);for(let i=0;i<r.length;i++)t=this.enterInner(r[i],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=ke.none;for(let s of r.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):sl(s.type,e.type))&&(i=s.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,t,r,o){let i=this.findPlace(e.create(t),r);return i&&(i=this.enterInner(e,t,r,!0,o)),i}enterInner(e,t,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=rl(e,i,s.options);s.options&jr&&s.content.length==0&&(a|=jr);let l=ke.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):sl(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new uo(e,t,l,o,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function Yv(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&jd.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Kv(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function il(n){let e={};for(let t in n)e[t]=n[t];return e}function sl(n,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(n))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||i.indexOf(d)<0&&s(d))return!0}};if(s(o.contentMatch))return!0}}class Wn{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Si(t).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],d=this.serializeMark(c,s.isInline,t);d&&(i.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=So(Si(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&So(Si(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return So(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Wn(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=al(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return al(e.marks)}}function al(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Si(n){return n.document||window.document}const ll=new WeakMap;function Jv(n){let e=ll.get(n);return e===void 0&&ll.set(n,e=Gv(n)),e}function Gv(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(n),e}function So(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=Jv(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(t=o.slice(0,s),o=o.slice(s+1));let a,l=t?n.createElementNS(t,o):n.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let p=u.indexOf(" ");p>0?l.setAttributeNS(u.slice(0,p),u.slice(p+1),c[u]):l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let p=e[u];if(p===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:f}=So(n,p,t,r);if(l.appendChild(h),f){if(a)throw new RangeError("Multiple content holes");a=f}}}return{dom:l,contentDOM:a}}const Ld=65535,Vd=Math.pow(2,16);function Zv(n,e){return n+e*Vd}function cl(n){return n&Ld}function Xv(n){return(n-(n&Ld))/Vd}const $d=1,Bd=2,Co=4,zd=8;class cs{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&zd)>0}get deletedBefore(){return(this.delInfo&($d|Co))>0}get deletedAfter(){return(this.delInfo&(Bd|Co))>0}get deletedAcross(){return(this.delInfo&Co)>0}}class lt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&lt.empty)return lt.empty}recover(e){let t=0,r=cl(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+Xv(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],d=this.ranges[a+s],u=l+c;if(e<=u){let p=c?e==l?-1:e==u?1:t:t,h=l+o+(p<0?0:d);if(r)return h;let f=e==(t<0?l:u)?null:Zv(a/3,e-l),m=e==l?Bd:e==u?$d:Co;return(t<0?e!=l:e!=u)&&(m|=zd),new cs(h,m,f)}o+=d-c}return r?e+o:new cs(e+o,0,null)}touches(e,t){let r=0,o=cl(t),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+t],d=this.ranges[o+r];e(a,a+c,l,l+d),i+=d-c}}invert(){return new lt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?lt.empty:new lt(e<0?[0,-e,0]:[0,0,e])}}lt.empty=new lt([]);class ar{constructor(e=[],t,r=0,o=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=o}slice(e=0,t=this.maps.length){return new ar(this.maps,this.mirror,e,t)}copy(){return new ar(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let o=e.getMirror(t);this.appendMap(e.maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e.maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new ar;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this.maps[i],a=s.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new cs(e,o,null)}}const Ci=Object.create(null);class Ge{getMap(){return lt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ci[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ci)throw new RangeError("Duplicate use of step JSON ID "+e);return Ci[e]=t,t.prototype.jsonID=e,t}}class Re{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Re(e,null)}static fail(e){return new Re(null,e)}static fromReplace(e,t,r,o){try{return Re.ok(e.replace(t,r,o))}catch(i){if(i instanceof Ro)return Re.fail(i.message);throw i}}}function Vs(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let i=n.child(o);i.content.size&&(i=i.copy(Vs(i.content,e,i))),i.isInline&&(i=e(i,t,o)),r.push(i)}return W.fromArray(r)}class Qt extends Ge{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new ie(Vs(t.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),t.openStart,t.openEnd);return Re.fromReplace(e,this.from,this.to,i)}invert(){return new It(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Qt(t.pos,r.pos,this.mark)}merge(e){return e instanceof Qt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Qt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Qt(t.from,t.to,e.markFromJSON(t.mark))}}Ge.jsonID("addMark",Qt);class It extends Ge{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ie(Vs(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return Re.fromReplace(e,this.from,this.to,r)}invert(){return new Qt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new It(t.pos,r.pos,this.mark)}merge(e){return e instanceof It&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new It(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new It(t.from,t.to,e.markFromJSON(t.mark))}}Ge.jsonID("removeMark",It);class en extends Ge{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Re.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Re.fromReplace(e,this.pos,this.pos+1,new ie(W.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new en(this.pos,t.marks[o]);return new en(this.pos,this.mark)}}return new pr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new en(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new en(t.pos,e.markFromJSON(t.mark))}}Ge.jsonID("addNodeMark",en);class pr extends Ge{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Re.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Re.fromReplace(e,this.pos,this.pos+1,new ie(W.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new en(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new pr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new pr(t.pos,e.markFromJSON(t.mark))}}Ge.jsonID("removeNodeMark",pr);class Be extends Ge{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&ds(e,this.from,this.to)?Re.fail("Structure replace would overwrite content"):Re.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new lt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Be(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Be(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Be)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ie.empty:new ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Be(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ie.empty:new ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Be(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Be(t.from,t.to,ie.fromJSON(e,t.slice),!!t.structure)}}Ge.jsonID("replace",Be);class ze extends Ge{constructor(e,t,r,o,i,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(ds(e,this.from,this.gapFrom)||ds(e,this.gapTo,this.to)))return Re.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Re.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Re.fromReplace(e,this.from,this.to,r):Re.fail("Content does not fit in gap")}getMap(){return new lt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ze(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||i>r.pos?null:new ze(t.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ze(t.from,t.to,t.gapFrom,t.gapTo,ie.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ge.jsonID("replaceAround",ze);function ds(n,e,t){let r=n.resolve(e),o=t-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Qv(n,e,t,r){let o=[],i=[],s,a;n.doc.nodesBetween(e,t,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let p=Math.max(c,e),h=Math.min(c+l.nodeSize,t),f=r.addToSet(u);for(let m=0;m<u.length;m++)u[m].isInSet(f)||(s&&s.to==p&&s.mark.eq(u[m])?s.to=h:o.push(s=new It(p,h,u[m])));a&&a.to==p?a.to=h:i.push(a=new Qt(p,h,r))}}),o.forEach(l=>n.step(l)),i.forEach(l=>n.step(l))}function eb(n,e,t,r){let o=[],i=0;n.doc.nodesBetween(e,t,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof oi){let c=s.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,t);for(let d=0;d<l.length;d++){let u=l[d],p;for(let h=0;h<o.length;h++){let f=o[h];f.step==i-1&&u.eq(o[h].style)&&(p=f)}p?(p.to=c,p.step=i):o.push({style:u,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>n.step(new It(s.from,s.to,s.style)))}function $s(n,e,t,r=t.contentMatch,o=!0){let i=n.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),d=a+c.nodeSize,u=r.matchType(c.type);if(!u)s.push(new Be(a,d,ie.empty));else{r=u;for(let p=0;p<c.marks.length;p++)t.allowsMarkType(c.marks[p].type)||n.step(new It(a,d,c.marks[p]));if(o&&c.isText&&t.whitespace!="pre"){let p,h=/\r?\n|\r/g,f;for(;p=h.exec(c.text);)f||(f=new ie(W.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),s.push(new Be(a+p.index,a+p.index+p[0].length,f))}}a=d}if(!r.validEnd){let l=r.fillBefore(W.empty,!0);n.replace(a,a,new ie(l,0,0))}for(let l=s.length-1;l>=0;l--)n.step(s[l])}function tb(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function vr(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let o=n.$from.node(r),i=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&o.canReplace(i,s,t))return r;if(r==0||o.type.spec.isolating||!tb(o,i,s))break}return null}function nb(n,e,t){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,d=W.empty,u=0;for(let f=i,m=!1;f>t;f--)m||r.index(f)>0?(m=!0,d=W.from(r.node(f).copy(d)),u++):l--;let p=W.empty,h=0;for(let f=i,m=!1;f>t;f--)m||o.after(f+1)<o.end(f)?(m=!0,p=W.from(o.node(f).copy(p)),h++):c++;n.step(new ze(l,c,s,a,new ie(d.append(p),u,h),d.size-u,!0))}function Bs(n,e,t=null,r=n){let o=rb(n,e),i=o&&ob(r,e);return i?o.map(dl).concat({type:e,attrs:t}).concat(i.map(dl)):null}function dl(n){return{type:n,attrs:null}}function rb(n,e){let{parent:t,startIndex:r,endIndex:o}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return t.canReplaceWith(r,o,s)?i:null}function ob(n,e){let{parent:t,startIndex:r,endIndex:o}=n,i=t.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:s}function ib(n,e,t){let r=W.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let a=t[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(t[s].type.create(t[s].attrs,r))}let o=e.start,i=e.end;n.step(new ze(o,i,o,i,new ie(r,0,0),t.length,!0))}function sb(n,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&ab(n.doc,n.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",f=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!f?c=!1:!h&&f&&(c=!0)}c===!1&&Hd(n,s,a,i),$s(n,n.mapping.slice(i).map(a,1),r,void 0,c===null);let d=n.mapping.slice(i),u=d.map(a,1),p=d.map(a+s.nodeSize,1);return n.step(new ze(u,p,u+1,p-1,new ie(W.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&_d(n,s,a,i),!1}})}function _d(n,e,t,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=n.mapping.slice(r).map(t+1+i+s.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Hd(n,e,t,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(t+1+i);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function ab(n,e,t){let r=n.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function lb(n,e,t,r,o){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let s=t.create(r,null,o||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ze(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new ie(W.from(s),0,0),1,!0))}function lr(n,e,t=1,r){let o=n.resolve(e),i=o.depth-t,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=t-2;c>i;c--,d--){let u=o.node(c),p=o.index(c);if(u.type.spec.isolating)return!1;let h=u.content.cutByIndex(p,u.childCount),f=r&&r[d+1];f&&(h=h.replaceChild(0,f.type.create(f.attrs)));let m=r&&r[d]||u;if(!u.canReplace(p+1,u.childCount)||!m.type.validContent(h))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function cb(n,e,t=1,r){let o=n.doc.resolve(e),i=W.empty,s=W.empty;for(let a=o.depth,l=o.depth-t,c=t-1;a>l;a--,c--){i=W.from(o.node(a).copy(i));let d=r&&r[c];s=W.from(d?d.type.create(d.attrs,s):o.node(a).copy(s))}n.step(new Be(e,e,new ie(i.append(s),t,t),!0))}function pn(n,e){let t=n.resolve(e),r=t.index();return Wd(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function db(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function Wd(n,e){return!!(n&&e&&!n.isLeaf&&db(n,e))}function ii(n,e,t=-1){let r=n.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):t>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&Wd(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function ub(n,e,t){let r=null,{linebreakReplacement:o}=n.doc.type.schema,i=n.doc.resolve(e-t),s=i.node().type;if(o&&s.inlineContent){let d=s.whitespace=="pre",u=!!s.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let a=n.steps.length;if(r===!1){let d=n.doc.resolve(e+t);Hd(n,d.node(),d.before(),a)}s.inlineContent&&$s(n,e+t-1,s,i.node().contentMatchAt(i.index()),r==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new Be(c,l.map(e+t,-1),ie.empty,!0)),r===!0){let d=n.doc.resolve(c);_d(n,d.node(),d.before(),n.steps.length)}return n}function pb(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,t))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,t))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function Ud(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let i=0;i<t.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),d=!1;if(i==1)d=c.canReplace(l,l,o);else{let u=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function si(n,e,t=e,r=ie.empty){if(e==t&&!r.size)return null;let o=n.resolve(e),i=n.resolve(t);return qd(o,i,r)?new Be(e,t,r):new fb(o,i,r).fit()}function qd(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class fb{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=W.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new ie(i,s,a);return e>-1?new ze(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Be(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Mi(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(t==1&&(s?c.matchType(s.type)||(u=c.fillBefore(W.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:u};if(t==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:d};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Mi(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new ie(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Mi(e,t);if(o.childCount<=1&&t>0){let i=e.size-t<=t+o.size;this.unplaced=new ie(Ar(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new ie(Ar(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,d=[],{match:u,type:p}=this.frontier[t];if(o){for(let m=0;m<o.childCount;m++)d.push(o.child(m));u=u.matchFragment(o)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),g=u.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(u=g,d.push(Yd(m.mark(p.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let f=c==a.childCount;f||(h=-1),this.placed=Ir(this.placed,t,W.from(d)),this.frontier[t].match=u,f&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let x=g.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),g=x.content}this.unplaced=f?e==0?ie.empty:new ie(Ar(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new ie(Ar(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Di(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Di(e,t,o,r,i);if(s){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=Di(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ir(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Ir(this.placed,this.depth,W.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=Ir(this.placed,this.frontier.length,t))}}function Ar(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Ar(n.firstChild.content,e-1,t)))}function Ir(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ir(n.lastChild.content,e-1,t)))}function Mi(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Yd(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Yd(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),n.copy(r)}function Di(n,e,t,r,o){let i=n.node(e),s=o?n.indexAfter(e):n.index(e);if(s==i.childCount&&!t.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!hb(t,i.content,s)?a:null}function hb(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function mb(n){return n.spec.defining||n.spec.definingForContent}function gb(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),i=n.doc.resolve(t);if(qd(o,i,r))return n.step(new Be(e,t,r));let s=Jd(o,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,h=o.pos-1;p>0;p--,h--){let f=o.node(p).type.spec;if(f.defining||f.definingAsContext||f.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==h&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],d=r.openStart;for(let p=r.content,h=0;;h++){let f=p.firstChild;if(c.push(f),h==r.openStart)break;p=f.content}for(let p=d-1;p>=0;p--){let h=c[p],f=mb(h.type);if(f&&!h.sameMarkup(o.node(Math.abs(a)-1)))d=p;else if(f||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+d+1)%(r.openStart+1),f=c[h];if(f)for(let m=0;m<s.length;m++){let g=s[(m+l)%s.length],x=!0;g<0&&(x=!1,g=-g);let v=o.node(g-1),k=o.index(g-1);if(v.canReplaceWith(k,k,f.type,f.marks))return n.replace(o.before(g),x?i.after(g):t,new ie(Kd(r.content,0,r.openStart,h),h,r.openEnd))}}let u=n.steps.length;for(let p=s.length-1;p>=0&&(n.replace(e,t,r),!(n.steps.length>u));p--){let h=s[p];h<0||(e=o.before(h),t=i.after(h))}}function Kd(n,e,t,r,o){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(Kd(i.content,e+1,t,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(n).append(n);n=s.append(i.matchFragment(s).fillBefore(W.empty,!0))}return n}function yb(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=pb(n.doc,e,r.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new ie(W.from(r),0,0))}function xb(n,e,t){let r=n.doc.resolve(e),o=n.doc.resolve(t),i=Jd(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return n.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&o.end(s)-t!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return n.delete(r.before(s),t);n.delete(e,t)}function Jd(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let o=r;o>=0;o--){let i=n.start(o);if(i<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&t.push(o)}return t}class cr extends Ge{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Re.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return Re.fromReplace(e,this.pos,this.pos+1,new ie(W.from(o),0,t.isLeaf?0:1))}getMap(){return lt.empty}invert(e){return new cr(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new cr(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new cr(t.pos,t.attr,t.value)}}Ge.jsonID("attr",cr);class _r extends Ge{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Re.ok(r)}getMap(){return lt.empty}invert(e){return new _r(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new _r(t.attr,t.value)}}Ge.jsonID("docAttr",_r);let fr=class extends Error{};fr=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};fr.prototype=Object.create(Error.prototype);fr.prototype.constructor=fr;fr.prototype.name="TransformError";class vb{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ar}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new fr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ie.empty){let o=si(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new ie(W.from(r),0,0))}delete(e,t){return this.replace(e,t,ie.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return gb(this,e,t,r),this}replaceRangeWith(e,t,r){return yb(this,e,t,r),this}deleteRange(e,t){return xb(this,e,t),this}lift(e,t){return nb(this,e,t),this}join(e,t=1){return ub(this,e,t),this}wrap(e,t){return ib(this,e,t),this}setBlockType(e,t=e,r,o=null){return sb(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return lb(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new cr(e,t,r)),this}setDocAttribute(e,t){return this.step(new _r(e,t)),this}addNodeMark(e,t){return this.step(new en(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ke)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new pr(e,t)),this}split(e,t=1,r){return cb(this,e,t,r),this}addMark(e,t,r){return Qv(this,e,t,r),this}removeMark(e,t,r){return eb(this,e,t,r),this}clearIncompatible(e,t,r){return $s(this,e,t,r),this}}const Ti=Object.create(null);class ge{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new bb(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ie.empty){let r=t.content.lastChild,o=null;for(let a=0;a<t.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(c.pos),a?ie.empty:t),a==0&&fl(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),d=l.map(a.pos);i?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),fl(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new he(e):Xn(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=t<0?Xn(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):Xn(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Mt(e.node(0))}static atStart(e){return Xn(e,e,0,0,1)||new Mt(e)}static atEnd(e){return Xn(e,e,e.content.size,e.childCount,-1)||new Mt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ti[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ti)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ti[e]=t,t.prototype.jsonID=e,t}getBookmark(){return he.between(this.$anchor,this.$head).getBookmark()}}ge.prototype.visible=!0;class bb{constructor(e,t){this.$from=e,this.$to=t}}let ul=!1;function pl(n){!ul&&!n.parent.inlineContent&&(ul=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class he extends ge{constructor(e,t=e){pl(e),pl(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ge.near(r);let o=e.resolve(t.map(this.anchor));return new he(o.parent.inlineContent?o:r,r)}replace(e,t=ie.empty){if(super.replace(e,t),t==ie.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof he&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ai(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new he(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let i=ge.findFrom(t,r,!0)||ge.findFrom(t,-r,!0);if(i)t=i.$head;else return ge.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(ge.findFrom(e,-r,!0)||ge.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new he(e,t)}}ge.jsonID("text",he);class ai{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ai(e.map(this.anchor),e.map(this.head))}resolve(e){return he.between(e.resolve(this.anchor),e.resolve(this.head))}}class ue extends ge{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),i=e.resolve(o);return r?ge.near(i):new ue(i)}content(){return new ie(W.from(this.node),0,0)}eq(e){return e instanceof ue&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zs(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ue(e.resolve(t.anchor))}static create(e,t){return new ue(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ue.prototype.visible=!1;ge.jsonID("node",ue);class zs{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new ai(r,r):new zs(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ue.isSelectable(r)?new ue(t):ge.near(t)}}class Mt extends ge{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ie.empty){if(t==ie.empty){e.delete(0,e.doc.content.size);let r=ge.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Mt(e)}map(e){return new Mt(e)}eq(e){return e instanceof Mt}getBookmark(){return kb}}ge.jsonID("all",Mt);const kb={map(){return this},resolve(n){return new Mt(n)}};function Xn(n,e,t,r,o,i=!1){if(e.inlineContent)return he.create(n,t);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&ue.isSelectable(a))return ue.create(n,t-(o<0?a.nodeSize:0))}else{let l=Xn(n,a,t+o,o<0?a.childCount:0,o,i);if(l)return l}t+=a.nodeSize*o}return null}function fl(n,e,t){let r=n.steps.length-1;if(r<e)return;let o=n.steps[r];if(!(o instanceof Be||o instanceof ze))return;let i=n.mapping.maps[r],s;i.forEach((a,l,c,d)=>{s==null&&(s=d)}),n.setSelection(ge.near(n.doc.resolve(s),t))}const hl=1,po=2,ml=4;class wb extends vb{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|hl)&~po,this.storedMarks=null,this}get selectionSet(){return(this.updated&hl)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=po,this}ensureMarks(e){return ke.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&po)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~po,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ke.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(t);i=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,i)),this.selection.empty||this.setSelection(ge.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ml,this}get scrolledIntoView(){return(this.updated&ml)>0}}function gl(n,e){return!e||!n?n:n.bind(e)}class Nr{constructor(e,t,r){this.name=e,this.init=gl(t.init,r),this.apply=gl(t.apply,r)}}const Sb=[new Nr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Nr("selection",{init(n,e){return n.selection||ge.atStart(e.doc)},apply(n){return n.selection}}),new Nr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Nr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Oi{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Sb.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Nr(r.key,r.spec.state,r))})}}class nr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,d=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<s?{state:r,n:t.length}:{state:this,n:0})}t.push(d),r=r.applyInner(d),i=!0}o&&(o[s]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new nr(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new wb(this)}static create(e){let t=new Oi(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new nr(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new Oi(this.schema,e.plugins),r=t.fields,o=new nr(t);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Oi(e.schema,e.plugins),i=new nr(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=nn.fromJSON(e.schema,t.doc);else if(s.name=="selection")i.selection=ge.fromJSON(i.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){i[s.name]=c.fromJSON.call(l,e,t[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function Gd(n,e,t){for(let r in n){let o=n[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Gd(o,e,{})),t[r]=o}return t}class it{constructor(e){this.spec=e,this.props={},e.props&&Gd(e.props,this,this.props),this.key=e.key?e.key.key:Zd("plugin")}getState(e){return e[this.key]}}const Ei=Object.create(null);function Zd(n){return n in Ei?n+"$"+ ++Ei[n]:(Ei[n]=0,n+"$")}class jt{constructor(e="key"){this.key=Zd(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ue=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Hr=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let us=null;const $t=function(n,e,t){let r=us||(us=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Cb=function(){us=null},Bn=function(n,e,t,r){return t&&(yl(n,e,t,r,-1)||yl(n,e,t,r,1))},Mb=/^(img|br|input|textarea|hr)$/i;function yl(n,e,t,r,o){for(;;){if(n==t&&e==r)return!0;if(e==(o<0?0:mt(n))){let i=n.parentNode;if(!i||i.nodeType!=1||Qr(n)||Mb.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ue(n)+(o<0?0:1),n=i}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.contentEditable=="false")return!1;e=o<0?mt(n):0}else return!1}}function mt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Db(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=mt(n)}else if(n.parentNode&&!Qr(n))e=Ue(n),n=n.parentNode;else return null}}function Tb(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Qr(n))e=Ue(n)+1,n=n.parentNode;else return null}}function Ob(n,e,t){for(let r=e==0,o=e==mt(n);r||o;){if(n==t)return!0;let i=Ue(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,o=o&&i==mt(n)}}function Qr(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const li=function(n){return n.focusNode&&Bn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Dn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Eb(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Pb(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(mt(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(mt(r.startContainer),r.startOffset)}}}const Rt=typeof navigator<"u"?navigator:null,xl=typeof document<"u"?document:null,fn=Rt&&Rt.userAgent||"",ps=/Edge\/(\d+)/.exec(fn),Xd=/MSIE \d/.exec(fn),fs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fn),rt=!!(Xd||fs||ps),on=Xd?document.documentMode:fs?+fs[1]:ps?+ps[1]:0,Dt=!rt&&/gecko\/(\d+)/i.test(fn);Dt&&+(/Firefox\/(\d+)/.exec(fn)||[0,0])[1];const hs=!rt&&/Chrome\/(\d+)/.exec(fn),Je=!!hs,Qd=hs?+hs[1]:0,Ze=!rt&&!!Rt&&/Apple Computer/.test(Rt.vendor),hr=Ze&&(/Mobile\/\w+/.test(fn)||!!Rt&&Rt.maxTouchPoints>2),ht=hr||(Rt?/Mac/.test(Rt.platform):!1),Ab=Rt?/Win/.test(Rt.platform):!1,St=/Android \d/.test(fn),eo=!!xl&&"webkitFontSmoothing"in xl.documentElement.style,Ib=eo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Nb(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Vt(n,e){return typeof n=="number"?n:n[e]}function Rb(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function vl(n,e,t){let r=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let s=t||n.dom;s;s=Hr(s)){if(s.nodeType!=1)continue;let a=s,l=a==i.body,c=l?Nb(i):Rb(a),d=0,u=0;if(e.top<c.top+Vt(r,"top")?u=-(c.top-e.top+Vt(o,"top")):e.bottom>c.bottom-Vt(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+Vt(o,"top")-c.top:e.bottom-c.bottom+Vt(o,"bottom")),e.left<c.left+Vt(r,"left")?d=-(c.left-e.left+Vt(o,"left")):e.right>c.right-Vt(r,"right")&&(d=e.right-c.right+Vt(o,"right")),d||u)if(l)i.defaultView.scrollBy(d,u);else{let p=a.scrollLeft,h=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let f=a.scrollLeft-p,m=a.scrollTop-h;e={left:e.left-f,top:e.top-m,right:e.right-f,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function Fb(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=n.root.elementFromPoint(i,s);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:eu(n.dom)}}function eu(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Hr(r));return e}function jb({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;tu(t,r==0?0:r-e)}function tu(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:o,left:i}=n[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Kn=null;function Lb(n){if(n.setActive)return n.setActive();if(Kn)return n.focus(Kn);let e=eu(n);n.focus(Kn==null?{get preventScroll(){return Kn={preventScroll:!0},!0}}:void 0),Kn||(Kn=!1,tu(e,0))}function nu(n,e){let t,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let d=n.firstChild,u=0;d;d=d.nextSibling,u++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=$t(d).getClientRects();else continue;for(let h=0;h<p.length;h++){let f=p[h];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);let m=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(m<r){t=d,r=m,o=m&&t.nodeType==3?{left:f.right<e.left?f.right:f.left,top:e.top}:e,d.nodeType==1&&m&&(i=u+(e.left>=(f.left+f.right)/2?1:0));continue}}else f.top>e.top&&!l&&f.left<=e.left&&f.right>=e.left&&(l=d,c={left:Math.max(f.left,Math.min(f.right,e.left)),top:f.top});!t&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(i=u+1)}}return!t&&l&&(t=l,o=c,r=0),t&&t.nodeType==3?Vb(t,o):!t||r&&t.nodeType==1?{node:n,offset:i}:nu(t,o)}function Vb(n,e){let t=n.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(n,o+1),r.setStart(n,o);let i=Kt(r,1);if(i.top!=i.bottom&&_s(e,i))return{node:n,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function _s(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function $b(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Bb(n,e,t){let{node:r,offset:o}=nu(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,o,i)}function zb(n,e,t,r){let o=-1;for(let i=e,s=!1;i!=n.dom;){let a=n.docView.nearestDesc(i,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}i=a.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function ru(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=o;;){let s=n.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(_s(e,c))return ru(s,e,c)}}if((i=(i+1)%r)==o)break}return n}function _b(n,e){let t=n.dom.ownerDocument,r,o=0,i=Pb(t,e.left,e.top);i&&({node:r,offset:o}=i);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!_s(e,c)||(s=ru(n.dom,e,c),!s))return null}if(Ze)for(let c=s;r&&c;c=Hr(c))c.draggable&&(r=void 0);if(s=$b(s,e),r){if(Dt&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;eo&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==n.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=zb(n,r,o,e))}a==null&&(a=Bb(n,s,e));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function bl(n){return n.top<n.bottom||n.left<n.right}function Kt(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(bl(r))return r}return Array.prototype.find.call(t,bl)||n.getBoundingClientRect()}const Hb=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ou(n,e,t){let{node:r,offset:o,atom:i}=n.docView.domFromPos(e,t<0?-1:1),s=eo||Dt;if(r.nodeType==3)if(s&&(Hb.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let l=Kt($t(r,o,o),t);if(Dt&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Kt($t(r,o-1,o-1),-1);if(c.top==l.top){let d=Kt($t(r,o,o+1),-1);if(d.top!=l.top)return Pr(d,d.left<c.left)}}return l}else{let l=o,c=o,d=t<0?1:-1;return t<0&&!o?(c++,d=-1):t>=0&&o==r.nodeValue.length?(l--,d=1):t<0?l--:c++,Pr(Kt($t(r,l,c),d),d<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(t<0||o==mt(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return Pi(l.getBoundingClientRect(),!1)}if(i==null&&o<mt(r)){let l=r.childNodes[o];if(l.nodeType==1)return Pi(l.getBoundingClientRect(),!0)}return Pi(r.getBoundingClientRect(),t>=0)}if(i==null&&o&&(t<0||o==mt(r))){let l=r.childNodes[o-1],c=l.nodeType==3?$t(l,mt(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Pr(Kt(c,1),!1)}if(i==null&&o<mt(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?$t(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Pr(Kt(c,-1),!0)}return Pr(Kt(r.nodeType==3?$t(r):r,-t),t>=0)}function Pr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Pi(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function iu(n,e,t){let r=n.state,o=n.root.activeElement;r!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),o!=n.dom&&o&&o.focus()}}function Wb(n,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return iu(n,e,()=>{let{node:i}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=ou(n,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$t(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(t=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const Ub=/[\u0590-\u08ac]/;function qb(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=n.domSelection();return a?!Ub.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?i:s:iu(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=n.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:f,focusOffset:m}=n.domSelectionRange(),g=f&&!h.contains(f.nodeType==1?f:f.parentNode)||l==f&&c==m;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return p!=null&&(a.caretBidiLevel=p),g}):r.pos==r.start()||r.pos==r.end()}let kl=null,wl=null,Sl=!1;function Yb(n,e,t){return kl==e&&wl==t?Sl:(kl=e,wl=t,Sl=t=="up"||t=="down"?Wb(n,e,t):qb(n,e,t))}const yt=0,Cl=1,On=2,Ft=3;class to{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=yt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>Ue(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!t||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof au){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof su&&i.side>=0;r--);if(t<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&t&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?Ue(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?Ue(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let d=s+l.border;if(e>=d&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,d);e=s;for(let u=a;u>0;u--){let p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Ue(p.dom)+1;break}e-=p.size}o==-1&&(o=0)}if(o>-1&&(c>t||a==this.children.length-1)){t=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){i=Ue(u.dom);break}t+=u.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let h=0,f=0;h<this.children.length;h++){let m=this.children[h],g=f+m.size;if(i>f&&s<g)return m.setSelection(e-f-m.border,t-f-m.border,r,o);f=g}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((Dt||Ze)&&e==t){let{node:h,offset:f}=a;if(h.nodeType==3){if(u=!!(f&&h.nodeValue[f-1]==`
`),u&&f==h.nodeValue.length)for(let m=h,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:Ue(g)+1});break}let x=m.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let m=h.childNodes[f-1];u=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Dt&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(o=!0)}if(!(o||u&&Ze)&&Bn(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Bn(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(e>t){let f=a;a=l,l=f}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let a=r+i.border,l=s-i.border;if(e>=a&&t<=l){this.dirty=e==r||t==s?On:Cl,e==a&&t==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Ft:i.markDirty(e-a,t-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?On:Ft}r=s}this.dirty=On}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?On:Cl;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class su extends to{constructor(e,t,r,o){let i,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==yt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Kb extends to{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class zn extends to{constructor(e,t,r,o,i){super(e,[],r,o),this.mark=t,this.spec=i}static create(e,t,r,o){let i=o.nodeViews[t.type.name],s=i&&i(t,o,r);return(!s||!s.dom)&&(s=Wn.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new zn(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Ft||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ft&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=yt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=yt}}slice(e,t,r){let o=zn.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;t<s&&(i=gs(i,t,s,r)),e>0&&(i=gs(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class sn extends to{constructor(e,t,r,o,i,s,a,l,c){super(e,[],i,s),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,t,r,o,i,s){let a=i.nodeViews[t.type.name],l,c=a&&a(t,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(t.isText){if(!d)d=document.createTextNode(t.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=Wn.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!u&&!t.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let p=d;return d=du(d,r,t),c?l=new Jb(e,t,r,o,d,u||null,p,c,i,s+1):t.isText?new ci(e,t,r,o,d,p,i):new sn(e,t,r,o,d,u||null,p,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,r){return this.dirty==yt&&e.eq(this.node)&&Bo(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new Zb(this,s&&s.node,e);e0(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?ke.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,u,p)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,d,u,p)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,d,u,h,e)||l.updateNextNode(c,d,u,e,p,o)||l.addNode(c,d,u,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==On)&&(s&&this.protectLocalComposition(e,s),lu(this.contentDOM,this.children,e),hr&&t0(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof he)||r<t||o>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=n0(this.node.content,s,r-t,o-t);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new Kb(this,i,t,o);e.input.compositionNodes.push(s),this.children=gs(this.children,r,r+o.length,e,s)}update(e,t,r,o){return this.dirty==Ft||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=yt}updateOuterDeco(e){if(Bo(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=cu(this.dom,this.nodeDOM,ms(this.outerDeco,this.node,t),ms(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ml(n,e,t,r,o){du(r,e,n);let i=new sn(void 0,n,e,t,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class ci extends sn{constructor(e,t,r,o,i,s,a){super(e,t,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==Ft||this.dirty!=yt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=yt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=yt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),i=document.createTextNode(o.text);return new ci(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ft)}get domAtom(){return!1}isText(e){return this.node.text==e}}class au extends to{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==yt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Jb extends sn{constructor(e,t,r,o,i,s,a,l,c,d){super(e,t,r,o,i,s,a,c,d),this.spec=l}update(e,t,r,o){if(this.dirty==Ft)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function lu(n,e,t){let r=n.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=Dl(r),o=!0;r=r.nextSibling}else o=!0,n.insertBefore(a,r);if(s instanceof zn){let l=r?r.previousSibling:n.lastChild;lu(s.contentDOM,s.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=Dl(r),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const Lr=function(n){n&&(this.nodeName=n)};Lr.prototype=Object.create(null);const En=[new Lr];function ms(n,e,t){if(n.length==0)return En;let r=t?En[0]:new Lr,o=[r];for(let i=0;i<n.length;i++){let s=n[i].type.attrs;if(s){s.nodeName&&o.push(r=new Lr(s.nodeName));for(let a in s){let l=s[a];l!=null&&(t&&o.length==1&&o.push(r=new Lr(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function cu(n,e,t,r){if(t==En&&r==En)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=n&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=En[0]),o=l}Gb(o,a||En[0],s)}return o}function Gb(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&n.classList.add(o[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function du(n,e,t){return cu(n,n,En,ms(e,t,n.nodeType!=1))}function Bo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Dl(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Zb{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Xb(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=yt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=zn.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,o,i){let s=this.top.children[o];return s.dirty==Ft&&s.dom==s.contentDOM&&(s.dirty=On),s.update(e,t,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof sn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let d=l.dom,u,p=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ft&&Bo(t,l.outerDeco));if(!p&&l.update(e,t,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(u=this.recreateWrapper(l,e,t,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=On,u.updateChildren(o,s+1),u.dirty=yt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Bo(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=sn.create(this.top,t,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,o,i){let s=sn.create(this.top,e,t,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new su(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof zn;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ci)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ze||Je)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new au(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Xb(n,e){let t=e,r=t.children.length,o=n.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof zn)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function Qb(n,e){return n.type.side-e.type.side}function e0(n,e,t,r){let o=e.locals(n),i=0;if(o.length==0){for(let c=0;c<n.childCount;c++){let d=n.child(c);r(d,o,e.forChild(i,d),c),i+=d.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let d,u;for(;s<o.length&&o[s].to==i;){let g=o[s++];g.widget&&(d?(u||(u=[d])).push(g):d=g)}if(d)if(u){u.sort(Qb);for(let g=0;g<u.length;g++)t(u[g],c,!!l)}else t(d,c,!!l);let p,h;if(l)h=-1,p=l,l=null;else if(c<n.childCount)h=c,p=n.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=i&&a.splice(g--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let f=i+p.nodeSize;if(p.isText){let g=f;s<o.length&&o[s].from<g&&(g=o[s].from);for(let x=0;x<a.length;x++)a[x].to<g&&(g=a[x].to);g<f&&(l=p.cut(g-i),p=p.cut(0,g-i),f=g,h=-1)}else for(;s<o.length&&o[s].to<f;)s++;let m=p.isInline&&!p.isLeaf?a.filter(g=>!g.inline):a.slice();r(p,m,e.forChild(i,p),h),i=f}}function t0(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function n0(n,e,t,r){for(let o=0,i=0;o<n.childCount&&i<=r;){let s=n.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<n.childCount;){let c=n.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=t){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function gs(n,e,t,r,o){let i=[];for(let s=0,a=0;s<n.length;s++){let l=n[s],c=a,d=a+=l.size;c>=t||d<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),d>t&&i.push(l.slice(t-c,l.size,r)))}return i}function Hs(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),i=o&&o.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(li(t)){for(l=s;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&ue.isSelectable(u)&&o.parent&&!(u.isInline&&Ob(t.focusNode,t.focusOffset,o.dom))){let p=o.posBefore;c=new ue(s==p?a:r.resolve(p))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let u=s,p=s;for(let h=0;h<t.rangeCount;h++){let f=t.getRangeAt(h);u=Math.min(u,n.docView.posFromDOM(f.startContainer,f.startOffset,1)),p=Math.max(p,n.docView.posFromDOM(f.endContainer,f.endOffset,-1))}if(u<0)return null;[l,s]=p==n.state.selection.anchor?[p,u]:[u,p],a=r.resolve(s)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!i?1:-1;c=Ws(n,d,a,u)}return c}function uu(n){return n.editable?n.hasFocus():fu(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Bt(n,e=!1){let t=n.state.selection;if(pu(n,t),!!uu(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Je){let r=n.domSelectionRange(),o=n.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Bn(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)o0(n);else{let{anchor:r,head:o}=t,i,s;Tl&&!(t instanceof he)&&(t.$from.parent.inlineContent||(i=Ol(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=Ol(n,t.to))),n.docView.setSelection(r,o,n,e),Tl&&(i&&El(i),s&&El(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&r0(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Tl=Ze||Je&&Qd<63;function Ol(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(Ze&&o&&o.contentEditable=="false")return Ai(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return Ai(o);if(i)return Ai(i)}}function Ai(n){return n.contentEditable="true",Ze&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function El(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function r0(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!uu(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function o0(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setStart(r.parentNode,Ue(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&rt&&on<=11&&(r.disabled=!0,r.disabled=!1)}function pu(n,e){if(e instanceof ue){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Pl(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Pl(n)}function Pl(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Ws(n,e,t,r){return n.someProp("createSelectionBetween",o=>o(n,e,t))||he.between(e,t,r)}function Al(n){return n.editable&&!n.hasFocus()?!1:fu(n)}function fu(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function i0(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Bn(e.node,e.offset,t.anchorNode,t.anchorOffset)}function ys(n,e){let{$anchor:t,$head:r}=n.selection,o=e>0?t.max(r):t.min(r),i=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return i&&ge.findFrom(i,e)}function Jt(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Il(n,e,t){let r=n.state.selection;if(r instanceof he)if(t.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=n.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Jt(n,new he(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=ys(n.state,e);return o&&o instanceof ue?Jt(n,o):!1}else if(!(ht&&t.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=n.docView.descAt(a))&&!s.contentDOM?ue.isSelectable(i)?Jt(n,new ue(e<0?n.state.doc.resolve(o.pos-i.nodeSize):o)):eo?Jt(n,new he(n.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ue&&r.node.isInline)return Jt(n,new he(e>0?r.$to:r.$from));{let o=ys(n.state,e);return o?Jt(n,o):!1}}}function zo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Vr(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Jn(n,e){return e<0?s0(n):a0(n)}function s0(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,i,s=!1;for(Dt&&t.nodeType==1&&r<zo(t)&&Vr(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Vr(a,-1))o=t,i=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(hu(t))break;{let a=t.previousSibling;for(;a&&Vr(a,-1);)o=t.parentNode,i=Ue(a),a=a.previousSibling;if(a)t=a,r=zo(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?xs(n,t,r):o&&xs(n,o,i)}function a0(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=zo(t),i,s;for(;;)if(r<o){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Vr(a,1))i=t,s=++r;else break}else{if(hu(t))break;{let a=t.nextSibling;for(;a&&Vr(a,1);)i=a.parentNode,s=Ue(a)+1,a=a.nextSibling;if(a)t=a,r=0,o=zo(t);else{if(t=t.parentNode,t==n.dom)break;r=o=0}}}i&&xs(n,i,s)}function hu(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function l0(n,e){for(;n&&e==n.childNodes.length&&!Qr(n);)e=Ue(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function c0(n,e){for(;n&&!e&&!Qr(n);)e=Ue(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function xs(n,e,t){if(e.nodeType!=3){let i,s;(s=l0(e,t))?(e=s,t=0):(i=c0(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(li(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&Bt(n)},50)}function Nl(n,e){let t=n.state.doc.resolve(e);if(!(Je||Ab)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Rl(n,e,t){let r=n.state.selection;if(r instanceof he&&!r.empty||t.indexOf("s")>-1||ht&&t.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=ys(n.state,e);if(s&&s instanceof ue)return Jt(n,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof Mt?ge.near(s,e):ge.findFrom(s,e);return a?Jt(n,a):!1}return!1}function Fl(n,e){if(!(n.state.selection instanceof he))return!0;let{$head:t,$anchor:r,empty:o}=n.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let s=n.state.tr;return e<0?s.delete(t.pos-i.nodeSize,t.pos):s.delete(t.pos,t.pos+i.nodeSize),n.dispatch(s),!0}return!1}function jl(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function d0(n){if(!Ze||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;jl(n,r,"true"),setTimeout(()=>jl(n,r,"false"),20)}return!1}function u0(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function p0(n,e){let t=e.keyCode,r=u0(e);if(t==8||ht&&t==72&&r=="c")return Fl(n,-1)||Jn(n,-1);if(t==46&&!e.shiftKey||ht&&t==68&&r=="c")return Fl(n,1)||Jn(n,1);if(t==13||t==27)return!0;if(t==37||ht&&t==66&&r=="c"){let o=t==37?Nl(n,n.state.selection.from)=="ltr"?-1:1:-1;return Il(n,o,r)||Jn(n,o)}else if(t==39||ht&&t==70&&r=="c"){let o=t==39?Nl(n,n.state.selection.from)=="ltr"?1:-1:1;return Il(n,o,r)||Jn(n,o)}else{if(t==38||ht&&t==80&&r=="c")return Rl(n,-1,r)||Jn(n,-1);if(t==40||ht&&t==78&&r=="c")return d0(n)||Rl(n,1,r)||Jn(n,1);if(r==(ht?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function mu(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||Wn.fromSchema(n.state.schema),a=ku(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=bu[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let f=a.createElement(d[h]);for(;l.firstChild;)f.appendChild(l.firstChild);l.appendChild(f),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${u?` -${u}`:""} ${JSON.stringify(t)}`);let p=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function gu(n,e,t,r,o){let i=o.parent.type.spec.code,s,a;if(!t&&!e)return null;let l=e&&(r||i||!t);if(l){if(n.someProp("transformPastedText",p=>{e=p(e,i||r,n)}),i)return e?new ie(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ie.empty;let u=n.someProp("clipboardTextParser",p=>p(e,o,r,n));if(u)a=u;else{let p=o.marks(),{schema:h}=n.state,f=Wn.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=s.appendChild(document.createElement("p"));m&&g.appendChild(f.serializeNode(h.text(m,p)))})}}else n.someProp("transformPastedHTML",u=>{t=u(t,n)}),s=g0(t),eo&&y0(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||rn.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!f0.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)a=x0(Ll(a,+d[1],+d[2]),d[4]);else if(a=ie.maxOpen(h0(a.content,o),!0),a.openStart||a.openEnd){let u=0,p=0;for(let h=a.content.firstChild;u<a.openStart&&!h.type.spec.isolating;u++,h=h.firstChild);for(let h=a.content.lastChild;p<a.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);a=Ll(a,u,p)}return n.someProp("transformPasted",u=>{a=u(a,n)}),a}const f0=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function h0(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),i,s=[];if(n.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&xu(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=vu(s[s.length-1],i.length));let d=yu(a,l);s.push(d),o=o.matchType(d.type),i=l}}),s)return W.from(s)}return n}function yu(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,W.from(n));return n}function xu(n,e,t,r,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let i=xu(n,e,t,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==n.length-1?t.type:n[o+1]))return r.copy(r.content.append(W.from(yu(t,n,o+1))))}}function vu(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,vu(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(r))}function vs(n,e,t,r,o,i){let s=e<0?n.firstChild:n.lastChild,a=s.content;return n.childCount>1&&(i=0),o<r-1&&(a=vs(a,e,t,r,o+1,i)),o>=t&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(a))}function Ll(n,e,t){return e<n.openStart&&(n=new ie(vs(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ie(vs(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const bu={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Vl=null;function ku(){return Vl||(Vl=document.implementation.createHTMLDocument("title"))}let Ii=null;function m0(n){let e=window.trustedTypes;return e?(Ii||(Ii=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Ii.createHTML(n)):n}function g0(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ku().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),o;if((o=r&&bu[r[1].toLowerCase()])&&(n=o.map(i=>"<"+i+">").join("")+n+o.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=m0(n),o)for(let i=0;i<o.length;i++)t=t.querySelector(o[i])||t;return t}function y0(n){let e=n.querySelectorAll(Je?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function x0(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:o,openStart:i,openEnd:s}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=W.from(l.create(r[a+1],o)),i++,s++}return new ie(o,i,s)}const Xe={},Qe={},v0={touchstart:!0,touchmove:!0};class b0{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function k0(n){for(let e in Xe){let t=Xe[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{S0(n,r)&&!Us(n,r)&&(n.editable||!(r.type in Qe))&&t(n,r)},v0[e]?{passive:!0}:void 0)}Ze&&n.dom.addEventListener("input",()=>null),bs(n)}function tn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function w0(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function bs(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Us(n,r))})}function Us(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function S0(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function C0(n,e){!Us(n,e)&&Xe[e.type]&&(n.editable||!(e.type in Qe))&&Xe[e.type](n,e)}Qe.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Su(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(St&&Je&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),hr&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",o=>o(n,Dn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||p0(n,t)?t.preventDefault():tn(n,"key")};Qe.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Qe.keypress=(n,e)=>{let t=e;if(Su(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||ht&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof he)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",i=>i(n,r.$from.pos,r.$to.pos,o))&&n.dispatch(n.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function di(n){return{left:n.clientX,top:n.clientY}}function M0(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function qs(n,e,t,r,o){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(n.someProp(e,a=>s>i.depth?a(n,t,i.nodeAfter,i.before(s),o,!0):a(n,t,i.node(s),i.before(s),o,!1)))return!0;return!1}function dr(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function D0(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ue.isSelectable(r)?(dr(n,new ue(t)),!0):!1}function T0(n,e){if(e==-1)return!1;let t=n.state.selection,r,o;t instanceof ue&&(r=t.node);let i=n.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(ue.isSelectable(a)){r&&t.$from.depth>0&&s>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?o=i.before(t.$from.depth):o=i.before(s);break}}return o!=null?(dr(n,ue.create(n.state.doc,o)),!0):!1}function O0(n,e,t,r,o){return qs(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(o?T0(n,t):D0(n,t))}function E0(n,e,t,r){return qs(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",o=>o(n,e,r))}function P0(n,e,t,r){return qs(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",o=>o(n,e,r))||A0(n,t,r)}function A0(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(dr(n,he.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)dr(n,he.create(r,a+1,a+1+s.content.size));else if(ue.isSelectable(s))dr(n,ue.create(r,a));else continue;return!0}}function Ys(n){return _o(n)}const wu=ht?"metaKey":"ctrlKey";Xe.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Ys(n),o=Date.now(),i="singleClick";o-n.input.lastClick.time<500&&M0(t,n.input.lastClick)&&!t[wu]&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:i};let s=n.posAtCoords(di(t));s&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new I0(n,s,t,!!r)):(i=="doubleClick"?E0:P0)(n,s.pos,s.inside,t)?t.preventDefault():tn(n,"pointer"))};class I0{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[wu],this.allowDefault=r.shiftKey;let i,s;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let d=e.state.doc.resolve(t.pos);i=d.parent,s=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof ue&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Dt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),tn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(di(e))),this.updateAllowDefault(e),this.allowDefault||!t?tn(this.view,"pointer"):O0(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ze&&this.mightDrag&&!this.mightDrag.node.isAtom||Je&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(dr(this.view,ge.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):tn(this.view,"pointer")}move(e){this.updateAllowDefault(e),tn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Xe.touchstart=n=>{n.input.lastTouch=Date.now(),Ys(n),tn(n,"pointer")};Xe.touchmove=n=>{n.input.lastTouch=Date.now(),tn(n,"pointer")};Xe.contextmenu=n=>Ys(n);function Su(n,e){return n.composing?!0:Ze&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const N0=St?5e3:-1;Qe.compositionstart=Qe.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof he&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),_o(n,!0),n.markCursor=null;else if(_o(n,!e.selection.empty),Dt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=n.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}n.input.composing=!0}Cu(n,N0)};Qe.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Cu(n,20))};function Cu(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>_o(n),e))}function Mu(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=F0());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function R0(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Db(e.focusNode,e.focusOffset),r=Tb(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function F0(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function _o(n,e=!1){if(!(St&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Mu(n),e||n.docView&&n.docView.dirty){let t=Hs(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function j0(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Wr=rt&&on<15||hr&&Ib<604;Xe.copy=Qe.cut=(n,e)=>{let t=e,r=n.state.selection,o=t.type=="cut";if(r.empty)return;let i=Wr?null:t.clipboardData,s=r.content(),{dom:a,text:l}=mu(n,s);i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):j0(n,a),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function L0(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function V0(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Ur(n,r.value,null,o,e):Ur(n,r.textContent,r.innerHTML,o,e)},50)}function Ur(n,e,t,r,o){let i=gu(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,o,i||ie.empty)))return!0;if(!i)return!1;let s=L0(i),a=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(i);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Du(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Qe.paste=(n,e)=>{let t=e;if(n.composing&&!St)return;let r=Wr?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Ur(n,Du(r),r.getData("text/html"),o,t)?t.preventDefault():V0(n,t)};class Tu{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const Ou=ht?"altKey":"ctrlKey";Xe.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=n.state.selection,i=o.empty?null:n.posAtCoords(di(t)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof ue?o.to-1:o.to))){if(r&&r.mightDrag)s=ue.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&(s=ue.create(n.state.doc,u.posBefore))}}let a=(s||n.state.selection).content(),{dom:l,text:c,slice:d}=mu(n,a);(!t.dataTransfer.files.length||!Je||Qd>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Wr?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Wr||t.dataTransfer.setData("text/plain",c),n.dragging=new Tu(d,!t[Ou],s)};Xe.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Qe.dragover=Qe.dragenter=(n,e)=>e.preventDefault();Qe.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(di(t));if(!o)return;let i=n.state.doc.resolve(o.pos),s=r&&r.slice;s?n.someProp("transformPasted",f=>{s=f(s,n)}):s=gu(n,Du(t.dataTransfer),Wr?null:t.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&!t[Ou]);if(n.someProp("handleDrop",f=>f(n,t,s||ie.empty,a))){t.preventDefault();return}if(!s)return;t.preventDefault();let l=s?Ud(n.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=n.state.tr;if(a){let{node:f}=r;f?f.replace(c):c.deleteSelection()}let d=c.mapping.map(l),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=c.doc;if(u?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(p))return;let h=c.doc.resolve(d);if(u&&ue.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new ue(h));else{let f=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,x,v)=>f=v),c.setSelection(Ws(n,h,c.doc.resolve(f)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Xe.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Bt(n)},20))};Xe.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Xe.beforeinput=(n,e)=>{if(Je&&St&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,Dn(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in Qe)Xe[n]=Qe[n];function qr(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ho{constructor(e,t){this.toDOM=e,this.spec=t||Rn,this.side=this.spec.side||0}map(e,t,r,o){let{pos:i,deleted:s}=e.mapResult(t.from+o,this.side<0?-1:1);return s?null:new gt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ho&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class an{constructor(e,t){this.attrs=e,this.spec=t||Rn}map(e,t,r,o){let i=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new gt(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof an&&qr(this.attrs,e.attrs)&&qr(this.spec,e.spec)}static is(e){return e.type instanceof an}destroy(){}}class Ks{constructor(e,t){this.attrs=e,this.spec=t||Rn}map(e,t,r,o){let i=e.mapResult(t.from+o,1);if(i.deleted)return null;let s=e.mapResult(t.to+o,-1);return s.deleted||s.pos<=i.pos?null:new gt(i.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),i;return o==t.from&&!(i=e.child(r)).isText&&o+i.nodeSize==t.to}eq(e){return this==e||e instanceof Ks&&qr(this.attrs,e.attrs)&&qr(this.spec,e.spec)}destroy(){}}class gt{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new gt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new gt(e,e,new Ho(t,r))}static inline(e,t,r,o){return new gt(e,t,new an(r,o))}static node(e,t,r,o){return new gt(e,t,new Ks(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof an}get widget(){return this.type instanceof Ho}}const Qn=[],Rn={};class je{constructor(e,t){this.local=e.length?e:Qn,this.children=t.length?t:Qn}static create(e,t){return t.length?Wo(t,e,0,Rn):Ke}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,r,o+a,i)}}map(e,t,r){return this==Ke||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Rn)}mapInner(e,t,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(t,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?$0(this.children,s||[],e,t,r,o,i):s?new je(s.sort(Fn),Qn):Ke}add(e,t){return t.length?this==Ke?je.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,d;if(d=Pu(t,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,d,c+1):o.splice(i,0,l,l+a.nodeSize,Wo(d,a,c+1,Rn)),i+=3}});let s=Eu(i?Au(t):t,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new je(s.length?this.local.concat(s).sort(Fn):this.local,o||this.children)}remove(e){return e.length==0||this==Ke?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+t,l=r[i+1]+t;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(s||(s=[])).push(u));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=Ke?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,t)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new je(o,r):Ke}forChild(e,t){if(this==Ke)return this;if(t.isLeaf)return je.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof an){let c=Math.max(i,l.from)-i,d=Math.min(s,l.to)-i;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new je(o.sort(Fn),Qn);return r?new Xt([a,r]):a}return r||Ke}eq(e){if(this==e)return!0;if(!(e instanceof je)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Js(this.localsInner(e))}localsInner(e){if(this==Ke)return Qn;if(e.inlineContent||!this.local.some(an.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof an||t.push(this.local[r]);return t}forEachSet(e){e(this)}}je.empty=new je([],[]);je.removeOverlap=Js;const Ke=je.empty;class Xt{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,Rn));return Xt.from(r)}forChild(e,t){if(t.isLeaf)return je.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,t);i!=Ke&&(i instanceof Xt?r=r.concat(i.members):r.push(i))}return Xt.from(r)}eq(e){if(!(e instanceof Xt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let s=0;s<i.length;s++)t.push(i[s])}}return t?Js(r?t:t.sort(Fn)):Qn}static from(e){switch(e.length){case 0:return Ke;case 1:return e[0];default:return new Xt(e.every(t=>t instanceof je)?e:e.reduce((t,r)=>t.concat(r instanceof je?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function $0(n,e,t,r,o,i,s){let a=n.slice();for(let c=0,d=i;c<t.maps.length;c++){let u=0;t.maps[c].forEach((p,h,f,m)=>{let g=m-f-(h-p);for(let x=0;x<a.length;x+=3){let v=a[x+1];if(v<0||p>v+d-u)continue;let k=a[x]+d-u;h>=k?a[x+1]=p<=k?-2:-1:p>=d&&g&&(a[x]+=g,a[x+1]+=g)}u+=g}),d=t.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=t.map(n[c]+i),u=d-o;if(u<0||u>=r.content.size){l=!0;continue}let p=t.map(n[c+1]+i,-1),h=p-o,{index:f,offset:m}=r.content.findIndex(u),g=r.maybeChild(f);if(g&&m==u&&m+g.nodeSize==h){let x=a[c+2].mapInner(t,g,d+1,n[c]+i+1,s);x!=Ke?(a[c]=u,a[c+1]=h,a[c+2]=x):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=B0(a,n,e,t,o,i,s),d=Wo(c,r,0,s);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,p=0;u<d.children.length;u+=3){let h=d.children[u];for(;p<a.length&&a[p]<h;)p+=3;a.splice(p,0,d.children[u],d.children[u+1],d.children[u+2])}}return new je(e.sort(Fn),a)}function Eu(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let o=n[r];t.push(new gt(o.from+e,o.to+e,o.type))}return t}function B0(n,e,t,r,o,i,s){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,o,c);u?t.push(u):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+i+1);return t}function Pu(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let i=0,s;i<n.length;i++)(s=n[i])&&s.from>t&&s.to<r&&((o||(o=[])).push(s),n[i]=null);return o}function Au(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Wo(n,e,t,r){let o=[],i=!1;e.forEach((a,l)=>{let c=Pu(n,a,l+t);if(c){i=!0;let d=Wo(c,a,t+l+1,r);d!=Ke&&o.push(l,l+a.nodeSize,d)}});let s=Eu(i?Au(n):n,-t).sort(Fn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new je(s,o):Ke}function Fn(n,e){return n.from-e.from||n.to-e.to}function Js(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[o]=i.copy(i.from,r.to),$l(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),$l(e,o,r.copy(i.from,r.to)));break}}}return e}function $l(n,e,t){for(;e<n.length&&Fn(t,n[e])>0;)e++;n.splice(e,0,t)}function Ni(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Ke&&e.push(r)}),n.cursorWrapper&&e.push(je.create(n.state.doc,[n.cursorWrapper.deco])),Xt.from(e)}const z0={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_0=rt&&on<=11;class H0{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class W0{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new H0,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);rt&&on<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),_0&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,z0)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Al(this.view)){if(this.suppressingSelectionUpdates)return Bt(this.view);if(rt&&on<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Bn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=Hr(i))t.add(i);for(let i=e.anchorNode;i;i=Hr(i))if(t.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Al(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let d=0;d<t.length;d++){let u=this.registerMutation(t[d],l);u&&(i=i<0?u.from:Math.min(u.from,i),s=s<0?u.to:Math.max(u.to,s),u.typeOver&&(a=!0))}if(Dt&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,p]=d;u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let p of d){let h=p.parentNode;h&&h.nodeName=="LI"&&(!u||Y0(e,u)!=h)&&p.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&li(r)&&(c=Hs(e))&&c.eq(ge.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Bt(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),U0(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Bt(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];t.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(rt&&on<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:p}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p)}let s=o&&o.parentNode==e.target?Ue(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?Ue(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Bl=new WeakMap,zl=!1;function U0(n){if(!Bl.has(n)&&(Bl.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Dt,zl)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),zl=!0}}function _l(n,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return Bn(s.node,s.offset,o,i)&&([t,r,o,i]=[o,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:i}}function q0(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return _l(n,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?_l(n,t):null}function Y0(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function K0(n,e,t){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,d=l.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],li(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Je&&n.input.lastKeyCode===8)for(let g=i;g>o;g--){let x=r.childNodes[g-1],v=x.pmViewDesc;if(x.nodeName=="BR"&&!v){i=g;break}if(!v||v.size)break}let u=n.state.doc,p=n.someProp("domParser")||rn.fromSchema(n.state.schema),h=u.resolve(s),f=null,m=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:J0,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,x=c[1]&&c[1].pos;x==null&&(x=g),f={anchor:g+s,head:x+s}}return{doc:m,sel:f,from:s,to:a}}function J0(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ze&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ze&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const G0=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Z0(n,e,t,r,o){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let R=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,F=Hs(n,R);if(F&&!n.state.selection.eq(F)){if(Je&&St&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",V=>V(n,Dn(13,"Enter"))))return;let N=n.state.tr.setSelection(F);R=="pointer"?N.setMeta("pointer",!0):R=="key"&&N.scrollIntoView(),i&&N.setMeta("composition",i),n.dispatch(N)}return}let s=n.state.doc.resolve(e),a=s.sharedDepth(t);e=s.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=K0(n,e,t),d=n.state.doc,u=d.slice(c.from,c.to),p,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(p=n.state.selection.to,h="end"):(p=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let f=ek(u.content,c.doc.content,c.from,p,h);if(f&&n.input.domChangeCount++,(hr&&n.input.lastIOSEnter>Date.now()-225||St)&&o.some(R=>R.nodeType==1&&!G0.test(R.nodeName))&&(!f||f.endA>=f.endB)&&n.someProp("handleKeyDown",R=>R(n,Dn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!f)if(r&&l instanceof he&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))f={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=Hl(n,n.state.doc,c.sel);if(R&&!R.eq(n.state.selection)){let F=n.state.tr.setSelection(R);i&&F.setMeta("composition",i),n.dispatch(F)}}return}n.state.selection.from<n.state.selection.to&&f.start==f.endB&&n.state.selection instanceof he&&(f.start>n.state.selection.from&&f.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?f.start=n.state.selection.from:f.endA<n.state.selection.to&&f.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(f.endB+=n.state.selection.to-f.endA,f.endA=n.state.selection.to)),rt&&on<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>c.from&&c.doc.textBetween(f.start-c.from-1,f.start-c.from+1)==" "&&(f.start--,f.endA--,f.endB--);let m=c.doc.resolveNoCache(f.start-c.from),g=c.doc.resolveNoCache(f.endB-c.from),x=d.resolve(f.start),v=m.sameParent(g)&&m.parent.inlineContent&&x.end()>=f.endA,k;if((hr&&n.input.lastIOSEnter>Date.now()-225&&(!v||o.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!v&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(k=ge.findFrom(c.doc.resolve(m.pos+1),1,!0))&&k.head==g.pos)&&n.someProp("handleKeyDown",R=>R(n,Dn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>f.start&&Q0(d,f.start,f.endA,m,g)&&n.someProp("handleKeyDown",R=>R(n,Dn(8,"Backspace")))){St&&Je&&n.domObserver.suppressSelectionUpdates();return}Je&&St&&f.endB==f.start&&(n.input.lastAndroidDelete=Date.now()),St&&!v&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==f.endA&&(f.endB-=2,g=c.doc.resolveNoCache(f.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(R){return R(n,Dn(13,"Enter"))})},20));let w=f.start,D=f.endA,E,P,M;if(v){if(m.pos==g.pos)rt&&on<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bt(n),20)),E=n.state.tr.delete(w,D),P=d.resolve(f.start).marksAcross(d.resolve(f.endA));else if(f.endA==f.endB&&(M=X0(m.parent.content.cut(m.parentOffset,g.parentOffset),x.parent.content.cut(x.parentOffset,f.endA-x.start()))))E=n.state.tr,M.type=="add"?E.addMark(w,D,M.mark):E.removeMark(w,D,M.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let R=m.parent.textBetween(m.parentOffset,g.parentOffset);if(n.someProp("handleTextInput",F=>F(n,w,D,R)))return;E=n.state.tr.insertText(R,w,D)}}if(E||(E=n.state.tr.replace(w,D,c.doc.slice(f.start-c.from,f.endB-c.from))),c.sel){let R=Hl(n,E.doc,c.sel);R&&!(Je&&St&&n.composing&&R.empty&&(f.start!=f.endB||n.input.lastAndroidDelete<Date.now()-100)&&(R.head==w||R.head==E.mapping.map(D)-1)||rt&&R.empty&&R.head==w)&&E.setSelection(R)}P&&E.ensureMarks(P),i&&E.setMeta("composition",i),n.dispatch(E.scrollIntoView())}function Hl(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Ws(n,e.resolve(t.anchor),e.resolve(t.head))}function X0(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,o=t,i=r,s,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<t.length;d++)i=t[d].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(W.from(c).eq(n))return{mark:a,type:s}}function Q0(n,e,t,r,o){if(t-e<=o.pos-r.pos||Ri(r,!0,!1)<o.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&t==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=n.resolve(Ri(i,!0,!0));return!s.parent.isTextblock||s.pos>t||Ri(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Ri(n,e,t){let r=n.depth,o=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,o++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function ek(n,e,t,r,o){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:s,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&n.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&Wl(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<n.size&&Wl(n.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function Wl(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class tk{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new b0,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Jl),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Yl(this),ql(this),this.nodeViews=Kl(this),this.docView=Ml(this.state.doc,Ul(this),Ni(this),this.dom,this),this.domObserver=new W0(this,(r,o,i,s)=>Z0(this,r,o,i,s)),this.domObserver.start(),k0(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&bs(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Jl),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Mu(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Kl(this);rk(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&bs(this),this.editable=Yl(this),ql(this);let l=Ni(this),c=Ul(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(o.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Fb(this);if(s){this.domObserver.stop();let h=u&&(rt||Je)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&nk(o.selection,e.selection);if(u){let f=Je?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=R0(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Ml(e.doc,c,l,this.dom,this)),f&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&i0(this))?Bt(this,h):(pu(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&jb(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ue){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&vl(this,t.getBoundingClientRect(),e)}else vl(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new Tu(e.slice,e.move,o<0?void 0:ue.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=t?t(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=t?t(a):a))return o}}hasFocus(){if(rt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Lb(this.dom),Bt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return _b(this,e)}coordsAtPos(e,t=1){return ou(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return Yb(this,t||this.state,e)}pasteHTML(e,t){return Ur(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ur(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(w0(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ni(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Cb())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return C0(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ze&&this.root.nodeType===11&&Eb(this.dom.ownerDocument)==this.dom&&q0(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Ul(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[gt.node(0,n.state.doc.content.size,e)]}function ql(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:gt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Yl(n){return!n.someProp("editable",e=>e(n.state)===!1)}function nk(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Kl(n){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function rk(n,e){let t=0,r=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function Jl(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ln={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Uo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ok=typeof navigator<"u"&&/Mac/.test(navigator.platform),ik=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qe=0;qe<10;qe++)ln[48+qe]=ln[96+qe]=String(qe);for(var qe=1;qe<=24;qe++)ln[qe+111]="F"+qe;for(var qe=65;qe<=90;qe++)ln[qe]=String.fromCharCode(qe+32),Uo[qe]=String.fromCharCode(qe);for(var Fi in ln)Uo.hasOwnProperty(Fi)||(Uo[Fi]=ln[Fi]);function sk(n){var e=ok&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ik&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Uo:ln)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const ak=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function lk(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))ak?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),s&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function ck(n){let e=Object.create(null);for(let t in n)e[lk(t)]=n[t];return e}function ji(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function dk(n){return new it({props:{handleKeyDown:Iu(n)}})}function Iu(n){let e=ck(n);return function(t,r){let o=sk(r),i,s=e[ji(o,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[ji(o,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(i=ln[r.keyCode])&&i!=o){let a=e[ji(i,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const uk=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Nu(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const pk=(n,e,t)=>{let r=Nu(n,t);if(!r)return!1;let o=Gs(r);if(!o){let s=r.blockRange(),a=s&&vr(s);return a==null?!1:(e&&e(n.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(Lu(n,o,e,-1))return!0;if(r.parent.content.size==0&&(mr(i,"end")||ue.isSelectable(i)))for(let s=r.depth;;s--){let a=si(n.doc,r.before(s),r.after(s),ie.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(mr(i,"end")?ge.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):ue.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},fk=(n,e,t)=>{let r=Nu(n,t);if(!r)return!1;let o=Gs(r);return o?Ru(n,o,e):!1},hk=(n,e,t)=>{let r=Fu(n,t);if(!r)return!1;let o=Zs(r);return o?Ru(n,o,e):!1};function Ru(n,e,t){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=si(n.doc,i,l,ie.empty);if(!c||c.from!=i||c instanceof Be&&c.slice.size>=l-i)return!1;if(t){let d=n.tr.step(c);d.setSelection(he.create(d.doc,i)),t(d.scrollIntoView())}return!0}function mr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const mk=(n,e,t)=>{let{$head:r,empty:o}=n.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=Gs(r)}let s=i&&i.nodeBefore;return!s||!ue.isSelectable(s)?!1:(e&&e(n.tr.setSelection(ue.create(n.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function Gs(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Fu(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const gk=(n,e,t)=>{let r=Fu(n,t);if(!r)return!1;let o=Zs(r);if(!o)return!1;let i=o.nodeAfter;if(Lu(n,o,e,1))return!0;if(r.parent.content.size==0&&(mr(i,"start")||ue.isSelectable(i))){let s=si(n.doc,r.before(),r.after(),ie.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=n.tr.step(s);a.setSelection(mr(i,"start")?ge.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):ue.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},yk=(n,e,t)=>{let{$head:r,empty:o}=n.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=Zs(r)}let s=i&&i.nodeAfter;return!s||!ue.isSelectable(s)?!1:(e&&e(n.tr.setSelection(ue.create(n.doc,i.pos)).scrollIntoView()),!0)};function Zs(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const xk=(n,e)=>{let t=n.selection,r=t instanceof ue,o;if(r){if(t.node.isTextblock||!pn(n.doc,t.from))return!1;o=t.from}else if(o=ii(n.doc,t.from,-1),o==null)return!1;if(e){let i=n.tr.join(o);r&&i.setSelection(ue.create(i.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},vk=(n,e)=>{let t=n.selection,r;if(t instanceof ue){if(t.node.isTextblock||!pn(n.doc,t.to))return!1;r=t.to}else if(r=ii(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},bk=(n,e)=>{let{$from:t,$to:r}=n.selection,o=t.blockRange(r),i=o&&vr(o);return i==null?!1:(e&&e(n.tr.lift(o,i).scrollIntoView()),!0)},kk=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function ju(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const wk=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),i=t.indexAfter(-1),s=ju(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,s.createAndFill());l.setSelection(ge.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Sk=(n,e)=>{let t=n.selection,{$from:r,$to:o}=t;if(t instanceof Mt||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=ju(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=n.tr.insert(s,i.createAndFill());a.setSelection(he.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Ck=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(lr(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),o=r&&vr(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)},Mk=(n,e)=>{let{$from:t,to:r}=n.selection,o,i=t.sharedDepth(r);return i==0?!1:(o=t.before(i),e&&e(n.tr.setSelection(ue.create(n.doc,o))),!0)};function Dk(n,e,t){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||pn(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Lu(n,e,t,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&Dk(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(t){let h=e.pos+i.nodeSize,f=W.empty;for(let x=s.length-1;x>=0;x--)f=W.from(s[x].create(null,f));f=W.from(o.copy(f));let m=n.tr.step(new ze(e.pos-1,h,e.pos,h,new ie(f,1,0),s.length,!0)),g=m.doc.resolve(h+2*s.length);g.nodeAfter&&g.nodeAfter.type==o.type&&pn(m.doc,g.pos)&&m.join(g.pos),t(m.scrollIntoView())}return!0}let d=i.type.spec.isolating||r>0&&l?null:ge.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),p=u&&vr(u);if(p!=null&&p>=e.depth)return t&&t(n.tr.lift(u,p).scrollIntoView()),!0;if(c&&mr(i,"start",!0)&&mr(o,"end")){let h=o,f=[];for(;f.push(h),!h.isTextblock;)h=h.lastChild;let m=i,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(t){let x=W.empty;for(let k=f.length-1;k>=0;k--)x=W.from(f[k].copy(x));let v=n.tr.step(new ze(e.pos-f.length,e.pos+i.nodeSize,e.pos+g,e.pos+i.nodeSize-g,new ie(x,f.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}function Vu(n){return function(e,t){let r=e.selection,o=n<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(t&&t(e.tr.setSelection(he.create(e.doc,n<0?o.start(i):o.end(i)))),!0):!1}}const Tk=Vu(-1),Ok=Vu(1);function Ek(n,e=null){return function(t,r){let{$from:o,$to:i}=t.selection,s=o.blockRange(i),a=s&&Bs(s,n,e);return a?(r&&r(t.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Gl(n,e=null){return function(t,r){let o=!1;for(let i=0;i<t.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=t.selection.ranges[i];t.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)o=!0;else{let d=t.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,n)}})}if(!o)return!1;if(r){let i=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];i.setBlockType(a,l,n,e)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Pk(n,e=null){return function(t,r){let{$from:o,$to:i}=t.selection,s=o.blockRange(i),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(n)&&s.startIndex==0){if(o.index(s.depth-1)==0)return!1;let d=t.doc.resolve(s.start-2);l=new jo(d,d,s.depth),s.endIndex<s.parent.childCount&&(s=new jo(o,t.doc.resolve(i.end(s.depth)),s.depth)),a=!0}let c=Bs(l,n,e,s);return c?(r&&r(Ak(t.tr,s,c,a,n).scrollIntoView()),!0):!1}}function Ak(n,e,t,r,o){let i=W.empty;for(let d=t.length-1;d>=0;d--)i=W.from(t[d].type.create(t[d].attrs,i));n.step(new ze(e.start-(r?2:0),e.end,e.start,e.end,new ie(i,0,0),t.length,!0));let s=0;for(let d=0;d<t.length;d++)t[d].type==o&&(s=d+1);let a=t.length-s,l=e.start+t.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,p=!0;d<u;d++,p=!1)!p&&lr(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return n}function Ik(n){return function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?Nk(e,t,n,i):Rk(e,t,i):!0:!1}}function Nk(n,e,t,r){let o=n.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new ze(i-1,s,i,s,new ie(W.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new jo(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=vr(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(i,-1)-1;return pn(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function Rk(n,e,t){let r=n.tr,o=t.parent;for(let h=t.end,f=t.endIndex-1,m=t.startIndex;f>m;f--)h-=o.child(f).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(t.start),s=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==o.childCount,c=i.node(-1),d=i.index(-1);if(!c.canReplace(d+(a?0:1),d+1,s.content.append(l?W.empty:W.from(o))))return!1;let u=i.pos,p=u+s.nodeSize;return r.step(new ze(u-(a?1:0),p+(l?1:0),u+1,p-1,new ie((a?W.empty:W.from(o.copy(W.empty))).append(l?W.empty:W.from(o.copy(W.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Fk(n){return function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==n);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,d=W.from(c?n.create():null),u=new ie(W.from(n.create(null,W.from(a.type.create(null,d)))),c?3:1,0),p=i.start,h=i.end;t(e.tr.step(new ze(p-(c?3:1),h,p,h,u,1,!0)).scrollIntoView())}return!0}}function ui(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:o}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,i=t.storedMarks,t}}}class pi{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const u=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,c=e||i.tr,d=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(p=>p===!0)),u={...Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...m)=>{const g=this.buildProps(c,t),x=h(...m)(g);return a.push(x),u}])),run:d};return u}createCan(e){const{rawCommands:t,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,t=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:ui({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class jk{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const r=(...o)=>{this.off(e,r),t.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ae(n,e,t){return n.config[e]===void 0&&n.parent?ae(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ae(n.parent,e,t):null}):n.config[e]}function fi(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),r=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function $u(n){const e=[],{nodeExtensions:t,markExtensions:r}=fi(n),o=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=ae(s,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([p,h])=>{e.push({type:u,name:p,attribute:{...i,...h}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=ae(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const p={...i,...u};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:s.name,name:d,attribute:p})})}),e}function Ve(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function et(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?i.split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,p]=d.split(":").map(h=>h.trim());c.set(u,p)}),a.forEach(d=>{const[u,p]=d.split(":").map(h=>h.trim());c.set(u,p)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=i}),r},{})}function ks(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>et(t,r),{})}function Bu(n){return typeof n=="function"}function ye(n,e=void 0,...t){return Bu(n)?e?n.bind(e)(...t):n(...t):n}function Lk(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Vk(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Zl(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(t):Vk(t.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function Xl(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Lk(t)?!1:t!=null))}function $k(n,e){var t;const r=$u(n),{nodeExtensions:o,markExtensions:i}=fi(n),s=(t=o.find(c=>ae(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(x=>x.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},p=n.reduce((x,v)=>{const k=ae(v,"extendNodeSchema",u);return{...x,...k?k(c):{}}},{}),h=Xl({...p,content:ye(ae(c,"content",u)),marks:ye(ae(c,"marks",u)),group:ye(ae(c,"group",u)),inline:ye(ae(c,"inline",u)),atom:ye(ae(c,"atom",u)),selectable:ye(ae(c,"selectable",u)),draggable:ye(ae(c,"draggable",u)),code:ye(ae(c,"code",u)),whitespace:ye(ae(c,"whitespace",u)),linebreakReplacement:ye(ae(c,"linebreakReplacement",u)),defining:ye(ae(c,"defining",u)),isolating:ye(ae(c,"isolating",u)),attrs:Object.fromEntries(d.map(x=>{var v;return[x.name,{default:(v=x==null?void 0:x.attribute)===null||v===void 0?void 0:v.default}]}))}),f=ye(ae(c,"parseHTML",u));f&&(h.parseDOM=f.map(x=>Zl(x,d)));const m=ae(c,"renderHTML",u);m&&(h.toDOM=x=>m({node:x,HTMLAttributes:ks(x,d)}));const g=ae(c,"renderText",u);return g&&(h.toText=g),[c.name,h]})),l=Object.fromEntries(i.map(c=>{const d=r.filter(g=>g.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},p=n.reduce((g,x)=>{const v=ae(x,"extendMarkSchema",u);return{...g,...v?v(c):{}}},{}),h=Xl({...p,inclusive:ye(ae(c,"inclusive",u)),excludes:ye(ae(c,"excludes",u)),group:ye(ae(c,"group",u)),spanning:ye(ae(c,"spanning",u)),code:ye(ae(c,"code",u)),attrs:Object.fromEntries(d.map(g=>{var x;return[g.name,{default:(x=g==null?void 0:g.attribute)===null||x===void 0?void 0:x.default}]}))}),f=ye(ae(c,"parseHTML",u));f&&(h.parseDOM=f.map(g=>Zl(g,d)));const m=ae(c,"renderHTML",u);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:ks(g,d)})),[c.name,h]}));return new Rd({topNode:s,nodes:a,marks:l})}function Li(n,e){return e.nodes[n]||e.marks[n]||null}function Ql(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Xs(n,e){const t=Wn.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const Bk=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-i))}),t};function Qs(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class hi{constructor(e){this.find=e.find,this.handler=e.handler}}const zk=(n,e)=>{if(Qs(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function fo(n){var e;const{editor:t,from:r,to:o,text:i,rules:s,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const u=Bk(c)+i;return s.forEach(p=>{if(d)return;const h=zk(u,p.find);if(!h)return;const f=l.state.tr,m=ui({state:l.state,transaction:f}),g={from:r-(h[0].length-i.length),to:o},{commands:x,chain:v,can:k}=new pi({editor:t,state:m});p.handler({state:m,range:g,match:h,commands:x,chain:v,can:k})===null||!f.steps.length||(f.setMeta(a,{transform:f,from:r,to:o,text:i}),l.dispatch(f),d=!0)}),d}function _k(n){const{editor:e,rules:t}=n,r=new it({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=Xs(W.from(d),s.schema);const{from:u}=l,p=u+d.length;fo({editor:e,from:u,to:p,text:d,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return fo({editor:e,from:i,to:s,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&fo({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?fo({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Hk(n){return Object.prototype.toString.call(n).slice(8,-1)}function ho(n){return Hk(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function mi(n,e){const t={...n};return ho(n)&&ho(e)&&Object.keys(e).forEach(r=>{ho(e[r])&&ho(n[r])?t[r]=mi(n[r],e[r]):t[r]=e[r]}),t}class cn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(ae(this,"addOptions",{name:this.name}))),this.storage=ye(ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new cn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mi(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new cn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(ae(t,"addOptions",{name:t.name})),t.storage=ye(ae(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function Wk(n){return typeof n=="number"}class Uk{constructor(e){this.find=e.find,this.handler=e.handler}}const qk=(n,e,t)=>{if(Qs(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=n,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function Yk(n){const{editor:e,state:t,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=n,{commands:l,chain:c,can:d}=new pi({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,o,(h,f)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,f),g=Math.min(o,f+h.content.size),x=h.textBetween(m-f,g-f,void 0,"");qk(x,i.find,s).forEach(k=>{if(k.index===void 0)return;const w=m+k.index+1,D=w+k[0].length,E={from:t.tr.mapping.map(w),to:t.tr.mapping.map(D)},P=i.handler({state:t,range:E,match:k,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:a});u.push(P)})}),u.every(h=>h!==null)}const Kk=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function Jk(n){const{editor:e,rules:t}=n;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:p,rule:h,pasteEvt:f})=>{const m=d.tr,g=ui({state:d,transaction:m});if(!(!Yk({editor:e,state:g,from:Math.max(u-1,0),to:p.b-1,rule:h,pasteEvent:f,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return t.map(d=>new it({view(u){const p=h=>{var f;r=!((f=u.dom.parentElement)===null||f===void 0)&&f.contains(h.target)?u.dom.parentElement:null};return window.addEventListener("dragstart",p),{destroy(){window.removeEventListener("dragstart",p)}}},props:{handleDOMEvents:{drop:(u,p)=>(i=r===u.dom.parentElement,a=p,!1),paste:(u,p)=>{var h;const f=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=p,o=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(u,p,h)=>{const f=u[0],m=f.getMeta("uiEvent")==="paste"&&!o,g=f.getMeta("uiEvent")==="drop"&&!i,x=f.getMeta("applyPasteRules"),v=!!x;if(!m&&!g&&!v)return;if(v){let{text:D}=x;typeof D=="string"?D=D:D=Xs(W.from(D),h.schema);const{from:E}=x,P=E+D.length,M=Kk(D);return l({rule:d,state:h,from:E,to:{b:P},pasteEvt:M})}const k=p.doc.content.findDiffStart(h.doc.content),w=p.doc.content.findDiffEnd(h.doc.content);if(!(!Wk(k)||!w||k===w.b))return l({rule:d,state:h,from:k,to:w,pasteEvt:s})}}))}function Gk(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class rr{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=rr.resolve(e),this.schema=$k(this.extensions,t),this.setupExtensions()}static resolve(e){const t=rr.sort(rr.flatten(e)),r=Gk(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},o=ae(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=ae(r,"priority")||100,s=ae(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Li(t.name,this.schema)},o=ae(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=rr.sort([...this.extensions].reverse()),r=[],o=[],i=t.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Li(s.name,this.schema)},l=[],c=ae(s,"addKeyboardShortcuts",a);let d={};if(s.type==="mark"&&ae(s,"exitable",a)&&(d.ArrowRight=()=>cn.handleExit({editor:e,mark:s})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,x])=>[g,()=>x({editor:e})]));d={...d,...m}}const u=dk(d);l.push(u);const p=ae(s,"addInputRules",a);Ql(s,e.options.enableInputRules)&&p&&r.push(...p());const h=ae(s,"addPasteRules",a);Ql(s,e.options.enablePasteRules)&&h&&o.push(...h());const f=ae(s,"addProseMirrorPlugins",a);if(f){const m=f();l.push(...m)}return l}).flat();return[_k({editor:e,rules:r}),...Jk({editor:e,rules:o}),...i]}get attributes(){return $u(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=fi(this.extensions);return Object.fromEntries(t.filter(r=>!!ae(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ve(r.name,this.schema)},s=ae(r,"addNodeView",i);if(!s)return[];const a=(l,c,d,u,p)=>{const h=ks(l,o);return s()({node:l,view:c,getPos:d,decorations:u,innerDecorations:p,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Li(e.name,this.schema)};e.type==="mark"&&(!((t=ye(ae(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=ae(e,"onBeforeCreate",r),i=ae(e,"onCreate",r),s=ae(e,"onUpdate",r),a=ae(e,"onSelectionUpdate",r),l=ae(e,"onTransaction",r),c=ae(e,"onFocus",r),d=ae(e,"onBlur",r),u=ae(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class tt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(ae(this,"addOptions",{name:this.name}))),this.storage=ye(ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mi(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new tt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(ae(t,"addOptions",{name:t.name})),t.storage=ye(ae(t,"addStorage",{name:t.name,options:t.options})),t}}function zu(n,e,t){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=t||{};let a="";return n.nodesBetween(r,o,(l,c,d,u)=>{var p;l.isBlock&&c>r&&(a+=i);const h=s==null?void 0:s[l.type.name];if(h)return d&&(a+=h({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(a+=(p=l==null?void 0:l.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,o-c))}),a}function _u(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Zk=tt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new it({key:new jt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(d=>d.$from.pos)),a=Math.max(...i.map(d=>d.$to.pos)),l=_u(t);return zu(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Xk=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Qk=(n=!1)=>({commands:e})=>e.setContent("",n),ew=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:i,$to:s})=>{n.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),p=c.resolve(d.map(l+a.nodeSize)),h=u.blockRange(p);if(!h)return;const f=vr(h);if(a.type.isTextblock){const{defaultType:m}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,m)}(f||f===0)&&e.lift(h,f)})}),!0},tw=n=>e=>n(e),nw=()=>({state:n,dispatch:e})=>Sk(n,e),rw=(n,e)=>({editor:t,tr:r})=>{const{state:o}=t,i=o.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new he(r.doc.resolve(s-1))),!0},ow=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const o=n.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),l=o.after(i);n.delete(a,l).scrollIntoView()}return!0}return!1},iw=n=>({tr:e,state:t,dispatch:r})=>{const o=Ve(n,t.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},sw=n=>({tr:e,dispatch:t})=>{const{from:r,to:o}=n;return t&&e.delete(r,o),!0},aw=()=>({state:n,dispatch:e})=>uk(n,e),lw=()=>({commands:n})=>n.keyboardShortcut("Enter"),cw=()=>({state:n,dispatch:e})=>wk(n,e);function qo(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===n[o]:Qs(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function Hu(n,e,t={}){return n.find(r=>r.type===e&&qo(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function ec(n,e,t={}){return!!Hu(n,e,t)}function ea(n,e,t){var r;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(t=t||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!Hu([...o.node.marks],e,t)))return;let s=o.index,a=n.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&ec([...n.parent.child(s-1).marks],e,t);)s-=1,a-=n.parent.child(s).nodeSize;for(;l<n.parent.childCount&&ec([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Wt(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const dw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const i=Wt(n,r.schema),{doc:s,selection:a}=t,{$from:l,from:c,to:d}=a;if(o){const u=ea(l,i,e);if(u&&u.from<=c&&u.to>=d){const p=he.create(s,u.from,u.to);t.setSelection(p)}}return!0},uw=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Wu(n){return n instanceof he}function Pn(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Uu(n,e=null){if(!e)return null;const t=ge.atStart(n),r=ge.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,i=r.to;return e==="all"?he.create(n,Pn(0,o,i),Pn(n.content.size,o,i)):he.create(n,Pn(e,o,i),Pn(e,o,i))}function ta(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const pw=(n=null,e={})=>({editor:t,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{ta()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!Wu(t.state.selection))return s(),!0;const a=Uu(o.doc,n)||t.state.selection,l=t.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},fw=(n,e)=>t=>n.every((r,o)=>e(r,{...t,index:o})),hw=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),qu=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&qu(r)}return n};function mo(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return qu(t)}function Yo(n,e,t){if(n instanceof nn||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,o=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),Yo("",e,t)}if(o){if(t.errorOnInvalidContent){let s=!1,a="";const l=new Rd({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?rn.fromSchema(l).parseSlice(mo(n),t.parseOptions):rn.fromSchema(l).parse(mo(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=rn.fromSchema(e);return t.slice?i.parseSlice(mo(n),t.parseOptions).content:i.parse(mo(n),t.parseOptions)}return Yo("",e,t)}function mw(n,e,t){const r=n.steps.length-1;if(r<e)return;const o=n.steps[r];if(!(o instanceof Be||o instanceof ze))return;const i=n.mapping.maps[r];let s=0;i.forEach((a,l,c,d)=>{s===0&&(s=d)}),n.setSelection(ge.near(n.doc.resolve(s),t))}const gw=n=>!("type"in n),yw=(n,e,t)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=Yo(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(s=t.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(f){return i.emit("contentError",{editor:i,error:f,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},d=!0,u=!0;if((gw(a)?a:[a]).forEach(f=>{f.check(),d=d?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),l===c&&u){const{parent:f}=r.doc.resolve(l);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(l-=1,c+=1)}let h;if(d){if(Array.isArray(e))h=e.map(f=>f.text||"").join("");else if(e instanceof W){let f="";e.forEach(m=>{m.text&&(f+=m.text)}),h=f}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,l,c)}else h=a,r.replaceWith(l,c,h);t.updateSelection&&mw(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},xw=()=>({state:n,dispatch:e})=>xk(n,e),vw=()=>({state:n,dispatch:e})=>vk(n,e),bw=()=>({state:n,dispatch:e})=>pk(n,e),kw=()=>({state:n,dispatch:e})=>gk(n,e),ww=()=>({state:n,dispatch:e,tr:t})=>{try{const r=ii(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Sw=()=>({state:n,dispatch:e,tr:t})=>{try{const r=ii(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Cw=()=>({state:n,dispatch:e})=>fk(n,e),Mw=()=>({state:n,dispatch:e})=>hk(n,e);function Yu(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Dw(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))ta()||Yu()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const Tw=n=>({editor:e,view:t,tr:r,dispatch:o})=>{const i=Dw(n).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function Yr(n,e,t={}){const{from:r,to:o,empty:i}=n.selection,s=e?Ve(e,n.schema):null,a=[];n.doc.nodesBetween(r,o,(u,p)=>{if(u.isText)return;const h=Math.max(r,p),f=Math.min(o,p+u.nodeSize);a.push({node:u,from:h,to:f})});const l=o-r,c=a.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>qo(u.node.attrs,t,{strict:!1}));return i?!!c.length:c.reduce((u,p)=>u+p.to-p.from,0)>=l}const Ow=(n,e={})=>({state:t,dispatch:r})=>{const o=Ve(n,t.schema);return Yr(t,o,e)?bk(t,r):!1},Ew=()=>({state:n,dispatch:e})=>Ck(n,e),Pw=n=>({state:e,dispatch:t})=>{const r=Ve(n,e.schema);return Ik(r)(e,t)},Aw=()=>({state:n,dispatch:e})=>kk(n,e);function no(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function tc(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,o)=>(t.includes(o)||(r[o]=n[o]),r),{})}const Iw=(n,e)=>({tr:t,state:r,dispatch:o})=>{let i=null,s=null;const a=no(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=Ve(n,r.schema)),a==="mark"&&(s=Wt(n,r.schema)),o&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{i&&i===c.type&&t.setNodeMarkup(d,void 0,tc(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(u=>{s===u.type&&t.addMark(d,d+c.nodeSize,s.create(tc(u.attrs,e)))})})}),!0):!1},Nw=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Rw=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),Fw=()=>({state:n,dispatch:e})=>mk(n,e),jw=()=>({state:n,dispatch:e})=>yk(n,e),Lw=()=>({state:n,dispatch:e})=>Mk(n,e),Vw=()=>({state:n,dispatch:e})=>Ok(n,e),$w=()=>({state:n,dispatch:e})=>Tk(n,e);function ws(n,e,t={},r={}){return Yo(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const Bw=(n,e=!1,t={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:d}=i;if(t.preserveWhitespace!=="full"){const u=ws(n,o.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:d.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function Ku(n,e){const t=Wt(e,n.schema),{from:r,to:o,empty:i}=n.selection,s=[];i?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function zw(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function _w(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function na(n){return e=>_w(e.$from,n)}function Hw(n,e){const t={from:0,to:n.content.size};return zu(n,t,e)}function Ww(n,e){const t=Ve(e,n.schema),{from:r,to:o}=n.selection,i=[];n.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===t.name);return s?{...s.attrs}:{}}function Uw(n,e){const t=no(typeof e=="string"?e:e.name,n.schema);return t==="node"?Ww(n,e):t==="mark"?Ku(n,e):{}}function Ju(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(o=>{const i=t.resolve(n),s=ea(i,o.type);s&&r.push({mark:o,...s})}):t.nodesBetween(n,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function Mo(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=n.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function Ss(n,e,t={}){const{empty:r,ranges:o}=n.selection,i=e?Wt(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(u=>i?i.name===u.type.name:!0).find(u=>qo(u.attrs,t,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:u,$to:p})=>{const h=u.pos,f=p.pos;n.doc.nodesBetween(h,f,(m,g)=>{if(!m.isText&&!m.marks.length)return;const x=Math.max(h,g),v=Math.min(f,g+m.nodeSize),k=v-x;s+=k,a.push(...m.marks.map(w=>({mark:w,from:x,to:v})))})}),s===0)return!1;const l=a.filter(u=>i?i.name===u.mark.type.name:!0).filter(u=>qo(u.mark.attrs,t,{strict:!1})).reduce((u,p)=>u+p.to-p.from,0),c=a.filter(u=>i?u.mark.type!==i&&u.mark.type.excludes(i):!0).reduce((u,p)=>u+p.to-p.from,0);return(l>0?l+c:l)>=s}function qw(n,e,t={}){if(!e)return Yr(n,null,t)||Ss(n,null,t);const r=no(e,n.schema);return r==="node"?Yr(n,e,t):r==="mark"?Ss(n,e,t):!1}function nc(n,e){const{nodeExtensions:t}=fi(e),r=t.find(s=>s.name===n);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=ye(ae(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function ra(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(i=>{o!==!1&&(ra(i,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function Yw(n){return n instanceof ue}function Kw(n,e,t){var r;const{selection:o}=e;let i=null;if(Wu(o)&&(i=o.$cursor),i){const a=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(d,u,p)=>{if(c)return!1;if(d.isInline){const h=!p||p.type.allowsMarkType(t),f=!!t.isInSet(d.marks)||!d.marks.some(m=>m.type.excludes(t));c=h&&f}return!c}),c})}const Jw=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:i}=t,{empty:s,ranges:a}=i,l=Wt(n,r.schema);if(o)if(s){const c=Ku(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(p,h)=>{const f=Math.max(h,d),m=Math.min(h+p.nodeSize,u);p.marks.find(x=>x.type===l)?p.marks.forEach(x=>{l===x.type&&t.addMark(f,m,l.create({...x.attrs,...e}))}):t.addMark(f,m,l.create(e))})});return Kw(r,t,l)},Gw=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Zw=(n,e={})=>({state:t,dispatch:r,chain:o})=>{const i=Ve(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>Gl(i,{...s,...e})(t)?!0:a.clearNodes()).command(({state:a})=>Gl(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Xw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=Pn(n,0,r.content.size),i=ue.create(r,o);e.setSelection(i)}return!0},Qw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:i}=typeof n=="number"?{from:n,to:n}:n,s=he.atStart(r).from,a=he.atEnd(r).to,l=Pn(o,s,a),c=Pn(i,s,a),d=he.create(r,l,c);e.setSelection(d)}return!0},eS=n=>({state:e,dispatch:t})=>{const r=Ve(n,e.schema);return Fk(r)(e,t)};function rc(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(o=>e==null?void 0:e.includes(o.type.name));n.tr.ensureMarks(r)}}const tS=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,c=o.extensionManager.attributes,d=Mo(c,a.node().type.name,a.node().attrs);if(i instanceof ue&&i.node.isBlock)return!a.parentOffset||!lr(s,a.pos)?!1:(r&&(n&&rc(t,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:zw(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=u&&p?[{type:p,attrs:d}]:void 0,f=lr(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!f&&lr(e.doc,e.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(f=!0,h=p?[{type:p,attrs:d}]:void 0),r){if(f&&(i instanceof he&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),p&&!u&&!a.parentOffset&&a.parent.type!==p)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,p)&&e.setNodeMarkup(e.mapping.map(a.before()),p)}n&&rc(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return f},nS=(n,e={})=>({tr:t,state:r,dispatch:o,editor:i})=>{var s;const a=Ve(n,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const p=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let x=W.empty;const v=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-v;M>=l.depth-3;M-=1)x=W.from(l.node(M).copy(x));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,w={...Mo(p,l.node().type.name,l.node().attrs),...e},D=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;x=x.append(W.from(a.createAndFill(null,D)||void 0));const E=l.before(l.depth-(v-1));t.replace(E,l.after(-k),new ie(x,4-v,0));let P=-1;t.doc.nodesBetween(E,t.doc.content.size,(M,R)=>{if(P>-1)return!1;M.isTextblock&&M.content.size===0&&(P=R+1)}),P>-1&&t.setSelection(he.near(t.doc.resolve(P))),t.scrollIntoView()}return!0}const h=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,f={...Mo(p,u.type.name,u.attrs),...e},m={...Mo(p,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const g=h?[{type:a,attrs:f},{type:h,attrs:m}]:[{type:a,attrs:f}];if(!lr(t.doc,l.pos,2))return!1;if(o){const{selection:x,storedMarks:v}=r,{splittableMarks:k}=i.extensionManager,w=v||x.$to.parentOffset&&x.$from.marks();if(t.split(l.pos,2,g).scrollIntoView(),!w||!o)return!0;const D=w.filter(E=>k.includes(E.type.name));t.ensureMarks(D)}return!0},Vi=(n,e)=>{const t=na(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&pn(n.doc,t.pos)&&n.join(t.pos),!0},$i=(n,e)=>{const t=na(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&pn(n.doc,r)&&n.join(r),!0},rS=(n,e,t,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:p}=o.extensionManager,h=Ve(n,s.schema),f=Ve(e,s.schema),{selection:m,storedMarks:g}=s,{$from:x,$to:v}=m,k=x.blockRange(v),w=g||m.$to.parentOffset&&m.$from.marks();if(!k)return!1;const D=na(E=>nc(E.type.name,u))(m);if(k.depth>=1&&D&&k.depth-D.depth<=1){if(D.node.type===h)return c.liftListItem(f);if(nc(D.node.type.name,u)&&h.validContent(D.node.content)&&a)return l().command(()=>(i.setNodeMarkup(D.pos,h),!0)).command(()=>Vi(i,h)).command(()=>$i(i,h)).run()}return!t||!w||!a?l().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Vi(i,h)).command(()=>$i(i,h)).run():l().command(()=>{const E=d().wrapInList(h,r),P=w.filter(M=>p.includes(M.type.name));return i.ensureMarks(P),E?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Vi(i,h)).command(()=>$i(i,h)).run()},oS=(n,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=t,s=Wt(n,r.schema);return Ss(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},iS=(n,e,t={})=>({state:r,commands:o})=>{const i=Ve(n,r.schema),s=Ve(e,r.schema),a=Yr(r,i,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...t})},sS=(n,e={})=>({state:t,commands:r})=>{const o=Ve(n,t.schema);return Yr(t,o,e)?r.lift(o):r.wrapIn(o,e)},aS=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let i;if(o.spec.isInputRules&&(i=o.getState(n))){if(e){const s=n.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,n.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},lS=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:o}=t;return r||e&&o.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},cS=(n,e={})=>({tr:t,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=t,l=Wt(n,r.schema),{$from:c,empty:d,ranges:u}=a;if(!o)return!0;if(d&&s){let{from:p,to:h}=a;const f=(i=c.marks().find(g=>g.type===l))===null||i===void 0?void 0:i.attrs,m=ea(c,l,f);m&&(p=m.from,h=m.to),t.removeMark(p,h,l)}else u.forEach(p=>{t.removeMark(p.$from.pos,p.$to.pos,l)});return t.removeStoredMark(l),!0},dS=(n,e={})=>({tr:t,state:r,dispatch:o})=>{let i=null,s=null;const a=no(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=Ve(n,r.schema)),a==="mark"&&(s=Wt(n,r.schema)),o&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let u,p,h,f;t.selection.empty?r.doc.nodesBetween(c,d,(m,g)=>{i&&i===m.type&&(h=Math.max(g,c),f=Math.min(g+m.nodeSize,d),u=g,p=m)}):r.doc.nodesBetween(c,d,(m,g)=>{g<c&&i&&i===m.type&&(h=Math.max(g,c),f=Math.min(g+m.nodeSize,d),u=g,p=m),g>=c&&g<=d&&(i&&i===m.type&&t.setNodeMarkup(g,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(x=>{if(s===x.type){const v=Math.max(g,c),k=Math.min(g+m.nodeSize,d);t.addMark(v,k,s.create({...x.attrs,...e}))}}))}),p&&(u!==void 0&&t.setNodeMarkup(u,void 0,{...p.attrs,...e}),s&&p.marks.length&&p.marks.forEach(m=>{s===m.type&&t.addMark(h,f,s.create({...m.attrs,...e}))}))}),!0):!1},uS=(n,e={})=>({state:t,dispatch:r})=>{const o=Ve(n,t.schema);return Ek(o,e)(t,r)},pS=(n,e={})=>({state:t,dispatch:r})=>{const o=Ve(n,t.schema);return Pk(o,e)(t,r)};var fS=Object.freeze({__proto__:null,blur:Xk,clearContent:Qk,clearNodes:ew,command:tw,createParagraphNear:nw,cut:rw,deleteCurrentNode:ow,deleteNode:iw,deleteRange:sw,deleteSelection:aw,enter:lw,exitCode:cw,extendMarkRange:dw,first:uw,focus:pw,forEach:fw,insertContent:hw,insertContentAt:yw,joinBackward:bw,joinDown:vw,joinForward:kw,joinItemBackward:ww,joinItemForward:Sw,joinTextblockBackward:Cw,joinTextblockForward:Mw,joinUp:xw,keyboardShortcut:Tw,lift:Ow,liftEmptyBlock:Ew,liftListItem:Pw,newlineInCode:Aw,resetAttributes:Iw,scrollIntoView:Nw,selectAll:Rw,selectNodeBackward:Fw,selectNodeForward:jw,selectParentNode:Lw,selectTextblockEnd:Vw,selectTextblockStart:$w,setContent:Bw,setMark:Jw,setMeta:Gw,setNode:Zw,setNodeSelection:Xw,setTextSelection:Qw,sinkListItem:eS,splitBlock:tS,splitListItem:nS,toggleList:rS,toggleMark:oS,toggleNode:iS,toggleWrap:sS,undoInputRule:aS,unsetAllMarks:lS,unsetMark:cS,updateAttributes:dS,wrapIn:uS,wrapInList:pS});const hS=tt.create({name:"commands",addCommands(){return{...fS}}}),mS=tt.create({name:"drop",addProseMirrorPlugins(){return[new it({key:new jt("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),gS=tt.create({name:"editable",addProseMirrorPlugins(){return[new it({key:new jt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),yS=tt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new it({key:new jt("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),xS=tt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:p,parent:h}=u,f=u.parent.isTextblock&&p>0?a.doc.resolve(p-1):u,m=f.parent.type.spec.isolating,g=u.pos-u.parentOffset,x=m&&f.parent.childCount===1?g===u.pos:ge.atStart(c).from===p;return!d||!h.type.isTextblock||h.textContent.length||!x||x&&u.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ta()||Yu()?i:o},addProseMirrorPlugins(){return[new it({key:new jt("clearDocument"),appendTransaction:(n,e,t)=>{const r=n.some(m=>m.docChanged)&&!e.doc.eq(t.doc),o=n.some(m=>m.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=ge.atStart(e.doc).from,c=ge.atEnd(e.doc).to;if(i||!(s===l&&a===c)||!ra(t.doc))return;const p=t.tr,h=ui({state:t,transaction:p}),{commands:f}=new pi({editor:this.editor,state:h});if(f.clearNodes(),!!p.steps.length)return p}})]}}),vS=tt.create({name:"paste",addProseMirrorPlugins(){return[new it({key:new jt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),bS=tt.create({name:"tabindex",addProseMirrorPlugins(){return[new it({key:new jt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Tn{get name(){return this.node.type.name}constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Tn(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Tn(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Tn(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const o=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,s=this.pos+r+(i?0:1),a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new Tn(a,this.editor,o,o?t:null);o&&(l.actualDepth=this.depth+1),e.push(new Tn(a,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){const i=o.node.attrs,s=Object.keys(t);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==t[l])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(t);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(l=>t[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,t,r))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const kS=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function wS(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}class SS extends jk{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:o})=>this.options.onDrop(t,r,o)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=wS(kS,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Bu(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=t.filter(a=>!a.key.startsWith(s))}),t.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[gS,Zk.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),hS,yS,xS,bS,mS,vS].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new rr(o,this)}createCommandManager(){this.commandManager=new pi({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=ws(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=ws(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Uu(t,this.options.autofocus);this.view=new tk(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:nr.create({doc:t,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Uw(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return qw(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Xs(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Hw(this.state.doc,{blockSeparator:t,textSerializers:{..._u(this.schema),...r}})}get isEmpty(){return ra(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Tn(t,this)}get $doc(){return this.$pos(0)}}function gr(n){return new hi({find:n.find,handler:({state:e,range:t,match:r})=>{const o=ye(n.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=t.from+a.indexOf(s),d=c+s.length;if(Ju(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;d<t.to&&i.delete(d,t.to),c>t.from&&i.delete(t.from+l,c);const p=t.from+l+s.length;i.addMark(t.from+l,p,n.type.create(o||{})),i.removeStoredMark(n.type)}}})}function CS(n){return new hi({find:n.find,handler:({state:e,range:t,match:r})=>{const o=ye(n.getAttributes,void 0,r)||{},{tr:i}=e,s=t.from;let a=t.to;const l=n.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=s+c;d>a?d=a:a=d+r[1].length;const u=r[0][r[0].length-1];i.insertText(u,s+r[0].length-1),i.replaceWith(d,a,l)}else if(r[0]){const c=n.type.isInline?s:s-1;i.insert(c,n.type.create(o)).delete(i.mapping.map(s),i.mapping.map(a))}i.scrollIntoView()}})}function Cs(n){return new hi({find:n.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),i=ye(n.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function Kr(n){return new hi({find:n.find,handler:({state:e,range:t,match:r,chain:o})=>{const i=ye(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),l=s.doc.resolve(t.from).blockRange(),c=l&&Bs(l,n.type,i);if(!c)return null;if(s.wrap(l,c),n.keepMarks&&n.editor){const{selection:u,storedMarks:p}=e,{splittableMarks:h}=n.editor.extensionManager,f=p||u.$to.parentOffset&&u.$from.marks();if(f){const m=f.filter(g=>h.includes(g.type.name));s.ensureMarks(m)}}if(n.keepAttributes){const u=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,i).run()}const d=s.doc.resolve(t.from-1).nodeBefore;d&&d.type===n.type&&pn(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,d))&&s.join(t.from-1)}})}class ot{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ye(ae(this,"addOptions",{name:this.name}))),this.storage=ye(ae(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ot(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>mi(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ot(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ye(ae(t,"addOptions",{name:t.name})),t.storage=ye(ae(t,"addStorage",{name:t.name,options:t.options})),t}}function yr(n){return new Uk({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const i=ye(n.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const d=l.search(/\S/),u=t.from+l.indexOf(a),p=u+a.length;if(Ju(t.from,t.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===n.type&&g!==f.mark.type)).filter(f=>f.to>u).length)return null;p<t.to&&s.delete(p,t.to),u>t.from&&s.delete(t.from+d,u),c=t.from+d+a.length,s.addMark(t.from+d,c,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function MS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gu={exports:{}},Bi={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc;function DS(){if(oc)return Bi;oc=1;var n=Le;function e(u,p){return u===p&&(u!==0||1/u===1/p)||u!==u&&p!==p}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,o=n.useEffect,i=n.useLayoutEffect,s=n.useDebugValue;function a(u,p){var h=p(),f=r({inst:{value:h,getSnapshot:p}}),m=f[0].inst,g=f[1];return i(function(){m.value=h,m.getSnapshot=p,l(m)&&g({inst:m})},[u,h,p]),o(function(){return l(m)&&g({inst:m}),u(function(){l(m)&&g({inst:m})})},[u]),s(h),h}function l(u){var p=u.getSnapshot;u=u.value;try{var h=p();return!t(u,h)}catch{return!0}}function c(u,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Bi.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,Bi}Gu.exports=DS();var oa=Gu.exports;const TS=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},OS=({contentComponent:n})=>{const e=oa.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Le.createElement(Le.Fragment,null,Object.values(e))};function ES(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:Hp.createPortal(r.reactElement,r.element,t)},n.forEach(o=>o())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(o=>o())}}}class PS extends Le.Component{constructor(e){var t;super(e),this.editorContentRef=Le.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=ES(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Le.createElement(Le.Fragment,null,Le.createElement("div",{ref:TS(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Le.createElement(OS,{contentComponent:e.contentComponent}))}}const AS=b.forwardRef((n,e)=>{const t=Le.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Le.createElement(PS,{key:t,innerRef:e,...n})}),IS=Le.memo(AS);var NS=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[o]))return!1;for(o=r;o--!==0;){var s=i[o];if(!(s==="_owner"&&e.$$typeof)&&!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t},RS=MS(NS),Zu={exports:{}},zi={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic;function FS(){if(ic)return zi;ic=1;var n=Le,e=oa;function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,i=n.useRef,s=n.useEffect,a=n.useMemo,l=n.useDebugValue;return zi.useSyncExternalStoreWithSelector=function(c,d,u,p,h){var f=i(null);if(f.current===null){var m={hasValue:!1,value:null};f.current=m}else m=f.current;f=a(function(){function x(E){if(!v){if(v=!0,k=E,E=p(E),h!==void 0&&m.hasValue){var P=m.value;if(h(P,E))return w=P}return w=E}if(P=w,r(k,E))return P;var M=p(E);return h!==void 0&&h(P,M)?P:(k=E,w=M)}var v=!1,k,w,D=u===void 0?null:u;return[function(){return x(d())},D===null?void 0:function(){return x(D())}]},[d,u,p,h]);var g=o(c,f[0],f[1]);return s(function(){m.hasValue=!0,m.value=g},[g]),l(g),g},zi}Zu.exports=FS();var jS=Zu.exports;const LS=typeof window<"u"?b.useLayoutEffect:b.useEffect;class VS{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function $S(n){var e;const[t]=b.useState(()=>new VS(n.editor)),r=jS.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:RS);return LS(()=>t.watch(n.editor),[n.editor,t]),b.useDebugValue(r),r}const BS=!1,Ms=typeof window>"u",zS=Ms||!!(typeof window<"u"&&window.next);class _S{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Ms||zS?null:this.createEditor();if(this.options.current.immediatelyRender&&Ms&&BS)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(o,...r)},onBlur:(...r)=>{var o,i;return(i=(o=this.options.current).onBlur)===null||i===void 0?void 0:i.call(o,...r)},onCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onCreate)===null||i===void 0?void 0:i.call(o,...r)},onDestroy:(...r)=>{var o,i;return(i=(o=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(o,...r)},onFocus:(...r)=>{var o,i;return(i=(o=this.options.current).onFocus)===null||i===void 0?void 0:i.call(o,...r)},onSelectionUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(o,...r)},onTransaction:(...r)=>{var o,i;return(i=(o=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(o,...r)},onUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(o,...r)},onContentError:(...r)=>{var o,i;return(i=(o=this.options.current).onContentError)===null||i===void 0?void 0:i.call(o,...r)},onDrop:(...r)=>{var o,i;return(i=(o=this.options.current).onDrop)===null||i===void 0?void 0:i.call(o,...r)},onPaste:(...r)=>{var o,i;return(i=(o=this.options.current).onPaste)===null||i===void 0?void 0:i.call(o,...r)}};return new SS(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function HS(n={},e=[]){const t=b.useRef(n);t.current=n;const[r]=b.useState(()=>new _S(t)),o=oa.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(o),b.useEffect(r.onRender(e)),$S({editor:o,selector:({transactionNumber:i})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&i===0?0:i+1}),o}const WS=b.createContext({editor:null});WS.Consumer;const US=b.createContext({onDragStart:void 0}),qS=()=>b.useContext(US);Le.forwardRef((n,e)=>{const{onDragStart:t}=qS(),r=n.as||"div";return Le.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const YS=/^\s*>\s$/,KS=ot.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",et(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Kr({find:YS,type:this.type})]}}),JS=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,GS=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ZS=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,XS=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,QS=cn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",et(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[gr({find:JS,type:this.type}),gr({find:ZS,type:this.type})]},addPasteRules(){return[yr({find:GS,type:this.type}),yr({find:XS,type:this.type})]}}),e1="listItem",sc="textStyle",ac=/^\s*([-+*])\s$/,t1=ot.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",et(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(e1,this.editor.getAttributes(sc)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Kr({find:ac,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Kr({find:ac,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(sc),editor:this.editor})),[n]}}),n1=new RegExp("(?<!`)`([^`]+)`(?!`)"),r1=new RegExp("(?<!`)`([^`]+)`(?!`)","g"),o1=cn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",et(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[gr({find:n1,type:this.type})]},addPasteRules(){return[yr({find:r1,type:this.type})]}}),i1=/^```([a-z]+)?[\s\n]$/,s1=/^~~~([a-z]+)?[\s\n]$/,a1=ot.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",et(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:o,empty:i}=t;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(ge.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[Cs({find:i1,type:this.type,getAttributes:n=>({language:n[1]})}),Cs({find:s1,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new it({key:new jt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!t||!i)return!1;const{tr:s,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(he.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),l1=ot.create({name:"doc",topNode:!0,content:"block+"});function c1(n={}){return new it({view(e){return new d1(e,n)}})}class d1{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let d=c.getBoundingClientRect(),u=a?d.bottom:d.top;a&&l&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:d.left,right:d.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let a=o.getBoundingClientRect();i=a.left-o.scrollLeft,s=a.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!i){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Ud(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const u1=tt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[c1(this.options)]}});class Ee extends ge{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ee.valid(r)?new Ee(r):ge.near(r)}content(){return ie.empty}eq(e){return e instanceof Ee&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ee(e.resolve(t.pos))}getBookmark(){return new ia(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!p1(e)||!f1(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ee.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(t>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=t;let l=e.doc.resolve(o);if(Ee.valid(l))return l}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!ue.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*t),r=!1;continue e}break}i=s,o+=t;let a=e.doc.resolve(o);if(Ee.valid(a))return a}return null}}}Ee.prototype.visible=!1;Ee.findFrom=Ee.findGapCursorFrom;ge.jsonID("gapcursor",Ee);class ia{constructor(e){this.pos=e}map(e){return new ia(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ee.valid(t)?new Ee(t):ge.near(t)}}function p1(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function f1(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function h1(){return new it({props:{decorations:x1,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ee.valid(t)?new Ee(t):null},handleClick:g1,handleKeyDown:m1,handleDOMEvents:{beforeinput:y1}}})}const m1=Iu({ArrowLeft:go("horiz",-1),ArrowRight:go("horiz",1),ArrowUp:go("vert",-1),ArrowDown:go("vert",1)});function go(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof he){if(!i.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Ee.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Ee(c))),!0):!1}}function g1(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ee.valid(r))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&ue.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ee(r))),!0)}function y1(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ee))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let o=W.empty;for(let s=r.length-1;s>=0;s--)o=W.from(r[s].createAndFill(null,o));let i=n.state.tr.replace(t.pos,t.pos,new ie(o,0,0));return i.setSelection(he.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function x1(n){if(!(n.selection instanceof Ee))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",je.create(n.doc,[gt.widget(n.selection.head,e,{key:"gapcursor"})])}const v1=tt.create({name:"gapCursor",addProseMirrorPlugins(){return[h1()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ye(ae(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),b1=ot.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",et(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:i}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&l&&s){const u=l.filter(p=>a.includes(p.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),k1=ot.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,et(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Cs({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ko=200,_e=function(){};_e.prototype.append=function(e){return e.length?(e=_e.from(e),!this.length&&e||e.length<Ko&&this.leafAppend(e)||this.length<Ko&&e.leafPrepend(this)||this.appendInner(e)):this};_e.prototype.prepend=function(e){return e.length?_e.from(e).append(this):this};_e.prototype.appendInner=function(e){return new w1(this,e)};_e.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?_e.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};_e.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};_e.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};_e.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},t,r),o};_e.from=function(e){return e instanceof _e?e:e&&e.length?new Xu(e):_e.empty};var Xu=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Ko)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Ko)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(_e);_e.empty=new Xu([]);var w1=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(_e);const S1=500;class Ct{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;t&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],d=[];return this.items.forEach((u,p)=>{if(!u.step){o||(o=this.remapping(r,p+1),i=o.maps.length),i--,d.push(u);return}if(o){d.push(new Et(u.map));let h=u.step.map(o.slice(i)),f;h&&s.maybeStep(h).doc&&(f=s.mapping.maps[s.mapping.maps.length-1],c.push(new Et(f,void 0,void 0,c.length+d.length))),i--,f&&o.appendMap(f,i)}else s.maybeStep(u.step);if(u.selection)return a=o?u.selection.map(o.slice(i)):u.selection,l=new Ct(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,t,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),p=new Et(e.mapping.maps[d],u,t),h;(h=l&&l.merge(p))&&(p=h,d?i.pop():a=a.slice(0,a.length-1)),i.push(p),t&&(s++,t=void 0),o||(l=p)}let c=s-r.depth;return c>M1&&(a=C1(a,c),s-=c),new Ct(a.append(i),s)}remapping(e,t){let r=new ar;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new Ct(this.items.append(e.map(t=>new Et(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},o);let l=t;this.items.forEach(p=>{let h=i.getMirror(--l);if(h==null)return;s=Math.min(s,h);let f=i.maps[h];if(p.step){let m=e.steps[h].invert(e.docs[h]),g=p.selection&&p.selection.map(i.slice(l+1,h));g&&a++,r.push(new Et(f,m,g))}else r.push(new Et(f))},o);let c=[];for(let p=t;p<s;p++)c.push(new Et(i.maps[p]));let d=this.items.slice(0,o).append(c).append(r),u=new Ct(d,a);return u.emptyItemCount()>S1&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let d=s.selection&&s.selection.map(t.slice(r));d&&i++;let u=new Et(c.invert(),l,d),p,h=o.length-1;(p=o.length&&o[h].merge(u))?o[h]=p:o.push(u)}}else s.map&&r--},this.items.length,0),new Ct(_e.from(o.reverse()),i)}}Ct.empty=new Ct(_e.empty,0);function C1(n,e){let t;return n.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),n.slice(t)}class Et{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Et(t.getMap().invert(),t,this.selection)}}}class Gt{constructor(e,t,r,o,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const M1=20;function D1(n,e,t,r){let o=t.getMeta(jn),i;if(o)return o.historyState;t.getMeta(E1)&&(n=new Gt(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(jn))return s.getMeta(jn).redo?new Gt(n.done.addTransform(t,void 0,r,Do(e)),n.undone,lc(t.mapping.maps),n.prevTime,n.prevComposition):new Gt(n.done,n.undone.addTransform(t,void 0,r,Do(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!s&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!T1(t,n.prevRanges)),c=s?_i(n.prevRanges,t.mapping):lc(t.mapping.maps);return new Gt(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,Do(e)),Ct.empty,c,t.time,a??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Gt(n.done.rebased(t,i),n.undone.rebased(t,i),_i(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Gt(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),_i(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function T1(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(t=!0)}),t}function lc(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,o,i,s)=>e.push(i,s));return e}function _i(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let o=e.map(n[r],1),i=e.map(n[r+1],-1);o<=i&&t.push(o,i)}return t}function O1(n,e,t){let r=Do(e),o=jn.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new Gt(t?a:i.remaining,t?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(jn,{redo:t,historyState:l})}let Hi=!1,cc=null;function Do(n){let e=n.plugins;if(cc!=e){Hi=!1,cc=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Hi=!0;break}}return Hi}const jn=new jt("history"),E1=new jt("closeHistory");function P1(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new it({key:jn,state:{init(){return new Gt(Ct.empty,Ct.empty,null,0,-1)},apply(e,t,r){return D1(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?ep:r=="historyRedo"?tp:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function Qu(n,e){return(t,r)=>{let o=jn.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(r){let i=O1(o,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const ep=Qu(!1,!0),tp=Qu(!0,!0),A1=tt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>ep(n,e),redo:()=>({state:n,dispatch:e})=>tp(n,e)}},addProseMirrorPlugins(){return[P1(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),I1=ot.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",et(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:o}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):Yw(t)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(he.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(ue.create(s.doc,c.pos)):s.setSelection(he.create(s.doc,c.pos));else{const u=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();u&&(s.insert(d,u),s.setSelection(he.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[CS({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),N1=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,R1=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,F1=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,j1=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,L1=cn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",et(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[gr({find:N1,type:this.type}),gr({find:F1,type:this.type})]},addPasteRules(){return[yr({find:R1,type:this.type}),yr({find:j1,type:this.type})]}}),V1=ot.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",et(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$1="listItem",dc="textStyle",uc=/^(\d+)\.\s$/,B1=ot.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",et(this.options.HTMLAttributes,t),0]:["ol",et(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($1,this.editor.getAttributes(dc)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Kr({find:uc,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Kr({find:uc,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(dc)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),z1=ot.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",et(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,H1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,W1=cn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",et(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[gr({find:_1,type:this.type})]},addPasteRules(){return[yr({find:H1,type:this.type})]}}),U1=ot.create({name:"text",group:"inline"}),q1=tt.create({name:"starterKit",addExtensions(){var n,e,t,r,o,i,s,a,l,c,d,u,p,h,f,m,g,x;const v=[];return this.options.bold!==!1&&v.push(QS.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&v.push(KS.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&v.push(t1.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&v.push(o1.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(a1.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&v.push(l1.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&v.push(u1.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&v.push(v1.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&v.push(b1.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&v.push(k1.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&v.push(A1.configure((d=this.options)===null||d===void 0?void 0:d.history)),this.options.horizontalRule!==!1&&v.push(I1.configure((u=this.options)===null||u===void 0?void 0:u.horizontalRule)),this.options.italic!==!1&&v.push(L1.configure((p=this.options)===null||p===void 0?void 0:p.italic)),this.options.listItem!==!1&&v.push(V1.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&v.push(B1.configure((f=this.options)===null||f===void 0?void 0:f.orderedList)),this.options.paragraph!==!1&&v.push(z1.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&v.push(W1.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&v.push(U1.configure((x=this.options)===null||x===void 0?void 0:x.text)),v}}),np=Object.fromEntries?Object.fromEntries:n=>{if(!n||!n[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const e={};return Object.keys(n).forEach(t=>{const[r,o]=n[t];e[r]=o}),e};function dn(n){return Object.keys(n)}function An(n,e){if(!n)throw new Error(e)}function sa(n,e){return e}const aa=n=>{const e=n.length;let t=0,r="";for(;t<e;t++){const o=n[t];if(o==null)continue;let i;switch(typeof o){case"boolean":break;case"object":{if(Array.isArray(o))i=aa(o);else{An(!sa(o,!1)),i="";for(const s in o)o[s]&&s&&(i&&(i+=" "),i+=s)}break}default:i=o}i&&(r&&(r+=" "),r+=i)}return r};function Y1(n,e){var t;const r=b.useRef();return(!r.current||e.length!==((t=r.current.prevDeps)===null||t===void 0?void 0:t.length)||r.current.prevDeps.map((o,i)=>o===e[i]).indexOf(!1)>=0)&&(r.current={v:n(),prevDeps:[...e]}),r.current.v}function K1(n){return n instanceof Object&&!("styles"in n)&&!("length"in n)&&!("__emotion_styles"in n)}const{createCssAndCx:J1}=(()=>{function n(t,r,o){const i=[],s=Mp(t,i,o);return i.length<2?o:s+r(i)}function e(t){const{cache:r}=t,o=(...s)=>{const a=Sp(s,r.registered);Cp(r,a,!1);const l=`${r.key}-${a.name}`;e:{const c=s[0];if(!K1(c))break e;pc.saveClassNameCSSObjectMapping(r,l,c)}return l};return{css:o,cx:(...s)=>{const a=aa(s),l=pc.fixClassName(r,a,o);return n(r.registered,o,l)}}}return{createCssAndCx:e}})();function rp(n){const{useCache:e}=n;function t(){const r=e(),{css:o,cx:i}=Y1(()=>J1({cache:r}),[r]);return{css:o,cx:i}}return{useCssAndCx:t}}const pc=(()=>{const n=new WeakMap;return{saveClassNameCSSObjectMapping:(e,t,r)=>{let o=n.get(e);o===void 0&&(o=new Map,n.set(e,o)),o.set(t,r)},fixClassName:(()=>{function e(t){let r=!1;return t.map(([o,i])=>{if(i===void 0)return o;let s;if(r)s={"&&":i};else{s=o;for(const a in i)if(a.startsWith("@media")){r=!0;break}}return s})}return(t,r,o)=>{const i=n.get(t);return aa(e(r.split(" ").map(s=>[s,i==null?void 0:i.get(s)])).map(s=>typeof s=="string"?s:o(s)))}})()}})();function un(n){if(!(n instanceof Object)||typeof n=="function")return n;const e=[];for(const t in n){const r=n[t],o=typeof r;if(!(o==="string"||o==="number"&&!isNaN(r)||o==="boolean"||r===void 0||r===null))return n;e.push(`${t}:${o}_${r}`)}return"xSqLiJdLMd9s"+e.join("|")}function la(n,e,t){if(!(e instanceof Object))return n;const r={};return dn(n).forEach(o=>r[o]=t(n[o],e[o])),dn(e).forEach(o=>{if(o in n)return;const i=e[o];typeof i=="string"&&(r[o]=i)}),r}const op=({classes:n,theme:e,muiStyleOverridesParams:t,css:r,cx:o,name:i})=>{var s,a;e:{if(i==="makeStyle no name"){i=void 0;break e}if(t!==void 0&&i===void 0)throw new Error("To use muiStyleOverridesParams, you must specify a name using .withName('MyComponent')")}let l;try{l=i===void 0?void 0:((a=(s=e.components)===null||s===void 0?void 0:s[i])===null||a===void 0?void 0:a.styleOverrides)||void 0}catch{}const c=b.useMemo(()=>{if(l===void 0)return;const d={};for(const u in l){const p=l[u];p instanceof Object&&(d[u]=r(typeof p=="function"?p({theme:e,ownerState:t==null?void 0:t.ownerState,...t==null?void 0:t.props}):p))}return d},[l,un(t==null?void 0:t.props),un(t==null?void 0:t.ownerState),r]);return n=b.useMemo(()=>la(n,c,o),[n,c,o]),{classes:n}},G1=Dp;let Z1=0;function ip(n){const{useTheme:e,cache:t}=n,{useCache:r}=sp({cacheProvidedAtInception:t}),{useCssAndCx:o}=rp({useCache:r});function i(a){const{name:l,uniqId:c=`${Z1++}`}=a??{},d=typeof l!="object"?l:Object.keys(l)[0];return function(u){const p=typeof u=="function"?u:()=>u;return function(f,m){const g=e();let{css:x,cx:v}=o();const k=r();let w=b.useMemo(()=>{const D={},E=typeof Proxy<"u"&&new Proxy({},{get:(R,F)=>(typeof F=="symbol"&&An(!1),D[F]=`${k.key}-${c}${d!==void 0?`-${d}`:""}-${F}-ref`)}),P=p(g,f,E||{}),M=np(dn(P).map(R=>{const F=P[R];return F.label||(F.label=`${d!==void 0?`${d}-`:""}${R}`),[R,`${x(F)}${sa(R,R in D)?` ${D[R]}`:""}`]}));return dn(D).forEach(R=>{R in M||(M[R]=D[R])}),M},[k,x,v,g,un(f)]);{const D=m==null?void 0:m.props.classes;w=b.useMemo(()=>la(w,D,v),[w,un(D),v])}{const D=op({classes:w,css:x,cx:v,name:d??"makeStyle no name",idOfUseStyles:c,muiStyleOverridesParams:m,theme:g});D.classes!==void 0&&(w=D.classes),D.css!==void 0&&(x=D.css),D.cx!==void 0&&(v=D.cx)}return{classes:w,theme:g,css:x,cx:v}}}}function s(){const a=e(),{css:l,cx:c}=o();return{theme:a,css:l,cx:c}}return{makeStyles:i,useStyles:s}}const X1=b.createContext(void 0),{createUseCache:sp}=(()=>{function n(){return b.useContext(X1)}function e(t){const{cacheProvidedAtInception:r}=t;function o(){var i;const s=G1(),a=n(),l=(i=r??a)!==null&&i!==void 0?i:s;if(l===null)throw new Error(["In order to get SSR working with tss-react you need to explicitly provide an Emotion cache.","MUI users be aware: This is not an error strictly related to tss-react, with or without tss-react,","MUI needs an Emotion cache to be provided for SSR to work.","Here is the MUI documentation related to SSR setup: https://mui.com/material-ui/guides/server-rendering/","TSS provides helper that makes the process of setting up SSR easier: https://docs.tss-react.dev/ssr"].join(`
`));return l}return{useCache:o}}return{createUseCache:e}})();function fc(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Q1(n){const{useTheme:e,cache:t}=n,{makeStyles:r}=ip({useTheme:e,cache:t});function o(i,s,a){const l=typeof i=="string"?(()=>{const h=i,f=function({children:m,...g}){return b.createElement(h,g,m)};return Object.defineProperty(f,"name",{value:fc(h)}),f})():i,c=(()=>{{const{name:f}=a??{};if(f!==void 0)return typeof f!="object"?f:Object.keys(f)[0]}let h;e:{const f=l.displayName;if(typeof f!="string"||f==="")break e;h=f}e:{if(h!==void 0)break e;const f=l.name;if(typeof f!="string"||f==="")break e;h=f}if(h!==void 0)return h=h.replace(/\$/g,"usd"),h=h.replace(/\(/g,"_").replace(/\)/g,"_"),h=h.replace(/[^a-zA-Z0-9-_]/g,"_"),h})(),d=r({...a,name:c})(typeof s=="function"?(h,f,m)=>mc(s(h,f,m)):mc(s));function u(h){for(const f in h)if(f!=="root")return!0;return!1}const p=b.forwardRef(function(h,f){const{className:m,classes:g,...x}=h,{classes:v,cx:k}=d(h,{props:h}),w=k(v.root,m);return ap.set(v,{...v,root:w}),Le.createElement(l,{ref:f,className:u(v)?m:w,...typeof i=="string"?{}:{classes:v},...x})});return c!==void 0&&(p.displayName=`${fc(c)}WithStyles`,Object.defineProperty(p,"name",{value:p.displayName})),p}return o.getClasses=eC,{withStyles:o}}const ap=new WeakMap,hc="getClasses should only be used in conjunction with withStyles";function eC(n){const e=n.classes;if(e===void 0)throw new Error(hc);const t=ap.get(e);if(t===void 0)throw new Error(hc);return t}function mc(n){const e={},t={};return Object.keys(n).forEach(r=>(r.startsWith("@media")?t:e)[r]=n[r]),Object.keys(t).forEach(r=>{const o=t[r];Object.keys(o).forEach(i=>{var s;return e[i]={...(s=e[i])!==null&&s!==void 0?s:{},[r]:o[i]}})}),e}const tC=!(typeof document=="object"&&typeof(document==null?void 0:document.getElementById)=="function")&&!(typeof jest<"u")&&!(typeof mocha<"u")&&!(typeof __vitest_worker__<"u");function lp(n){cp=0,Zt.splice(0,Zt.length);const{useContext:e,usePlugin:t,cache:r}=n,{useCache:o}=sp({cacheProvidedAtInception:r}),{useCssAndCx:i}=rp({useCache:o});return{tss:To({useContext:e,useCache:o,useCssAndCx:i,usePlugin:t??(({classes:l,cx:c,css:d})=>({classes:l,cx:c,css:d})),name:void 0,doesUseNestedSelectors:!1})}}let cp=0;const Zt=[];function To(n){const{useContext:e,useCache:t,useCssAndCx:r,usePlugin:o,name:i,doesUseNestedSelectors:s}=n;return{withParams:()=>To({...n}),withName:a=>To({...n,name:typeof a!="object"?a:Object.keys(a)[0]}),withNestedSelectors:()=>To({...n,doesUseNestedSelectors:!0}),create:a=>{const l=`x${cp++}`;if(i!==void 0)for(;;){const d=Zt.find(u=>u.name===i);if(d===void 0)break;Zt.splice(Zt.indexOf(d),1)}const c=typeof a=="function"?a:()=>a;return function(u){var p,h,f;const{classesOverrides:m,...g}=u??{},x=e(),{css:v,cx:k}=r(),w=t(),D=()=>{const M={},R=c({...u,...x,...s?{classes:typeof Proxy>"u"?{}:new Proxy({},{get:(N,V)=>{if(typeof V=="symbol"&&An(!1),tC&&i===void 0)throw new Error(["tss-react: In SSR setups, in order to use nested selectors, you must also give a unique name to the useStyle function.",'Solution: Use tss.withName("ComponentName").withNestedSelectors<...>()... to set a name.'].join(`
`));e:{if(i===void 0)break e;let $=Zt.find(T=>T.name===i&&T.idOfUseStyles===l);$===void 0&&($={name:i,idOfUseStyles:l,nestedSelectorRuleNames:new Set},Zt.push($)),$.nestedSelectorRuleNames.add(V)}e:{if(i===void 0||!(Zt.find(T=>T.name===i&&T.idOfUseStyles!==l&&T.nestedSelectorRuleNames.has(V))!==void 0))break e;throw new Error([`tss-react: There are in your codebase two different useStyles named "${i}" that`,`both use use the nested selector ${V}.
`,`This may lead to CSS class name collisions, causing nested selectors to target elements outside of the intended scope.
`,`Solution: Ensure each useStyles using nested selectors has a unique name.
`,'Use: tss.withName("UniqueName").withNestedSelectors<...>()...'].join(" "))}return M[V]=`${w.key}-${i!==void 0?i:l}-${V}-ref`}})}:{}});let F=np(dn(R).map(N=>{const V=R[N];return V.label||(V.label=`${i!==void 0?`${i}-`:""}${N}`),[N,`${v(V)}${sa(N,N in M)?` ${M[N]}`:""}`]}));return dn(M).forEach(N=>{N in F||(F[N]=M[N])}),F=la(F,m,k),F},E=nC({cache:w,cssObjectByRuleNameOrGetCssObjectByRuleName:a,classesOverridesRef:un(m),paramsAndPluginParamsRef:un(g),idOfUseStyles:l,context:x,getClasses:D}),P=o({classes:E,css:v,cx:k,idOfUseStyles:l,name:i,...x,...g});return{classes:(p=P.classes)!==null&&p!==void 0?p:E,css:(h=P.css)!==null&&h!==void 0?h:v,cx:(f=P.cx)!==null&&f!==void 0?f:k,...x}}}}}const yo=new WeakMap;function nC(n){const{cache:e,cssObjectByRuleNameOrGetCssObjectByRuleName:t,classesOverridesRef:r,paramsAndPluginParamsRef:o,idOfUseStyles:i,context:s,getClasses:a}=n;e:{const c=yo.get(e);if(c===void 0)break e;const d=c.get(t);if(d===void 0)break e;const u=d.get(r);if(u===void 0)break e;const p=u.get(o);if(p===void 0)break e;const h=p.find(({context:f})=>{if(f===s)return!0;if(dn(f).length!==dn(s).length)return!1;for(const m in f)if(un(f[m])!==un(s[m]))return!1;return!0});if(h===void 0)break e;if((h==null?void 0:h.idOfUseStyles)!==i){p.splice(p.indexOf(h),1);break e}return h.result}const l=a();{yo.has(e)||yo.set(e,new WeakMap);const c=yo.get(e);An(c!==void 0),c.has(t)||c.set(t,new Map);const d=c.get(t);An(d!==void 0),d.has(r)||(d.size>200&&d.clear(),d.set(r,new Map));const u=d.get(r);if(An(u!==void 0),!u.has(o)){e:{const h=typeof o=="string"?257:5;if(u.size<h)break e;u.clear()}u.set(o,[])}let p=u.get(o);An(p!==void 0),p.length>5&&(p=[]),p.push({idOfUseStyles:i,context:s,result:l})}return l}function rC(n){return{...ip(n),...Q1(n)}}const{tss:oC}=lp({useContext:()=>({})});oC.create({});const{makeStyles:Lt,withStyles:RM}=rC({useTheme:Jr}),{tss:iC}=lp({useContext:function(){return{theme:Jr()}},usePlugin:op});iC.create({});const Jo={TABLE_ELEMENT:1,MENU_BAR:2,NOTCHED_OUTLINE:2};function dp(n){const e=Object.keys(n.typography.h1).some(r=>r.includes("@media")),t=Tp`
    0%, 95% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  `;return{...qn(n.typography.body1,["lineHeight"]),"&:focus":{outline:"none"},"& h1":{fontFamily:n.typography.h3.fontFamily,fontWeight:"bold",...e?{fontSize:`${(1.5625*1.2).toFixed(4)}rem`,[n.breakpoints.up("sm")]:{fontSize:`${(1.8219*1.2).toFixed(4)}rem`},[n.breakpoints.up("md")]:{fontSize:`${(2.0243*1.2).toFixed(4)}rem`},[n.breakpoints.up("lg")]:{fontSize:`${(2.0243*1.2).toFixed(4)}rem`}}:{fontSize:`${(2.0243*1.2).toFixed(4)}rem`}},"& h2":{...qn(n.typography.h4,["lineHeight"]),fontWeight:500},"& h3":{...qn(n.typography.h5,["lineHeight"]),fontWeight:500},"& h4":{...qn(n.typography.h6,["lineHeight"]),fontWeight:500},"& h5":{...qn(n.typography.subtitle1,["lineHeight"]),fontWeight:500},"& h6":{...qn(n.typography.subtitle2,["lineHeight"]),fontWeight:500},"& h1, & h2, & h3, & h4, & h5, & h6, & p":{marginBlockStart:0,marginBlockEnd:0},'& a:not([data-type="mention"])':{color:n.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},"& ul, & ol":{marginBlockStart:0,marginBlockEnd:0},"& ol":{listStyleType:"decimal","& ol":{listStyleType:"lower-alpha","& ol":{listStyleType:"lower-roman","& ol":{listStyleType:"decimal","& ol":{listStyleType:"lower-alpha","& ol":{listStyleType:"lower-roman"}}}}}},"& ul":{listStyleType:"disc","& ul":{listStyleType:"circle","& ul":{listStyleType:"square","& ul":{listStyleType:"disc","& ul":{listStyleType:"circle","& ul":{listStyleType:"square"}}}}}},'& ul[data-type="taskList"]':{listStyle:"none",padding:0,"& li":{display:"flex","& > label":{flex:"0 0 auto",marginRight:"0.5rem",userSelect:"none"},"& > div":{flex:"1 1 auto"}}},"& blockquote":{paddingLeft:"1rem",marginInlineStart:n.spacing(1),marginInlineEnd:n.spacing(1),position:"relative","&:before":{position:"absolute",top:0,bottom:0,left:0,display:"block",width:4,borderRadius:n.shape.borderRadius,background:n.palette.text.disabled,content:'""'}},"& :not(pre) > code":{padding:"2px 3px 1px",borderWidth:1,borderStyle:"solid",borderColor:n.palette.divider,borderRadius:3,backgroundColor:n.palette.action.hover,color:n.palette.mode==="dark"?n.palette.secondary.main:ca(n.palette.secondary.dark,.1)},"& pre":{marginTop:n.spacing(.5),marginBottom:n.spacing(.5),padding:n.spacing(1),borderWidth:1,borderStyle:"solid",borderColor:n.palette.divider,borderRadius:n.shape.borderRadius,background:n.palette.action.hover,lineHeight:1.4,overflowX:"auto",whiteSpace:"pre !important"},'& [data-type="mention"]':{padding:"0 0.25rem",lineHeight:"1.3em",borderRadius:n.shape.borderRadius,color:n.palette.primary.main,background:n.palette.mode==="dark"?We(ca(n.palette.primary.dark,.7),.5):We(Op(n.palette.primary.light,.6),.3),textDecoration:"none"},"& img:not(.ProseMirror-separator)":{maxWidth:"100%",height:"auto",display:"inline-flex",...sC(n),"&.ProseMirror-selectednode":{outline:`3px solid ${n.palette.primary.main}`}},"& hr":{borderWidth:0,borderTopWidth:"thin",borderStyle:"solid",borderColor:n.palette.text.secondary,"&.ProseMirror-selectednode":{borderColor:n.palette.primary.main}},"& table":{borderCollapse:"collapse",tableLayout:"fixed",margin:0,overflowY:"hidden",overflowX:"auto",display:"block","& td, th":{minWidth:"1em",borderWidth:1,borderStyle:"solid",borderColor:n.palette.mode==="dark"?n.palette.grey[500]:n.palette.grey[400],padding:"3px 5px",verticalAlign:"top",boxSizing:"border-box",position:"relative","& > *":{marginBottom:0}},"& th":{fontWeight:500,textAlign:"left",backgroundColor:n.palette.action.selected}},"& .tableWrapper":{overflowX:"auto","& table":{overflow:"hidden",display:"table"}},"& .selectedCell:after":{zIndex:Jo.TABLE_ELEMENT,position:"absolute",content:'""',left:0,right:0,top:0,bottom:0,background:"rgba(200, 200, 255, 0.4)",pointerEvents:"none"},'&[contenteditable="true"]':{"& .column-resize-handle":{position:"absolute",right:-2,top:-1,bottom:-2,width:4,zIndex:Jo.TABLE_ELEMENT,backgroundColor:n.palette.primary.light,pointerEvents:"none"},"&.resize-cursor":{cursor:"col-resize"}},'&[contenteditable="false"]':{"& .column-resize-handle":{display:"none"},"&.resize-cursor":{pointerEvents:"none"}},"& p.is-editor-empty:first-of-type::before":{color:n.palette.text.disabled,content:"attr(data-placeholder)",float:"left",height:0,pointerEvents:"none"},"& .ProseMirror-gapcursor:after":{borderColor:n.palette.text.primary},"& .collaboration-cursor__caret":{borderLeft:"1px solid #0d0d0d",borderRight:"1px solid #0d0d0d",marginLeft:"-1px",marginRight:"-1px",position:"relative",wordBreak:"normal",cursor:"text","&:after":{position:"absolute",content:'""',left:-3,right:0,top:-2,borderWidth:3,borderStyle:"solid",borderColor:"inherit"},"&:hover .collaboration-cursor__label":{opacity:1,transition:n.transitions.create("opacity",{delay:0,duration:100,easing:"linear"})}},"& .collaboration-cursor__label":{borderRadius:"3px 3px 3px 0",color:"#0d0d0d",fontSize:12,fontStyle:"normal",fontWeight:600,fontFamily:n.typography.body1.fontFamily,left:-1,lineHeight:"normal",padding:"0.1rem 0.3rem",position:"absolute",top:"-1.4em",userSelect:"none",whiteSpace:"nowrap",pointerEvents:"none",opacity:0,transition:n.transitions.create("opacity",{delay:500,duration:100,easing:"linear"}),animation:`${t} 3s linear 1`}}}function sC(n){if(n.palette.mode!=="dark")return{};const e=n.palette.grey[200];return{backgroundColor:e,color:n.palette.getContrastText(e)}}const aC="MuiTiptap-";function lC(n,e){return`${aC}${n}-${e}`}function gi(n,e){const t={};return e.forEach(r=>{t[r]=lC(n,r)}),t}const up=b.createContext(void 0);function st(){const n=b.useContext(up);if(n===void 0)throw new Error("Tiptap editor not found in component context. Be sure to use <RichTextEditorProvider editor={editor} />!");return n}const Wi=gi("MenuBar",["root","sticky","nonSticky","content"]),cC=Lt({name:{MenuBar:pp}})((n,{stickyOffset:e})=>({root:{borderBottomColor:n.palette.divider,borderBottomStyle:"solid",borderBottomWidth:1},sticky:{position:"sticky",top:e??0,zIndex:Jo.MENU_BAR,background:n.palette.background.default},nonSticky:{},content:{}}));function pp({hide:n,disableSticky:e,stickyOffset:t,children:r,className:o,classes:i}){const{classes:s,cx:a}=cC({stickyOffset:t},{props:{classes:i}});return y.jsx(Xp,{in:!n,unmountOnExit:!0,className:a(Wi.root,s.root,e?[Wi.nonSticky,s.nonSticky]:[Wi.sticky,s.sticky],o),children:y.jsx("div",{className:s.content,children:r})})}const dC=Lt({name:{MenuDivider:er}})(n=>({root:{height:18,margin:n.spacing(0,.5)}}));function er(n){const{classes:e,cx:t}=dC();return y.jsx(ef,{orientation:"vertical",...n,className:t(e.root,n.className)})}const Ui=gi("RichTextContent",["root","readonly","editable"]),uC=Lt({name:{RichTextContent:fp}})(n=>({root:{"& .ProseMirror":{...dp(n)}},readonly:{},editable:{}}));function fp({className:n,classes:e={}}){const{classes:t,cx:r}=uC(void 0,{props:{classes:e}}),o=st(),i=b.useMemo(()=>r(Ui.root,n,t.root,o!=null&&o.isEditable?[Ui.editable,t.editable]:[Ui.readonly,t.readonly]),[n,t,r,o==null?void 0:o.isEditable]);return y.jsx(wt,{className:i,component:IS,editor:o})}function pC({editor:n,children:e}){return y.jsx(up.Provider,{value:n,children:e})}const Gn=gi("FieldContainer",["root","outlined","standard","focused","disabled","notchedOutline"]),fC=Lt({name:{FieldContainer:hp},uniqId:"Os7ZPW"})((n,e,t)=>({root:{},outlined:{borderRadius:n.shape.borderRadius,padding:1,position:"relative",[`&:hover .${t.notchedOutline}`]:{borderColor:n.palette.text.primary},[`&.${t.focused} .${t.notchedOutline}`]:{borderColor:n.palette.primary.main,borderWidth:2},[`&.${t.disabled} .${t.notchedOutline}`]:{borderColor:n.palette.action.disabled}},standard:{},focused:{},disabled:{},notchedOutline:{position:"absolute",inset:0,borderRadius:"inherit",borderColor:n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)",borderStyle:"solid",borderWidth:1,pointerEvents:"none",overflow:"hidden",zIndex:Jo.NOTCHED_OUTLINE}}));function hp({variant:n="outlined",children:e,focused:t,disabled:r,classes:o={},className:i}){const{classes:s,cx:a}=fC(void 0,{props:{classes:o}});return y.jsxs("div",{className:a(Gn.root,s.root,n==="outlined"?[Gn.outlined,s.outlined]:[Gn.standard,s.standard],t&&[Gn.focused,s.focused],r&&[Gn.disabled,s.disabled],i),children:[e,n==="outlined"&&y.jsx("div",{className:a(Gn.notchedOutline,s.notchedOutline),"aria-hidden":!0})]})}var qi,gc;function hC(){if(gc)return qi;gc=1;var n=Qp(),e=function(){return n.Date.now()};return qi=e,qi}var Yi,yc;function mC(){if(yc)return Yi;yc=1;var n=Zp(),e=hC(),t=Gp(),r="Expected a function",o=Math.max,i=Math.min;function s(a,l,c){var d,u,p,h,f,m,g=0,x=!1,v=!1,k=!0;if(typeof a!="function")throw new TypeError(r);l=t(l)||0,n(c)&&(x=!!c.leading,v="maxWait"in c,p=v?o(t(c.maxWait)||0,l):p,k="trailing"in c?!!c.trailing:k);function w($){var T=d,S=u;return d=u=void 0,g=$,h=a.apply(S,T),h}function D($){return g=$,f=setTimeout(M,l),x?w($):h}function E($){var T=$-m,S=$-g,O=l-T;return v?i(O,p-S):O}function P($){var T=$-m,S=$-g;return m===void 0||T>=l||T<0||v&&S>=p}function M(){var $=e();if(P($))return R($);f=setTimeout(M,E($))}function R($){return f=void 0,k&&d?w($):(d=u=void 0,h)}function F(){f!==void 0&&clearTimeout(f),g=0,d=m=u=f=void 0}function N(){return f===void 0?h:R(e())}function V(){var $=e(),T=P($);if(d=arguments,u=this,m=$,T){if(f===void 0)return D(m);if(v)return clearTimeout(f),f=setTimeout(M,l),w(m)}return f===void 0&&(f=setTimeout(M,l)),h}return V.cancel=F,V.flush=N,V}return Yi=s,Yi}var gC=mC();const mp=xr(gC);function yC({editor:n,wait:e=250}){const[t,r]=b.useState(!!(n!=null&&n.isFocused)),o=b.useMemo(()=>mp(i=>{r(i)},e),[e]);return b.useEffect(()=>{const i=!!(n!=null&&n.isFocused);return o(i),i&&o.flush(),()=>{o.cancel()}},[n==null?void 0:n.isFocused,o]),t}class gp extends b.Component{constructor(e){var t,r;super(e),this.updateDebounced=mp(this.forceUpdate,(t=e.wait)!==null&&t!==void 0?t:170,(r=e.options)!==null&&r!==void 0?r:{leading:!0,trailing:!0,maxWait:300})}shouldComponentUpdate(){return this.updateDebounced(),!1}componentWillUnmount(){this.updateDebounced.cancel()}render(){return this.props.children}}const Zn=gi("RichTextField",["root","standard","outlined","menuBar","menuBarContent","content"]),xC=Lt({name:{RichTextField:yp},uniqId:"E2Alw3"})((n,e,t)=>({root:{},standard:{[`& .${t.content}`]:{padding:n.spacing(1.5,0)},[`& .${t.menuBarContent}`]:{padding:n.spacing(1,0)}},outlined:{[`& .${t.content}`]:{padding:n.spacing(1.5)},[`& .${t.menuBarContent}`]:{padding:n.spacing(1,1.5)}},menuBar:{},menuBarContent:{},content:{}}));function yp({variant:n="outlined",controls:e,disableDebounceRenderControls:t=!1,disabled:r,className:o,classes:i={},footer:s,MenuBarProps:a,RichTextContentProps:l}){var c,d;const{classes:u,cx:p}=xC(void 0,{props:{classes:i}}),h=st(),f=yC({editor:h});return y.jsxs(hp,{variant:n,focused:!r&&f,disabled:r,className:p(Zn.root,u.root,n==="outlined"?[Zn.outlined,u.outlined]:[Zn.standard,u.standard],o),children:[e&&y.jsx(pp,{...a,classes:{...a==null?void 0:a.classes,root:p(Zn.menuBar,u.menuBar,(c=a==null?void 0:a.classes)===null||c===void 0?void 0:c.root),content:p(Zn.content,u.menuBarContent,(d=a==null?void 0:a.classes)===null||d===void 0?void 0:d.content)},children:t?e:y.jsx(gp,{children:e})}),y.jsx(fp,{...l,className:p(Zn.content,u.content,l==null?void 0:l.className)}),s]})}let Ki;function vC(){return Ki===void 0&&(Ki=navigator.platform.includes("Mac")),Ki}function bC(){return vC()?"":"Ctrl"}const kC=Lt({name:{MenuButtonTooltip:Pt}})(n=>({titleContainer:{textAlign:"center"},label:{fontSize:n.typography.pxToRem(13)},shortcutKey:{fontSize:n.typography.pxToRem(12),border:`1px solid ${We(n.palette.text.secondary,.2)}`,backgroundColor:We(n.palette.background.paper,.3),height:"19px",lineHeight:"19px",padding:"0 4px",minWidth:17,borderRadius:n.shape.borderRadius,display:"inline-block","&:not(:first-of-type)":{marginLeft:1}}}));function Pt({label:n,shortcutKeys:e,placement:t="top",contentWrapperClassName:r,children:o,...i}){const{classes:s}=kC();return y.jsx(wc,{title:n||e&&e.length>0?y.jsxs("div",{className:s.titleContainer,children:[y.jsx("div",{className:s.label,children:n}),e&&e.length>0&&y.jsx(nt,{variant:"body2",component:"div",children:e.map((a,l)=>y.jsx("span",{className:s.shortcutKey,children:a==="mod"?bC():a},l))})]}):"",placement:t,arrow:!0,...i,children:y.jsx("span",{className:r,children:o})})}const wC="1.25rem",SC=Lt({name:{MenuButton:vt}})({root:{[`&& .${xo.root}`]:{border:"none",padding:5}},menuButtonIcon:{fontSize:wC}});function vt({tooltipLabel:n,tooltipShortcutKeys:e,IconComponent:t,buttonRef:r,children:o,...i}){const{classes:s}=SC();return y.jsx("span",{className:s.root,children:y.jsx(Pt,{label:n,shortcutKeys:e,children:y.jsx(bf,{ref:r,size:"small",value:n,...i,children:o??(t&&y.jsx(t,{className:s.menuButtonIcon}))})})})}const CC=Lt({name:{MenuControlsContainer:xp}})(n=>({root:{display:"flex",rowGap:n.spacing(.3),columnGap:n.spacing(.3),alignItems:"center",flexWrap:"wrap"}}));function xp({children:n,className:e,debounced:t,DebounceProps:r}){const{classes:o,cx:i}=CC(),s=y.jsx("div",{className:i(o.root,e),children:n});return t?y.jsx(gp,{...r,children:s}):s}function MC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Blockquote",tooltipShortcutKeys:["mod","Shift","B"],IconComponent:Tf,selected:(e=t==null?void 0:t.isActive("blockquote"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleBlockquote(),onClick:()=>t==null?void 0:t.chain().focus().toggleBlockquote().run(),...n})}function DC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Bold",tooltipShortcutKeys:["mod","B"],IconComponent:wf,selected:(e=t==null?void 0:t.isActive("bold"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleBold(),onClick:()=>t==null?void 0:t.chain().focus().toggleBold().run(),...n})}function TC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Bulleted list",tooltipShortcutKeys:["mod","Shift","8"],IconComponent:Mf,selected:(e=t==null?void 0:t.isActive("bulletList"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleBulletList(),onClick:()=>t==null?void 0:t.chain().focus().toggleBulletList().run(),...n})}function OC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Code",tooltipShortcutKeys:["mod","E"],IconComponent:kf,selected:(e=t==null?void 0:t.isActive("code"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleCode(),onClick:()=>t==null?void 0:t.chain().focus().toggleCode().run(),...n})}function EC(n){const e=st();return y.jsx(vt,{tooltipLabel:"Insert horizontal line",IconComponent:Of,disabled:!(e!=null&&e.isEditable)||!e.can().setHorizontalRule(),onClick:()=>e==null?void 0:e.chain().focus().setHorizontalRule().run(),...n})}function PC(n,e){const t=Wt(e,n.schema),{from:r,to:o,empty:i}=n.selection,s=[];return i?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,a=>{s.push(...a.marks)}),s.filter(a=>a.type.name===t.name).map(a=>({...a.attrs}))}function AC(n,e){const t=Ve(e,n.schema),{from:r,to:o}=n.selection,i=[];return n.doc.nodesBetween(r,o,s=>{i.push(s)}),i.reverse().filter(s=>s.type.name===t.name).map(s=>({...s.attrs}))}function IC(n,e){const t=no(e,n.schema);return t==="node"?AC(n,e):t==="mark"?PC(n,e):[]}function NC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Italic",tooltipShortcutKeys:["mod","I"],IconComponent:Cf,selected:(e=t==null?void 0:t.isActive("italic"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleItalic(),onClick:()=>t==null?void 0:t.chain().focus().toggleItalic().run(),...n})}function RC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Ordered list",tooltipShortcutKeys:["mod","Shift","7"],IconComponent:Df,selected:(e=t==null?void 0:t.isActive("orderedList"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleOrderedList(),onClick:()=>t==null?void 0:t.chain().focus().toggleOrderedList().run(),...n})}function FC(n){const e=st();return y.jsx(vt,{tooltipLabel:"Redo",tooltipShortcutKeys:["mod","Shift","Z"],IconComponent:Ef,disabled:!(e!=null&&e.isEditable)||!e.can().redo(),onClick:()=>e==null?void 0:e.chain().focus().redo().run(),...n})}function jC(n){const e=st();return y.jsx(vt,{tooltipLabel:"Remove inline formatting",IconComponent:Sf,disabled:!(e!=null&&e.isEditable)||!e.can().unsetAllMarks(),onClick:()=>e==null?void 0:e.chain().focus().unsetAllMarks().run(),...n})}function LC(n){var e;const t=st();return y.jsx(vt,{tooltipLabel:"Strikethrough",tooltipShortcutKeys:["mod","Shift","X"],IconComponent:Pf,selected:(e=t==null?void 0:t.isActive("strike"))!==null&&e!==void 0?e:!1,disabled:!(t!=null&&t.isEditable)||!t.can().toggleStrike(),onClick:()=>t==null?void 0:t.chain().focus().toggleStrike().run(),...n})}function VC(n){const e=st();return y.jsx(vt,{tooltipLabel:"Undo",tooltipShortcutKeys:["mod","Z"],IconComponent:Af,disabled:!(e!=null&&e.isEditable)||!e.can().undo(),onClick:()=>e==null?void 0:e.chain().focus().undo().run(),...n})}const $C=Lt({name:{MenuSelect:vp}})(n=>({rootTooltipWrapper:{display:"inline-flex"},selectRoot:{[`&:not(:hover):not(.${da.focused}) .${da.notchedOutline}`]:{borderWidth:0},[`& .${ua.root}`]:{color:n.palette.action.active},[`&.${Wp.disabled} .${ua.root}`]:{color:n.palette.action.disabled}},select:{"&&&":{paddingLeft:n.spacing(1),paddingRight:n.spacing(3)}},selectDropdownIcon:{right:1},input:{paddingTop:"3px",paddingBottom:"3px",fontSize:"0.9em"}}));function vp({tooltipTitle:n,...e}){var t,r,o;const{classes:i,cx:s}=$C(),[a,l]=b.useState(!1),c=y.jsx(kc,{margin:"none",variant:"outlined",size:"small",...e,onMouseEnter:(...d)=>{var u;l(!0),(u=e.onMouseEnter)===null||u===void 0||u.call(e,...d)},onMouseLeave:(...d)=>{var u;l(!1),(u=e.onMouseLeave)===null||u===void 0||u.call(e,...d)},onClick:(...d)=>{var u;l(!1),(u=e.onClick)===null||u===void 0||u.call(e,...d)},inputProps:{...e.inputProps,className:s(i.input,(t=e.inputProps)===null||t===void 0?void 0:t.className)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...e.MenuProps},className:s(i.selectRoot,e.className),classes:{...e.classes,select:s(i.select,(r=e.classes)===null||r===void 0?void 0:r.select),icon:s(i.selectDropdownIcon,(o=e.classes)===null||o===void 0?void 0:o.icon)}});return n?y.jsx(Pt,{label:n,contentWrapperClassName:i.rootTooltipWrapper,open:a,children:c}):c}const BC=Lt({name:{MenuSelectHeading:bp}})(n=>{const e=dp(n);return{selectInput:{width:77},menuOption:{display:"block",width:"100%"},headingOption:{marginBlockStart:0,marginBlockEnd:0,fontWeight:"bold"},headingOption1:{fontSize:e["& h1"].fontSize},headingOption2:{fontSize:e["& h2"].fontSize},headingOption3:{fontSize:e["& h3"].fontSize},headingOption4:{fontSize:e["& h4"].fontSize},headingOption5:{fontSize:e["& h5"].fontSize},headingOption6:{fontSize:e["& h6"].fontSize}}}),xe={Paragraph:"Paragraph",Heading1:"Heading 1",Heading2:"Heading 2",Heading3:"Heading 3",Heading4:"Heading 4",Heading5:"Heading 5",Heading6:"Heading 6"},xc={[xe.Heading1]:1,[xe.Heading2]:2,[xe.Heading3]:3,[xe.Heading4]:4,[xe.Heading5]:5,[xe.Heading6]:6},vc={1:xe.Heading1,2:xe.Heading2,3:xe.Heading3,4:xe.Heading4,5:xe.Heading5,6:xe.Heading6};function bp({labels:n,hideShortcuts:e=!1,...t}){var r,o,i,s,a,l,c,d;const{classes:u,cx:p}=BC(),h=st(),f=b.useCallback(P=>{const M=P.target.value;M===xe.Paragraph?h==null||h.chain().setParagraph().focus().run():M in xc&&(h==null||h.chain().setHeading({level:xc[M]}).focus().run())},[h]);let m="",g;if(h!=null&&h.isActive("paragraph"))m=xe.Paragraph;else if(h!=null&&h.isActive("heading")){const M=IC(h.state,"heading").map(F=>F.level);g=new Set(M).size===1?M[0]:void 0,g&&g in vc&&(m=vc[g])}const x=m!=="",v=!!(h!=null&&h.can().setParagraph()),k=b.useMemo(()=>{var P;const M=h==null?void 0:h.extensionManager.extensions.find(R=>R.name=="heading");return new Set((P=M==null?void 0:M.options.levels)!==null&&P!==void 0?P:[])},[h]),w=k.values().next(),D=w.done?void 0:w.value,E=D!==void 0&&(g===D||!!(h!=null&&h.can().setHeading({level:D})));return y.jsxs(vp,{onChange:f,disabled:!(h!=null&&h.isEditable)||!x&&!v&&!E,displayEmpty:!0,renderValue:P=>{var M,R;let F;return P===""?F=(R=(M=n==null?void 0:n.emptyValue)!==null&&M!==void 0?M:n==null?void 0:n.empty)!==null&&R!==void 0?R:y.jsx("em",{children:"Change to"}):P===xe.Paragraph?F=n==null?void 0:n.paragraph:P===xe.Heading1?F=n==null?void 0:n.heading1:P===xe.Heading2?F=n==null?void 0:n.heading2:P===xe.Heading3?F=n==null?void 0:n.heading3:P===xe.Heading4?F=n==null?void 0:n.heading4:P===xe.Heading5?F=n==null?void 0:n.heading5:P===xe.Heading6&&(F=n==null?void 0:n.heading6),F??P},"aria-label":"Text headings",tooltipTitle:"Styles",...t,value:m,inputProps:{...t.inputProps,className:p(u.selectInput,(r=t.inputProps)===null||r===void 0?void 0:r.className)},children:[y.jsx(ft,{value:xe.Paragraph,disabled:!x&&!v,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","0"],placement:"right",contentWrapperClassName:u.menuOption,children:(o=n==null?void 0:n.paragraph)!==null&&o!==void 0?o:xe.Paragraph})}),k.has(1)&&y.jsx(ft,{value:xe.Heading1,disabled:!E,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","1"],placement:"right",contentWrapperClassName:p(u.menuOption,u.headingOption,u.headingOption1),children:(i=n==null?void 0:n.heading1)!==null&&i!==void 0?i:xe.Heading1})}),k.has(2)&&y.jsx(ft,{value:xe.Heading2,disabled:!E,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","2"],placement:"right",contentWrapperClassName:p(u.menuOption,u.headingOption,u.headingOption2),children:(s=n==null?void 0:n.heading2)!==null&&s!==void 0?s:xe.Heading2})}),k.has(3)&&y.jsx(ft,{value:xe.Heading3,disabled:!E,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","3"],placement:"right",contentWrapperClassName:p(u.menuOption,u.headingOption,u.headingOption3),children:(a=n==null?void 0:n.heading3)!==null&&a!==void 0?a:xe.Heading3})}),k.has(4)&&y.jsx(ft,{value:xe.Heading4,disabled:!E,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","4"],placement:"right",contentWrapperClassName:p(u.menuOption,u.headingOption,u.headingOption4),children:(l=n==null?void 0:n.heading4)!==null&&l!==void 0?l:xe.Heading4})}),k.has(5)&&y.jsx(ft,{value:xe.Heading5,disabled:!E,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","5"],placement:"right",contentWrapperClassName:p(u.menuOption,u.headingOption,u.headingOption5),children:(c=n==null?void 0:n.heading5)!==null&&c!==void 0?c:xe.Heading5})}),k.has(6)&&y.jsx(ft,{value:xe.Heading6,disabled:!E,children:y.jsx(Pt,{label:"",shortcutKeys:e?void 0:["mod","alt","6"],placement:"right",contentWrapperClassName:p(u.menuOption,u.headingOption,u.headingOption6),children:(d=n==null?void 0:n.heading6)!==null&&d!==void 0?d:xe.Heading6})})]})}const zC=({value:n,onChange:e})=>{const t=HS({extensions:[q1],content:n||"<p>Saisissez ici...</p>",onUpdate({editor:r}){e(r.getHTML())}});return b.useEffect(()=>{t&&n!==t.getHTML()&&t.commands.setContent(n||"<p>Saisissez ici...</p>")},[n,t]),y.jsx(wt,{sx:{border:"1px solid #ccc",borderRadius:1,minHeight:150,p:1},children:y.jsx(pC,{editor:t,children:y.jsx(yp,{controls:y.jsxs(xp,{children:[y.jsx(bp,{}),y.jsx(er,{}),y.jsx(DC,{}),y.jsx(NC,{}),y.jsx(LC,{}),y.jsx(er,{}),y.jsx(RC,{}),y.jsx(TC,{}),y.jsx(er,{}),y.jsx(MC,{}),y.jsx(OC,{}),y.jsx(EC,{}),y.jsx(er,{}),y.jsx(VC,{}),y.jsx(FC,{}),y.jsx(er,{}),y.jsx(jC,{})]})})})})},_C=[{to:"/",title:"Incidents"},{title:"Ajouter un incident"}],HC=n=>y.jsx(pf,{...n,direction:"down"}),FM=()=>{const n=Jr(),e="https://safeschooldata-6d63cd50a8a3.herokuapp.com",[t,r]=b.useState("M"),[o,i]=b.useState(Oe()),[s,a]=b.useState(Oe()),[l,c]=b.useState(""),[d,u]=b.useState([]),[p,h]=b.useState([]),[f,m]=b.useState(null),[g,x]=b.useState([]),[v,k]=b.useState(null),[w,D]=b.useState([]),[E,P]=b.useState(null),[M,R]=b.useState(!1),[F,N]=b.useState(!1),[V,$]=b.useState(""),[T,S]=b.useState(""),[O,B]=b.useState([]),[L,_]=b.useState(""),[U,J]=b.useState({open:!1,message:"",severity:"info"}),G=(j,A="info")=>J({open:!0,message:j,severity:A}),de=()=>J(j=>({...j,open:!1})),{getRootProps:K,getInputProps:z}=Vc({accept:{"image/*":[]},onDrop:j=>B(A=>[...A,...j])}),Q=j=>B(A=>A.filter(Y=>Y!==j)),Z=O.map((j,A)=>y.jsxs(wt,{display:"flex",justifyContent:"space-between",py:1,mt:2,sx:{borderTop:`1px solid ${n.palette.divider}`},children:[y.jsx(nt,{children:j.name}),y.jsx(Mc,{color:"primary",label:`${Math.round(j.size/1024)} KB`,onDelete:()=>Q(j)})]},A));b.useEffect(()=>{H(`${e}/api/schools/`,h,j=>({label:j.name,value:j.id}))},[]),b.useEffect(()=>{H(`${e}/api/incident-categories/`,x,j=>({label:j.name,value:j.id}))},[]),b.useEffect(()=>{H(`${e}/api/incident-types/`,D,j=>j)},[]),b.useEffect(()=>{H(`${e}/api/actions/`,u,j=>({...j,checked:!1}))},[]);const H=async(j,A,Y)=>{try{let q=[],X=1;for(;;){const ee=await(await fetch(`${j}?page=${X}`)).json();if(q=[...q,...ee.results||ee],!ee.next)break;X++}A(q.map(Y))}catch(q){console.error(q)}},ne=async()=>{if(!V||!E)return G("Nom et type d'incident obligatoires","warning");try{const j=await fetch(`${e}/api/incident-categories/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:V,typeIncident:E.id})});if(!j.ok)throw new Error("Erreur ajout catgorie");const A=await j.json();x(Y=>[...Y,{label:A.name,value:A.id}]),$(""),P(null),R(!1),G("Catgorie ajoute !","success")}catch(j){console.error(j),G("Erreur ajout catgorie","error")}},se=async()=>{if(!T)return G("Nom action obligatoire","warning");try{const j=await fetch(`${e}/api/actions/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T})});if(!j.ok)throw new Error("Erreur ajout action");const A=await j.json();u(Y=>[...Y,{...A,checked:!1}]),S(""),N(!1),G("Action ajoute !","success")}catch(j){console.error(j),G("Erreur ajout action","error")}},te=async j=>{j.preventDefault();const A=j.target,Y=d.filter(q=>q.checked);if(!f)return G("Slectionner une cole","warning");if(!A.student.value.trim())return G("Nom lve obligatoire","warning");if(!o)return G("Date naissance obligatoire","warning");if(!t)return G("Slection sexe obligatoire","warning");if(!O)return G("Les medias sont obligatoires","warning");if(!A.father.value.trim())return G("Le nom du pere est obligatoire","warning");if(!A.mother.value.trim())return G("Le nom de la mere est obligatoire","warning");if(!A.tutor.value.trim())return G("Le nom du tuteur est obligatoire","warning");if(!L.replace(/<[^>]+>/g,""))return G("La narration est obligatoire","warning");if(!A.address.value.trim())return G("Adresse obligatoire","warning");if(!v)return G("Slection catgorie obligatoire","warning");if(!l)return G("Slection gravit obligatoire","warning");if(!A.place.value.trim())return G("Lieu incident obligatoire","warning");if(!s)return G("Date incident obligatoire","warning");if(!A.tel.value.trim())return G("Tlphone obligatoire","warning");if(Y.length===0)return G("Slectionner au moins une action","warning");try{const q=new FormData;q.append("school",f.value),q.append("student",A.student.value.trim()),q.append("dob_student",o.format("YYYY-MM-DD")),q.append("gender",t),q.append("add_student",A.address.value.trim()),q.append("father_name",A.father.value.trim()),q.append("mather_name",A.mother.value.trim()),q.append("tutor_name",A.tutor.value.trim()),q.append("tel",A.tel.value.trim()),q.append("cat_incident",v.value),q.append("place",A.place.value.trim()),q.append("type",l),q.append("date_incident",s.toISOString()),q.append("narration",L.replace(/<[^>]+>/g,"")),q.append("state","false"),Y.forEach(oe=>q.append("action_ids",oe.id)),O.forEach(oe=>q.append("uploaded_files",oe));const X=await fetch(`${e}/api/incidents/`,{method:"POST",body:q});if(!X.ok)throw new Error("Erreur cration incident");await X.json(),G("Incident cr !","success"),A.reset(),r("M"),i(Oe()),a(Oe()),c(""),u(oe=>oe.map(ee=>({...ee,checked:!1}))),m(null),k(null),B([]),_("")}catch(q){console.error(q),G("Erreur cration incident","error")}};return y.jsxs(Ep,{title:"Ajouter un incident",children:[y.jsx(Pp,{title:"Incidents",items:_C}),y.jsxs("form",{onSubmit:te,children:[y.jsxs(Fe,{container:!0,spacing:3,children:[y.jsx(Fe,{size:{lg:8},children:y.jsxs(ro,{spacing:3,children:[y.jsx(Un,{children:y.jsxs(wt,{p:3,children:[y.jsx(nt,{variant:"h5",children:"Informations gnrales"}),y.jsxs(Fe,{container:!0,spacing:2,mt:2,children:[y.jsxs(Fe,{xs:12,children:[y.jsx(dt,{children:"Nom de llve *"}),y.jsx(bn,{name:"student",fullWidth:!0})]}),y.jsxs(Fe,{xs:12,children:[y.jsx(dt,{children:"Date de naissance *"}),y.jsx(Ao,{dateAdapter:Za,children:y.jsx(Ua,{value:o,onChange:i})})]}),y.jsxs(Fe,{xs:12,children:[y.jsx(dt,{children:"Sexe *"}),y.jsxs(Ta,{value:t,onChange:j=>r(j.target.value),fullWidth:!0,children:[y.jsx(ft,{value:"M",children:"M"}),y.jsx(ft,{value:"F",children:"F"})]})]}),y.jsxs(Fe,{xs:12,children:[y.jsx(dt,{children:"Adresse lve *"}),y.jsx(bn,{name:"address",fullWidth:!0})]})]}),y.jsxs(Fe,{container:!0,spacing:2,alignItems:"flex-start",mt:2,children:[y.jsx(Fe,{xs:8,children:y.jsx(oo,{options:g,getOptionLabel:j=>j.label,value:v,disableClearable:!0,onChange:(j,A)=>k(A),renderInput:j=>y.jsx(Cn,{...j,label:"Slectionner une catgorie",fullWidth:!0,sx:{minWidth:350,"& .MuiInputBase-input":{fontSize:16,padding:"12px"}}})})}),y.jsx(Fe,{xs:4,display:"flex",justifyContent:"flex-start",children:y.jsx(wc,{title:"Ajouter une catgorie",children:y.jsx(pt,{variant:"contained",onClick:()=>R(!0),sx:{height:"40px",ml:2},children:y.jsx(ha,{size:22})})})})]}),y.jsxs(Fe,{container:!0,spacing:2,mt:2,children:[y.jsxs(Fe,{xs:4,children:[y.jsx(dt,{children:"Nom du pre"}),y.jsx(bn,{name:"father",fullWidth:!0})]}),y.jsxs(Fe,{xs:4,children:[y.jsx(dt,{children:"Nom de la mre"}),y.jsx(bn,{name:"mother",fullWidth:!0})]}),y.jsxs(Fe,{xs:4,children:[y.jsx(dt,{children:"Nom du tuteur"}),y.jsx(bn,{name:"tutor",fullWidth:!0})]})]}),y.jsxs(Fe,{xs:12,mt:2,children:[y.jsx(dt,{children:"Narration"}),y.jsx(zC,{value:L,onChange:_})]})]})}),y.jsx(Un,{children:y.jsxs(wt,{p:3,children:[y.jsxs(ro,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:2,children:[y.jsx(nt,{variant:"h5",children:"Actions prises"}),y.jsx(pt,{variant:"contained",size:"small",startIcon:y.jsx(ha,{}),onClick:()=>N(!0),children:"Ajouter une action"})]}),y.jsx(oo,{multiple:!0,disableCloseOnSelect:!0,options:d,getOptionLabel:j=>j.name,value:d.filter(j=>j.checked),onChange:(j,A)=>{u(Y=>Y.map(q=>({...q,checked:A.includes(q)})))},renderOption:(j,A,{selected:Y})=>y.jsxs("li",{...j,children:[y.jsx(cf,{style:{marginRight:8},checked:Y}),A.name]}),renderInput:j=>y.jsx(Cn,{...j,variant:"outlined",label:"Slectionner les actions",placeholder:"Choisir..."})})]})}),y.jsx(Un,{children:y.jsxs(wt,{p:3,children:[y.jsx(nt,{variant:"h5",children:"Media"}),y.jsxs(wt,{mt:3,...K(),sx:{backgroundColor:"primary.light",color:"primary.main",padding:"40px 30px",textAlign:"center",border:"1px dashed",cursor:"pointer"},children:[y.jsx("input",{...z(),multiple:!0}),y.jsx("p",{children:"Cliquez pour ajouter des medias"})]}),y.jsxs(wt,{mt:2,children:[y.jsx(nt,{variant:"h6",children:"Files :"}),Z]})]})}),y.jsx(Un,{children:y.jsxs(wt,{p:3,children:[y.jsx(nt,{variant:"h5",children:"cole"}),y.jsx(oo,{options:p,getOptionLabel:j=>j.label,value:f,disableClearable:!0,onChange:(j,A)=>m(A),renderInput:j=>y.jsx(Cn,{...j,label:"Slectionner une cole",fullWidth:!0})})]})})]})}),y.jsx(Fe,{size:{lg:4},children:y.jsxs(ro,{spacing:3,children:[y.jsx(Un,{children:y.jsxs(wt,{p:3,children:[y.jsx(nt,{variant:"h5",children:"Contacts"}),y.jsx(dt,{children:"Tlphone *"}),y.jsx(bn,{name:"tel",fullWidth:!0})]})}),y.jsx(Un,{children:y.jsxs(wt,{p:3,children:[y.jsx(dt,{children:"Lieu de l'incident *"}),y.jsx(bn,{name:"place",fullWidth:!0}),y.jsx(dt,{mt:3,children:"Gravit *"}),y.jsxs(Ta,{value:l,onChange:j=>c(j.target.value),fullWidth:!0,children:[y.jsx(ft,{value:"Faible",children:"Faible"}),y.jsx(ft,{value:"Moyen",children:"Moyen"}),y.jsx(ft,{value:"Grave",children:"Grave"})]}),y.jsx(dt,{mt:3,children:"Date de l'incident *"}),y.jsx(Ao,{dateAdapter:Za,children:y.jsx(Ua,{value:s,onChange:a})})]})})]})})]}),y.jsxs(ro,{direction:"row",spacing:2,mt:3,children:[y.jsx(pt,{type:"submit",variant:"contained",children:"Enregistrer"}),y.jsx(pt,{variant:"outlined",color:"error",children:"Annuler"})]})]}),y.jsx(df,{open:U.open,autoHideDuration:4e3,onClose:de,TransitionComponent:HC,anchorOrigin:{vertical:"top",horizontal:"center"},children:y.jsx(uf,{onClose:de,severity:U.severity,sx:{width:"100%"},children:U.message})}),y.jsxs(Gi,{open:M,onClose:()=>R(!1),maxWidth:"sm",fullWidth:!0,children:[y.jsx(fa,{sx:{fontWeight:"bold"},children:"Ajouter une catgorie"}),y.jsx(Zi,{children:y.jsxs(Fe,{container:!0,spacing:2,mt:1,children:[y.jsx(Fe,{item:!0,xs:12,children:y.jsx(Cn,{label:"Nom catgorie",value:V,onChange:j=>$(j.target.value),fullWidth:!0,sx:{mt:1,fontSize:16}})}),y.jsx(Fe,{item:!0,xs:12,children:y.jsx(oo,{options:w,getOptionLabel:j=>j.name,value:E,onChange:(j,A)=>P(A),renderInput:j=>y.jsx(Cn,{...j,label:"Type d'incident",fullWidth:!0})})})]})}),y.jsxs(Ji,{children:[y.jsx(pt,{onClick:()=>R(!1),children:"Annuler"}),y.jsx(pt,{onClick:ne,variant:"contained",children:"Ajouter"})]})]}),y.jsxs(Gi,{open:F,onClose:()=>N(!1),maxWidth:"sm",fullWidth:!0,children:[y.jsx(fa,{sx:{fontWeight:"bold"},children:"Ajouter une action"}),y.jsx(Zi,{children:y.jsx(Cn,{label:"Nom action",value:T,onChange:j=>S(j.target.value),fullWidth:!0,sx:{mt:1,fontSize:16}})}),y.jsxs(Ji,{children:[y.jsx(pt,{onClick:()=>N(!1),children:"Annuler"}),y.jsx(pt,{onClick:se,variant:"contained",children:"Ajouter"})]})]})]})};export{FM as default};
